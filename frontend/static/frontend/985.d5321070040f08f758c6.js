"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[985],{985:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(540),r=a(767),s=a(398),o=a(946),l=a(926);const c=function(){const{user:e,userLoading:t,contextLoading:a,setLoadingMessage:c,retrieveUserData:m,setErrorMessage:u}=(0,o.Xn)(),[i,d]=(0,n.useState)(!1),[p,g]=(0,n.useState)(!1);async function E(){if(i)return;d(!0),c("Loading...");let e=!0,t=document.getElementById("username-email").value,a=document.getElementById("password").value;t.includes("@")&&(e=!1);const n=await(0,s.Uu)(e,t,a);if(c(!1),d(!1),n.error)return u("Error logging in"),void console.log(n.error);if(400!=n.status){if(403!==n.status)return 200===n.status?(m(),c(!1),void d(!1)):void 0;u("Your account is not active")}else u("Invalid credentials")}return(0,n.useEffect)((()=>{t||g(e.is_logged_in)}),[t]),a?null:p?n.createElement(r.C5,{to:"/",replace:!0}):n.createElement("div",null,n.createElement("div",{className:"card shadow mx-auto my-5 rounded-15 element-background-color element-border-color",style:{width:"21rem"}},n.createElement("div",{className:"my-3",style:{display:"flex"}},n.createElement("h6",{style:{margin:"auto",fontSize:"40px"}},"Login")),n.createElement("hr",{className:"mt-2"}),n.createElement("div",{className:"input-group px-3 mx-auto"},n.createElement("input",{type:"text",className:"form-control",placeholder:"Username or email",id:"username-email",onKeyUp:e=>{(0,l.ac)(e,E)}})),n.createElement("div",{className:"input-group mt-3 px-3 mx-auto"},n.createElement("input",{type:"password",className:"form-control",placeholder:"Password",id:"password",onKeyUp:e=>{(0,l.ac)(e,E)}})),i&&n.createElement("div",{className:"input-group mt-3 px-3 mx-auto"},n.createElement("button",{type:"submit",className:"btn btn-primary w-100 rounded-15",disabled:!0},"Loading...")),!i&&n.createElement("div",{className:"input-group mt-3 px-3 mx-auto"},n.createElement("button",{type:"submit",className:"btn btn-primary w-100 rounded-15",onClick:E},"Login")),n.createElement("div",{className:"container d-flex justify-content-center"},n.createElement("small",{className:"mt-2 px-3"},n.createElement("a",{href:"/find-account"},"Forgot your password?"))),n.createElement("hr",{className:"mt-2"}),n.createElement("div",{className:"input-group mb-3 px-3 mx-auto"},n.createElement("a",{href:"/register",className:"btn btn-success w-100 rounded-15"},"Create account"))))}}}]);