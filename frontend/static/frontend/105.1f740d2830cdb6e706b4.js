"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[105],{105:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var o=n(540),i=n(974),c=n(946),r=n(926),a=n(550);function l(){const{setErrorMessage:e,addErrorMessage:t,setSuccessMessage:n,setLoadingMessage:l,currentSeason:s,competitorsSortedNumber:d,loggedIn:m,user:p,contextLoading:u,selectPicksState:k}=(0,c.Xn)(),[E,b]=(0,o.useState)([0,0,0,0,0]),[f,g]=(0,o.useState)(!0),[v,N]=(0,o.useState)([0,0,0,0,0]),[w,y]=(0,o.useState)(!1),[h,_]=(0,o.useState)(!1),[x,P]=(0,o.useState)(!1),[S,C]=(0,o.useState)(!1),[$,R]=(0,o.useState)(["1st","2nd","3rd","4th","5th"]);function j(e,t){N((n=>{const o=[...n];return o[e]=t,o}))}return(0,o.useEffect)((()=>{l("Loading..."),async function(){const t=await(0,i.wu)(s.id);if(t.error)return e("There has been an error loading the selected picks"),void console.log(t.error);if(null!=t.userPicks){const e=t.userPicks.sort(((e,t)=>e.position-t.position)).map((e=>e.competitor_points.competitor));N(e),null!=t.independentPick&&y(t.independentPick.competitor_points.competitor),null!=t.rookiePick&&P(t.rookiePick.competitor_points.competitor)}}(),g(!1),l(!1)}),[]),f||u?null:m?k?o.createElement("div",{className:"card mt-4 rounded-15"},o.createElement("div",{className:"card-header d-flex justify-content-center"},o.createElement("h3",null,"Season: ",s.year)),o.createElement("div",{className:"card-body"},v.map(((e,t)=>1==E[t]?o.createElement("div",{className:"col d-flex justify-content-center",key:`${$[t]}-pick-dropdown-div`},o.createElement("div",{className:"card text-center mb-2"},o.createElement("div",{className:"card-header"},o.createElement("h5",{className:"card-title text-muted"},$[t]," Pick")),o.createElement("div",{className:"card-body",style:{padding:"8px"}},o.createElement("div",{className:"dropdown p-2"},o.createElement("button",{className:"btn btn-outline-danger dropdown-toggle",id:`${$[t]}-pick-button`,onClick:e=>(0,r.gR)(`${$[t]}-pick-dropdown`,e,m)},0!=v[t]&&o.createElement("span",null,v[t].first," ",v[t].last),0==v[t]&&o.createElement("span",null,$[t]," Pick")),o.createElement("ul",{className:"dropdown-menu",id:`${$[t]}-pick-dropdown`,style:{overflowY:"scroll",maxHeight:"15rem"}},d.map((e=>o.createElement("li",{key:`competitor-${e.competitor_points.competitor.id}`},o.createElement("a",{className:"dropdown-item",onClick:()=>{j(t,e.competitor_points.competitor)}},e.competitor_points.competitor.first," ",e.competitor_points.competitor.last))))))))):o.createElement("div",{className:"col d-flex justify-content-center",key:`${$[t]}-pick-dropdown-div`},o.createElement("div",{className:"card text-center mb-2"},o.createElement("div",{className:"card-header"},o.createElement("h5",{className:"card-title text-muted"},$[t]," Pick")),o.createElement("div",{className:"card-body",style:{padding:"8px"}},o.createElement("div",{className:"dropdown p-2"},o.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle",id:`${$[t]}-pick-button`,onClick:e=>(0,r.gR)(`${$[t]}-pick-dropdown`,e,m)},0!=v[t]&&o.createElement("span",null,v[t].first," ",v[t].last),0==v[t]&&o.createElement("span",null,$[t]," Pick")),o.createElement("ul",{className:"dropdown-menu",id:`${$[t]}-pick-dropdown`,style:{overflowY:"scroll",maxHeight:"15rem"}},d.map((e=>o.createElement("li",{key:`competitor-${e.competitor_points.competitor.id}`},o.createElement("a",{className:"dropdown-item",onClick:()=>{j(t,e.competitor_points.competitor)}},o.createElement("small",null,"#",e.competitor_points.competitor.number)," ",e.competitor_points.competitor.first," ",e.competitor_points.competitor.last))))))))))),s.top_independent&&o.createElement("div",{className:"col d-flex justify-content-center",key:"independent-pick-dropdown-div"},o.createElement("div",{className:"card text-center mb-2"},o.createElement("div",{className:"card-header"},o.createElement("h5",{className:"card-title text-muted"},"Independent Pick")),o.createElement("div",{className:"card-body",style:{padding:"8px"}},o.createElement("div",{className:"dropdown p-2"},1==h&&o.createElement("button",{className:"btn btn-outline-danger dropdown-toggle",id:"independent-pick-button",onClick:e=>(0,r.gR)("independent-pick-dropdown",e,m)},0!=w&&o.createElement("span",null,w.first," ",w.last),0==w&&o.createElement("span",null,"Independent Pick")),0==h&&o.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle",id:"independent-pick-button",onClick:e=>(0,r.gR)("independent-pick-dropdown",e,m)},0!=w&&o.createElement("span",null,w.first," ",w.last),0==w&&o.createElement("span",null,"Independent Pick")),o.createElement("ul",{className:"dropdown-menu",id:"independent-pick-dropdown",style:{overflowY:"scroll",maxHeight:"15rem"}},d.map((e=>o.createElement("li",{key:`competitor-${e.competitor_points.competitor.id}`},o.createElement("a",{className:"dropdown-item",onClick:()=>{y(e.competitor_points.competitor)}},o.createElement("small",null,"#",e.competitor_points.competitor.number)," ",e.competitor_points.competitor.first," ",e.competitor_points.competitor.last))))))))),s.top_rookie&&o.createElement("div",{className:"col d-flex justify-content-center",key:"rookie-pick-dropdown-div"},o.createElement("div",{className:"card text-center mb-2"},o.createElement("div",{className:"card-header"},o.createElement("h5",{className:"card-title text-muted"},"Rookie Pick")),o.createElement("div",{className:"card-body",style:{padding:"8px"}},o.createElement("div",{className:"dropdown p-2"},1==S&&o.createElement("button",{className:"btn btn-outline-danger dropdown-toggle",id:"rookie-pick-button",onClick:e=>(0,r.gR)("rookie-pick-dropdown",e,m)},0!=x&&o.createElement("span",null,x.first," ",x.last),0==x&&o.createElement("span",null,"Rookie Pick")),0==S&&o.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle",id:"rookie-pick-button",onClick:e=>(0,r.gR)("rookie-pick-dropdown",e,m)},0!=x&&o.createElement("span",null,x.first," ",x.last),0==x&&o.createElement("span",null,"Rookie Pick")),o.createElement("ul",{className:"dropdown-menu",id:"rookie-pick-dropdown",style:{overflowY:"scroll",maxHeight:"15rem"}},d.map((e=>o.createElement("li",{key:`competitor-${e.competitor_points.competitor.id}`},o.createElement("a",{className:"dropdown-item",onClick:()=>{P(e.competitor_points.competitor)}},o.createElement("small",null,"#",e.competitor_points.competitor.number)," ",e.competitor_points.competitor.first," ",e.competitor_points.competitor.last)))))))))),o.createElement("div",{className:"card-footer d-flex justify-content-center"},o.createElement("button",{className:"btn btn-primary",onClick:()=>async function(){l("Loading...");let o=v.map((e=>e.id));const i=await(0,a.Et)(o,w.id,x.id);if(b([0,0,0,0,0]),C(!1),_(!1),l(!1),i.error)return e("There has been an error submiting the picks."),void console.log(i.error);if(201!==i.status){if(400===i.status){if(i.picksAlreadySelected)return void e("Another user already has the same picks and order.");if(i.invalidPicks){for(let t=0;t<i.invalidPicks.length;t++)!0===i.invalidPicks[t]&&e("Highlighted picks are invalid");!function(e){b((()=>[...e]))}(i.invalidPicks)}i.invalidIndependent&&(_(!0),t("Selected independent rider is not an independent rider")),i.invalidRookie&&(C(!0),t("Selected rookie is not rookie"))}}else n("The picks have been successfully submited.")}()},"Submit"))):o.createElement("div",null,"You can not select your picks at this moment."):o.createElement("div",null,"You need to be logged in to select your picks.")}}}]);