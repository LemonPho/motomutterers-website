/*! For license information please see src_components_AccountActivationPage_js.27dd205f3f2a17f682f0.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_components_AccountActivationPage_js"],{"./src/components/AccountActivationPage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _fetch_utils_fetchGet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetch-utils/fetchGet */ "./src/components/fetch-utils/fetchGet.js");\n/* harmony import */ var _fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fetch-utils/fetchPost */ "./src/components/fetch-utils/fetchPost.js");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var _ApplicationContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ApplicationContext */ "./src/components/ApplicationContext.js");\n\n\n\n\n\nfunction AccountActivation() {\n  const location = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useLocation)();\n  const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useNavigate)();\n  const {\n    setSuccessMessage,\n    setErrorMessage,\n    setLoadingMessage,\n    retrieveUserData\n  } = (0,_ApplicationContext__WEBPACK_IMPORTED_MODULE_3__.useApplicationContext)();\n  const [uid, setUid] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new URLSearchParams(location.search).get("uid"));\n  const [token, setToken] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new URLSearchParams(location.search).get("token"));\n  const [accountActivated, setAccountActivated] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  async function requestNewActivationToken() {\n    setLoadingMessage("Loading...");\n    const requestActivationTokenResponse = await (0,_fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_2__.requestAccountActivationToken)(uid);\n    setLoadingMessage(false);\n    if (requestActivationTokenResponse.status == 200) {\n      setSuccessMessage("New activation email sent");\n      return;\n    }\n    if (requestActivationTokenResponse.status == 404) {\n      setErrorMessage("Account was not found");\n      return;\n    }\n    if (requestActivationTokenResponse.status == 500) {\n      setErrorMessage("There was a problem sending the new email");\n      return;\n    }\n    if (requestActivationTokenResponse.status == 400) {\n      setErrorMessage("There has been an error");\n      return;\n    }\n  }\n  async function activateAccount() {\n    const activateAccountResponse = await (0,_fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_2__.submitAccountActivation)(uid, token);\n    if (activateAccountResponse.status != 200 || activateAccountResponse.error) {\n      setErrorMessage(`There was an error activating the account`);\n      setAccountActivated(false);\n      return;\n    }\n    setSuccessMessage("Account activated");\n    retrieveUserData();\n    navigate("/");\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    async function fetchData() {\n      await activateAccount();\n    }\n    fetchData();\n  }, []);\n  if (!accountActivated) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "card w-100"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "card-body"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n      className: "btn btn-link",\n      onClick: requestNewActivationToken\n    }, "Request new activation link")));\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AccountActivation);\n\n//# sourceURL=webpack://frontend/./src/components/AccountActivationPage.js?')}}]);