"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[637,763,807],{807:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(540);class s extends n.Component{constructor(e){super(e)}render(){return n.createElement("p",null,"Error page not found")}}const r=s},637:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o,useRaceResultsContext:()=>m});var n=a(540),s=a(976),r=a(767),l=a(974),c=a(946);const i=(0,n.createContext)();function o(){const{setErrorMessage:e,setSuccessMessage:t}=(0,c.Xn)(),[a,o]=(0,n.useState)(),[m,d]=(0,n.useState)(),[u,p]=(0,n.useState)(!1),[g,E]=(0,n.useState)(),[f,h]=(0,n.useState)(),[v,N]=(0,n.useState)(),[w,b]=(0,n.useState)(),[y,x]=(0,n.useState)(),[k,C]=(0,n.useState)(!1),[R,L]=(0,n.useState)(1),[S]=(0,s.ok)();return n.createElement(i.Provider,{value:{raceResults:a,raceResultsLoading:m,raceResultDetails:u,raceResultDetailsLoading:g,seasonList:w,seasonListLoading:y,selectedSeason:k,setSelectedSeason:C,raceResultComments:f,raceResultCommentsLoading:v,retrieveRaceResults:async function(){d(!0);const t=S.get("season");if(null==t)return;const a=await(0,l.aG)(t);a.error?e("There was an error loading the race results"):404!==a.status?200==a.status?(o(a.raceResults),d(!1)):e("Be sure your request is valid"):e("Be sure to select a valid season")},retrieveRaceResultDetails:async function(t){E(!0);const a=await(0,l.YY)(t);a.error?e("There was an error loading the race result"):404!==a.status?200==a.status?(p(a.race),E(!1)):e("There was an error loading the race result"):e("Race result was not found")},retrieveSeasonList:async function(){x(!0);const t=await(0,l.zV)();t.error||200!=t.status?e("There was an error loading the season list"):(b(t.seasons),x(!1))},retrieveRaceResultComments:async function(t){N(!0);const a=await(0,l.oH)(t);a.error?e("There was an error loading the race result"):404!==a.status?200==a.status?(h(a.comments),N(!1)):e("There was an error loading the race comments"):e("Race result was not found")}}},n.createElement(r.sv,null))}function m(){return(0,n.useContext)(i)}},763:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(540),s=a(767),r=a(976),l=a(637),c=a(946),i=(a(447),a(926)),o=a(622),m=a(891);function d({raceId:e}){const{user:t,userLoading:a}=(0,c.Xn)(),{raceResultDetails:s,raceResultDetailsLoading:r,retrieveRaceResultDetails:d}=(0,l.useRaceResultsContext)();return(0,n.useEffect)((()=>{!async function(){await d(e)}()}),[e]),r||!s?n.createElement("div",null,n.createElement("div",{className:"card element-background-color element-border-color mb-2 rounded-15",id:"race-result-card"},n.createElement("div",{className:"card-header loading-placeholder"},n.createElement("h5",{className:"fade-in-out"}))),n.createElement("div",{className:"card element-background-color element-border-color mb-2 rounded-15",id:"standings-card"},n.createElement("div",{className:"card-header loading-placeholder"},n.createElement("h5",{className:"fade-in-out"})))):n.createElement("div",null,n.createElement("div",{className:"card rounded-15 element-background-color element-border-color mb-2",id:"race-result-card"},n.createElement("div",{className:"card-header rounded-15 clickable",onClick:e=>{(0,i.pX)("race-positions-card-body")}},n.createElement("div",{className:"d-flex align-items-center p-1"},n.createElement("h5",{style:{margin:"0px"}},s.title,s.is_sprint&&" (Sprint)"),n.createElement("div",{className:"ms-auto"},n.createElement("div",{className:"container"},s.finalized&&n.createElement("span",{className:"badge rounded-pill text-bg-success"},"Final"),!s.finalized&&n.createElement("span",{className:"badge rounded-pill text-bg-secondary"},"Upcoming"))))),n.createElement("div",{className:"card-body custom-card-body",id:"race-positions-card-body"},n.createElement("div",{className:"row g-0 p-1",style:{marginRight:"0"}},n.createElement("strong",{className:"col-2"},"Pos"),n.createElement("strong",{className:"col-2"},"#"),n.createElement("strong",{className:"col-6"},"Name"),n.createElement("strong",{className:"col-2"},"Points")),s.finalized&&s.competitors_positions.map((e=>n.createElement("div",{className:"row g-0 p-1",key:`competitor-${e.competitor_id}`,style:{marginRight:"0px"}},0==e.position&&n.createElement("span",{className:"col-2"},"-"),0!=e.position&&n.createElement("span",{className:"col-2"},e.position),n.createElement("span",{className:"col-2"},"#",e.number),n.createElement("span",{className:"col-6"},e.first," ",e.last),n.createElement("span",{className:"col-2"},e.points)))),!s.finalized&&s.qualifying_positions.map((e=>n.createElement("div",{className:"row g-0 p-1",key:`competitor-${e.competitor_id}`,style:{marginRight:"0px"}},0==e.position&&n.createElement("span",{className:"col-2"},"-"),0!=e.position&&n.createElement("span",{className:"col-2"},e.position),n.createElement("span",{className:"col-2"},"#",e.number),n.createElement("span",{className:"col-6"},e.first," ",e.last),n.createElement("span",{className:"col-2"},"-")))))),s.finalized&&n.createElement("div",{className:"card rounded-15 element-background-color element-border-color mb-2",id:"race-standings-card"},n.createElement("div",{className:"card-header rounded-15 clickable",onClick:e=>{(0,i.pX)("race-standings-card-body")}},n.createElement("div",{className:"p-1"},n.createElement("h5",{style:{margin:"0px"}},"Standings"))),n.createElement("div",{className:"card-body custom-card-body",id:"race-standings-card-body"},s.standings.users_picks.map((e=>n.createElement("a",{className:"race-standings-row p-1 link-no-decorations rounded-15 clickable",href:`/users/${e.user.username}?page=1`,key:`user-picks-${e.user.id}`,style:{marginRight:"0px"}},e.position_change>0&&n.createElement("span",{className:"race-standings-position-change"},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"green",className:"bi bi-caret-up-fill",viewBox:"0 0 16 16"},n.createElement("path",{d:"m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"}))),0==e.position_change&&n.createElement("span",{className:"race-standings-position-change",style:{color:"grey"}}," -"),e.position_change<0&&n.createElement("span",{className:"race-standings-position-change"},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"red",class:"bi bi-caret-down-fill",viewBox:"0 0 16 16"},n.createElement("path",{d:"M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"}))),n.createElement("span",{className:"race-standings-position"},e.position),n.createElement("span",{className:"race-standings-username"},e.user.username),n.createElement("span",{className:"race-standings-points"},e.points)))))),n.createElement(m.A,{parentElement:{id:e,type:"RACE"}},n.createElement(o.A,null)))}function u({seasonYear:e}){const{retrieveRaceResults:t,retrieveRaceResultsDetails:a,retrieveSeasonList:s,raceResults:r,raceResultsLoading:c,selectedSeason:o,seasonList:m,seasonListLoading:d}=(0,l.useRaceResultsContext)();return(0,n.useEffect)((()=>{!async function(){await t(),await s()}()}),[]),n.createElement("div",null,n.createElement("div",{className:"card rounded-15 element-background-color element-border-color"},n.createElement("div",{className:"card-header d-flex align-items-center"},n.createElement("h5",null,"Race results"),n.createElement("div",{className:"dropdown ms-auto"},n.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle rounded-15",type:"button",onClick:e=>(0,i.gR)("season-selector-dropdown",e,void 0)},e),n.createElement("ul",{className:"dropdown-menu dropdown-menu-end",id:"season-selector-dropdown"},!d&&m.map((t=>n.createElement("li",{className:"ms-2",key:`${t.year}`},n.createElement("a",{className:"d-flex align-items-center",href:`/raceresults?season=${t.year}`,id:`${t.year}`},t.year,t.year==e&&n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"ms-auto me-1 bi bi-check",viewBox:"0 0 16 16"},n.createElement("path",{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"}))))))))),n.createElement("div",{className:"card-body"},!c&&null!=r&&0==r.length&&n.createElement("h5",null,"No race results have been added for this season."),!c&&null!=r&&r.map((e=>n.createElement("div",{key:`race-result-${e.id}`},n.createElement("div",{className:"p-2 clickable rounded-15"},n.createElement("a",{className:"link-no-decorations",href:`/raceresults/${e.id}`},n.createElement("div",null,n.createElement("div",{className:"d-flex align-items-center"},n.createElement("h3",{className:"p-2"},e.title,e.is_sprint&&" (Sprint)"),n.createElement("div",{className:"ms-auto"},n.createElement("div",{className:"container"},e.finalized&&n.createElement("span",{className:"badge rounded-pill text-bg-success"},"Final"),!e.finalized&&n.createElement("span",{className:"badge rounded-pill text-bg-secondary"},"Upcoming"))))))),n.createElement("hr",null)))))))}var p=a(807);function g(){const{raceId:e}=(0,s.g)(),[t]=(0,r.ok)(),{retrieveSeasonList:a,seasonList:c,seasonListLoading:i,setSelectedSeason:o,selectedSeason:m}=(0,l.useRaceResultsContext)(),g=t.get("season");return e?n.createElement(d,{raceId:e}):g?((0,n.useEffect)((()=>{!async function(){await a()}()}),[]),(0,n.useEffect)((()=>{if(!i&&null!=c)for(let e=0;e<c.length;e++)c[e].year==g&&o(c[e])}),[c]),m?n.createElement(u,{seasonYear:g}):n.createElement(p.default,null)):n.createElement(p.default,null)}},622:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(540),s=a(946),r=a(447),l=a(926),c=a(891);function i({reply:e}){const{postEditComment:t,postDeleteComment:a}=(0,c.D)(),{user:i,setErrorMessage:o}=(0,s.Xn)(),[m,d]=(0,n.useState)(""),u=(0,n.useRef)(null),p=(0,n.useRef)(null),g=(0,n.useRef)(null);function E(){u.current&&g.current&&(d(""),g.current.classList.toggle("hidden"),u.current.classList.toggle("hidden"))}return n.createElement("div",{id:`reply-${e.id}`,key:`reply-${e.id}`,className:"dynamic-container mb-2",style:{marginLeft:"0px",maxWidth:"calc(100% - 2.7rem)"}},n.createElement("div",{className:"d-flex align-items-start"},n.createElement(r.A,{width:"1.5rem",height:"1.5rem",username:e.user.username}),n.createElement("div",{className:"dynamic-container"},n.createElement("div",{className:"d-flex align-items-center"},n.createElement("a",{className:"link-no-decorations ms-2",href:`/users/${e.user.username}?page=1`},n.createElement("small",null,n.createElement("strong",null,e.user.username))),n.createElement("span",{className:"ms-2",style:{fontSize:"0.75rem"}},new Date(e.date_created).toISOString().substring(0,10)," ",new Date(e.date_created).toLocaleTimeString().substring(0,5)),e.edited&&n.createElement("small",{className:"ms-1"},"(edited)"),i.id===e.user.id&&n.createElement("div",{className:"ms-auto dropdown-div d-flex align-items-start"},n.createElement("button",{id:"reply-dropdown-button",className:"btn btn-link link-no-decorations ms-auto",style:{padding:"0"},onClick:t=>(0,l.gR)(`reply-${e.id}-dropdown`,t)},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16"},n.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}))),n.createElement("div",{id:`reply-${e.id}-dropdown`,className:"dropdown-menu"},n.createElement("li",null,n.createElement("button",{className:"dropdown-item",onClick:()=>E()},"Edit")),n.createElement("li",null,n.createElement("a",{className:"dropdown-item",onClick:()=>async function(){await a(e.id)}()},"Delete"))))),n.createElement("div",{className:"break-line-text my-1"},n.createElement("span",{ref:g,id:`reply-${e.id}-text`,className:""},e.text),n.createElement("div",{ref:u,className:"hidden"},n.createElement("textarea",{ref:p,rows:1,id:`edit-reply-${e.id}-text`,className:"textarea-expand input-field w-100",defaultValue:e.text,onChange:e=>(0,l.QL)(e.target),onKeyUp:e=>d(e.target.value)}),n.createElement("div",{className:"d-flex mt-2"},n.createElement("button",{id:`reply-${e.id}-save-button`,className:"btn btn-primary ms-auto me-2",onClick:()=>async function(){""!=m&&await t(m,e.id)&&(g.current.innerHTML=m,d(""),p.value="",E())}()},"Save"),n.createElement("button",{id:`reply-${e.id}-cancel-button`,className:"btn btn-outline-secondary",onClick:()=>E()},"Cancel")))))))}function o({comment:e}){const{user:t,setErrorMessage:a}=(0,s.Xn)(),{postDeleteComment:o,postComment:m,postEditComment:d}=(0,c.D)(),[u,p]=(0,n.useState)(""),g=(0,n.useRef)(null),E=(0,n.useRef)(null),f=(0,n.useRef)(null),[h,v]=(0,n.useState)(""),N=(0,n.useRef)(null),w=(0,n.useRef)(null),b=(0,n.useRef)(null);function y(){N.current&&(v(""),b.current.classList.toggle("hidden"),N.current.classList.toggle("hidden"))}function x(){E.current&&(p(""),E.current.classList.toggle("hidden"))}return 173==e.id&&console.log(e),n.createElement("div",{id:`comment-${e.id}`,key:`comment-${e.id}`},n.createElement("div",{className:"d-flex align-items-start"},n.createElement(r.A,{width:"2.5rem",height:"2.5rem",username:e.user.username}),n.createElement("div",{className:"dynamic-container ms-2",style:{maxWidth:"calc(100% - 48px)"}},n.createElement("div",{className:"d-flex align-items-center"},n.createElement("a",{className:"link-no-decorations",href:`/users/${e.user.username}?page=1`},n.createElement("strong",null,e.user.username)),n.createElement("span",{className:"flex-item ms-2",style:{fontSize:"0.75rem"}},new Date(e.date_created).toISOString().substring(0,10)," ",new Date(e.date_created).toLocaleTimeString().substring(0,5)),e.edited&&n.createElement("small",{className:"ms-1"},"(edited)"),(t.id===e.user.id||1==t.is_admin)&&n.createElement("div",{className:"ms-auto dropdown-div d-flex align-items-start"},n.createElement("button",{id:"announcement-dropdown-button",className:"btn btn-link link-no-decorations ms-auto",style:{padding:"0"},onClick:t=>(0,l.gR)(`comment-${e.id}-dropdown`,t)},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16"},n.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}))),n.createElement("div",{id:`comment-${e.id}-dropdown`,className:"dropdown-menu"},n.createElement("li",null,n.createElement("button",{className:"dropdown-item",onClick:()=>y(e.id)},"Edit")),n.createElement("li",null,n.createElement("a",{className:"dropdown-item",onClick:()=>async function(e){await o(e)}(e.id)},"Delete"))))),n.createElement("div",{className:"break-line-text"},n.createElement("span",{ref:b,id:`comment-${e.id}-text`,style:{overflow:"visible"},className:""},e.text),n.createElement("div",{ref:N,className:"hidden"},n.createElement("textarea",{ref:w,id:`edit-comment-${e.id}-text`,className:"textarea-expand input-field w-100",rows:1,defaultValue:e.text,onKeyUp:e=>v(e.target.value),onChange:e=>{(0,l.QL)(e.target)}}),n.createElement("div",{className:"d-flex"},n.createElement("button",{id:`comment-${e.id}-save-button`,className:"btn btn-primary ms-auto me-2 mt-2",onClick:()=>async function(){""!=h&&await d(h,e.id)&&(b.current.innerHTML=h,v(""),w.current.value="",y())}(e.id)},"Save"),n.createElement("button",{id:`comment-${e.id}-cancel-button`,className:"btn btn-outline-secondary mt-2",onClick:()=>y(e.id)},"Cancel")))),n.createElement("div",{className:"d-flex mb-3"},parseInt(e.amount_replies)>0&&n.createElement("button",{className:"btn btn-link link-no-decorations p-0 pe-1",style:{color:"blue"},onClick:()=>{f.current&&f.current.classList.toggle("hidden")}},n.createElement("small",null,"Show ",e.amount_replies," replies")),!0===t.is_logged_in?n.createElement("button",{className:"btn btn-link link-no-decorations p-0",onClick:()=>x(e.id)},n.createElement("small",null,"Reply")):n.createElement("div",{className:"my-2"})))),n.createElement("div",{ref:E,id:`comment-reply-div-${e.id}`,className:"hidden",style:{marginBottom:"0.5rem",marginLeft:"3.4rem"}},n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("textarea",{ref:g,id:`comment-reply-text-${e.id}`,role:"textbox",className:"input-field textarea-expand w-100",placeholder:"Add a reply...",rows:1,onClick:()=>(0,l.Gd)(`comment-reply-text-${e.id}`),onChange:e=>{(0,l.QL)(e.target)},onKeyUp:e=>p(e.target.value)}),n.createElement("button",{id:`comment-reply-button-${e.id}`,className:"btn btn-outline-secondary p-1 ms-2",onClick:()=>{!async function(){""!=u&&await m(u,e.id)&&(p(""),g.current.value="",x())}()}},n.createElement("small",null,"Reply")))),n.createElement("div",{ref:f,id:`comment-replies-${e.id}`,className:"dynamic-container hidden mb-3",style:{marginLeft:"2.7rem"}},e.replies.length>0&&e.replies.map((e=>n.createElement(i,{key:e.id,reply:e})))))}function m(){const{user:e,userLoading:t}=(0,s.Xn)(),{postComment:a}=(0,c.D)(),[i,o]=(0,n.useState)(""),m=(0,n.useRef)(null);if(!t)return e.is_logged_in?n.createElement("div",{className:"flex-box align-items-center"},n.createElement(r.A,{width:"3rem",height:"3rem",username:e.username}),n.createElement("textarea",{ref:m,id:"comment-text",className:"input-field textarea-expand ms-2 w-100",rows:1,placeholder:"Write a comment...",onChange:e=>{(0,l.QL)(e.target)},onKeyUp:e=>o(e.target.value)}),n.createElement("button",{className:"btn btn-outline-secondary ms-2",onClick:async function(){await a(i,null)&&(m.value="",o(""))}},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-send",viewBox:"0 0 16 16"},n.createElement("path",{d:"M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"})))):n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("span",null,"Login in to write a comment"))}function d(){const{setErrorMessage:e}=(0,s.Xn)(),{comments:t,commentsLoading:a,retrieveComments:r,parentElement:l}=(0,c.D)();return(0,n.useEffect)((()=>{!async function(){await r()}()}),[]),a?n.createElement("div",null,"Loading..."):n.createElement("div",{className:"card rounded-15 mt-2 element-background-color element-border-color",id:"comments-card"},n.createElement("div",{className:"card-header"},n.createElement("h5",null,"Comments")),n.createElement("div",{className:"card-body"},n.createElement(m,null),n.createElement("hr",null),t.map((e=>n.createElement(o,{key:e.id,comment:e})))))}},891:(e,t,a)=>{a.d(t,{A:()=>i,D:()=>o});var n=a(540),s=a(974),r=a(946),l=a(398);const c=(0,n.createContext)();function i({parentElement:e,children:t}){const{setErrorMessage:a}=(0,r.Xn)(),[i,o]=(0,n.useState)([]),[m,d]=(0,n.useState)();async function u(){d(!0);const t=await(0,s.vr)(e);return t.error||200!=t.status?(a("There was an error getting the comments"),!1):(o(t.comments),d(!1),!0)}return n.createElement(c.Provider,{value:{comments:i,commentsLoading:m,retrieveComments:u,postComment:async function(t,n){const s=await(0,l.cC)(t,e,n);return s.error||201!=s.status?(a("There was an error posting the comment"),!1):(await u(),!0)},postEditComment:async function(e,t){const n=await(0,l.Q6)(e,t);return!n.error&&201==n.status||(a("There was an error posting the comment"),!1)},postDeleteComment:async function(e){const t=await(0,l.tR)(e);return t.error||201!=t.status?(a("There was an error deleting the comment"),!1):(await u(),!0)},parentElement:e}},t)}function o(){return(0,n.useContext)(c)}}}]);