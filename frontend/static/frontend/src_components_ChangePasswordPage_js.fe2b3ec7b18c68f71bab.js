/*! For license information please see src_components_ChangePasswordPage_js.fe2b3ec7b18c68f71bab.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_components_ChangePasswordPage_js"],{"./src/components/ChangePasswordPage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ ChangePassword)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var _fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetch-utils/fetchPost */ "./src/components/fetch-utils/fetchPost.js");\n/* harmony import */ var _ApplicationContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ApplicationContext */ "./src/components/ApplicationContext.js");\n\n\n\n\nfunction ChangePassword() {\n  const [errorOccured, setErrorOccured] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [tokenValid, setTokenValid] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [passwordChanged, setPasswordChanged] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [passwordValid, setPasswordValid] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [passwordsMatch, setPasswordsMatch] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [changePasswordLoading, setChangePasswordLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const {\n    setErrorMessage,\n    setSuccessMessage\n  } = (0,_ApplicationContext__WEBPACK_IMPORTED_MODULE_2__.useApplicationContext)();\n  const location = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_3__.useLocation)();\n  async function changePassword() {\n    setChangePasswordLoading(true);\n    const params = new URLSearchParams(location.search);\n    const uid = params.get("uid");\n    const token = params.get("token");\n    const password1 = document.getElementById("password1").value;\n    const password2 = document.getElementById("password2").value;\n    const changePasswordResponse = await (0,_fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_1__.submitNewPassword)(password1, password2, uid, token);\n    if (changePasswordResponse.error) {\n      setErrorMessage("There was an error when submiting the new password");\n      setChangePasswordLoading(false);\n      return;\n    }\n    if (changePasswordResponse.status === 400) {\n      let message = changePasswordResponse.passwordsMatch ? "" : "Passwords don\'t match\\n";\n      message += changePasswordResponse.passwordValid ? "" : "Password is not valid, it needs to be at least 8 characters and not \'simple\'\\n";\n      message += changePasswordResponse.tokenValid ? "" : "The URL used is no longer valid, please restart the process\\n";\n      setErrorMessage(message);\n      setChangePasswordLoading(false);\n      return;\n    }\n    if (changePasswordResponse.status === 200) {\n      setSuccessMessage("Password successfully changed, you may login now");\n      setChangePasswordLoading(false);\n      return;\n    }\n    setChangePasswordLoading(false);\n    setErrorMessage("There was a server error when submiting the new password");\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, changePasswordLoading && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "alert alert-secondary m-1"\n  }, "Loading..."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "card shadow mx-auto my-5 rounded-15",\n    style: {\n      width: "21rem"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "my-3",\n    style: {\n      display: "flex"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("h6", {\n    style: {\n      margin: "auto",\n      fontSize: "40px"\n    }\n  }, "New Password")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("hr", {\n    className: "mt-2"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "input-group px-3 mx-auto"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n    type: "password",\n    className: "form-control",\n    placeholder: "New password",\n    id: "password1"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "input-group mt-3 px-3 mx-auto"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n    type: "password",\n    className: "form-control",\n    placeholder: "Confirm password",\n    id: "password2"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "input-group mt-3 mb-3 px-3 mx-auto"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    className: "btn btn-primary btn-block",\n    onClick: changePassword\n  }, "Change"))));\n}\n\n//# sourceURL=webpack://frontend/./src/components/ChangePasswordPage.js?')}}]);