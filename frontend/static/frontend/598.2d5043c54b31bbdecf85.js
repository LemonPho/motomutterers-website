"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[98,598,807],{807:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var a=n(540);class r extends a.Component{constructor(e){super(e)}render(){return a.createElement("p",null,"Error page not found")}}const l=r},598:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(540),r=n(98),l=n(807),s=n(946),c=n(926),m=n(447);function o(){const{user:e,contextLoading:t}=(0,s.Xn)(),{announcement:n,editAnnouncement:l,retrieveAnnouncement:o,deleteAnnouncement:i}=(0,r.useAnnouncementContext)(),[d,u]=(0,a.useState)(!1);function E(){const e=document.getElementById("announcement-title"),t=document.getElementById("announcement-text"),n=document.getElementById("save-edit-announcement"),a=document.getElementById("cancel-edit-announcement");e.contentEditable="false"===e.contentEditable,t.contentEditable="false"===t.contentEditable,t.classList.toggle("input-field"),e.classList.toggle("input-field"),n.classList.toggle("hidden"),a.classList.toggle("hidden")}return t?null:a.createElement("div",null,d&&a.createElement("div",{className:"alert alert-secondary"},"Loading..."),a.createElement("div",{className:"card rounded-15 element-background-color element-border-color",id:"announcement-card"},a.createElement("div",{className:"card-header d-flex align-items-center p-3"},a.createElement("h3",{id:"announcement-title",className:"",contentEditable:!1},n.title),a.createElement("span",{className:"ms-2 me-2"},"â€¢"),a.createElement("a",{href:`/users/${n.user.username}?page=1`,className:"link-no-decorations"},a.createElement(m.A,{width:"2.75rem",height:"2.75rem",username:n.user.username}),a.createElement("span",{className:"ms-2"},a.createElement("strong",null,n.user.username))),e.is_admin&&a.createElement("div",{className:"ms-auto dropdown-div"},a.createElement("button",{id:"announcement-dropdown-button",className:"btn btn-link link-no-decorations ms-auto",onClick:e=>(0,c.gR)("dropdown-announcement",e)},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16"},a.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}))),a.createElement("div",{id:"dropdown-announcement",className:"dropdown-menu"},a.createElement("li",null,a.createElement("button",{className:"dropdown-item",onClick:E},"Edit")),a.createElement("li",null,a.createElement("a",{className:"dropdown-item",onClick:function(){u(!0),i(n.id),u(!1)}},"Delete"))))),a.createElement("div",{className:"break-line-text card-body"},a.createElement("div",{id:"announcement-text",className:"",contentEditable:!1},n.text)),a.createElement("div",{className:"d-flex mt-1"},a.createElement("button",{id:"save-edit-announcement",className:"btn btn-primary hidden m-2 rounded-15",onClick:function(){u(!0);const e=document.getElementById("announcement-title").innerHTML,t=document.getElementById("announcement-text").innerHTML;l(e,t,n.id),u(!1)}},"Save"),a.createElement("button",{id:"cancel-edit-announcement",className:"me-auto btn btn-secondary hidden m-2 rounded-15",onClick:function(){E(),o();const e=document.getElementById("announcement-title"),t=document.getElementById("announcement-text");e.innerHTML=n.title,t.innerHTML=n.text}},"Cancel"))))}var i=n(891),d=n(622);function u(){const{announcement:e,announcementLoading:t,retrieveAnnouncement:n}=(0,r.useAnnouncementContext)();return(0,a.useEffect)((()=>{n()}),[]),t?null:e?a.createElement("div",{id:"announcement-view",className:"my-3"},a.createElement(o,null),a.createElement(i.A,{parentElement:{id:e.id,type:"ANNOUNCEMENT"}},a.createElement(d.A,null))):a.createElement(l.default,null)}},98:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o,useAnnouncementContext:()=>i});var a=n(540),r=n(946),l=n(974),s=n(767),c=n(398);const m=(0,a.createContext)();function o(){const{setErrorMessage:e,setSuccessMessage:t,resetApplicationMessages:n}=(0,r.Xn)(),{announcementId:o}=(0,s.g)(),[i,d]=(0,a.useState)({}),[u,E]=(0,a.useState)(!0);return a.createElement(m.Provider,{value:{announcement:i,retrieveAnnouncement:async function(){if(E(!0),null===o)return void d(!1);const t=await(0,l.c$)(o);return 404==t.status?(d(!1),void E(!1)):t.error||200!=t.status?(console.log(t.error),e("There was an error loading the announcement"),void E(!1)):(d(t.announcement),void E(!1))},editAnnouncement:async function(n,a,r){const l=await(0,c.Q8)(n,a,r);if(l.error)return console.log(l.error),void e("There was an error saving the changes");400!==l.status?200!==l.status?e("There was an error saving the changes"):t("Announcement changes saved"):e("Be sure the title has a limit of 128 characters and the text 2048")},deleteAnnouncement:async function(n){const a=await(0,c.bt)(n);if(a.error||200!=a.status)return console.log(a.error),void e("There was an error deleting the announcement");t("Announcement successfully deleted")},announcementLoading:u,resetAnnouncementsMessages:function(){setCommentsErrorMessage(!1)}}},a.createElement(s.sv,null))}function i(){return(0,a.useContext)(m)}},622:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(540),r=n(946),l=n(447),s=n(926),c=n(891);function m({reply:e}){const{postEditComment:t,postDeleteComment:n}=(0,c.D)(),{user:m,setErrorMessage:o}=(0,r.Xn)(),[i,d]=(0,a.useState)(""),u=(0,a.useRef)(null),E=(0,a.useRef)(null),g=(0,a.useRef)(null);function p(){u.current&&g.current&&(d(""),g.current.classList.toggle("hidden"),u.current.classList.toggle("hidden"))}return a.createElement("div",{id:`reply-${e.id}`,key:`reply-${e.id}`,className:"dynamic-container mb-2",style:{marginLeft:"0px",maxWidth:"calc(100% - 2.7rem)"}},a.createElement("div",{className:"d-flex align-items-start"},a.createElement(l.A,{width:"1.5rem",height:"1.5rem",username:e.user.username}),a.createElement("div",{className:"dynamic-container"},a.createElement("div",{className:"d-flex align-items-center"},a.createElement("a",{className:"link-no-decorations ms-2",href:`/users/${e.user.username}?page=1`},a.createElement("small",null,a.createElement("strong",null,e.user.username))),a.createElement("span",{className:"ms-2",style:{fontSize:"0.75rem"}},new Date(e.date_created).toISOString().substring(0,10)," ",new Date(e.date_created).toLocaleTimeString().substring(0,5)),e.edited&&a.createElement("small",{className:"ms-1"},"(edited)"),m.id===e.user.id&&a.createElement("div",{className:"ms-auto dropdown-div d-flex align-items-start"},a.createElement("button",{id:"reply-dropdown-button",className:"btn btn-link link-no-decorations ms-auto",style:{padding:"0"},onClick:t=>(0,s.gR)(`reply-${e.id}-dropdown`,t)},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16"},a.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}))),a.createElement("div",{id:`reply-${e.id}-dropdown`,className:"dropdown-menu"},a.createElement("li",null,a.createElement("button",{className:"dropdown-item",onClick:()=>p()},"Edit")),a.createElement("li",null,a.createElement("a",{className:"dropdown-item",onClick:()=>async function(){await n(e.id)}()},"Delete"))))),a.createElement("div",{className:"break-line-text my-1"},a.createElement("span",{ref:g,id:`reply-${e.id}-text`,className:""},e.text),a.createElement("div",{ref:u,className:"hidden"},a.createElement("textarea",{ref:E,rows:1,id:`edit-reply-${e.id}-text`,className:"textarea-expand input-field w-100",defaultValue:e.text,onChange:e=>(0,s.QL)(e.target),onKeyUp:e=>d(e.target.value)}),a.createElement("div",{className:"d-flex mt-2"},a.createElement("button",{id:`reply-${e.id}-save-button`,className:"btn btn-primary ms-auto me-2",onClick:()=>async function(){""!=i&&await t(i,e.id)&&(g.current.innerHTML=i,d(""),E.value="",p())}()},"Save"),a.createElement("button",{id:`reply-${e.id}-cancel-button`,className:"btn btn-outline-secondary",onClick:()=>p()},"Cancel")))))))}function o({comment:e}){const{user:t,setErrorMessage:n}=(0,r.Xn)(),{postDeleteComment:o,postComment:i,postEditComment:d}=(0,c.D)(),[u,E]=(0,a.useState)(""),g=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),[v,h]=(0,a.useState)(""),w=(0,a.useRef)(null),b=(0,a.useRef)(null),y=(0,a.useRef)(null);function N(){w.current&&(h(""),y.current.classList.toggle("hidden"),w.current.classList.toggle("hidden"))}function x(){p.current&&(E(""),p.current.classList.toggle("hidden"))}return 173==e.id&&console.log(e),a.createElement("div",{id:`comment-${e.id}`,key:`comment-${e.id}`},a.createElement("div",{className:"d-flex align-items-start"},a.createElement(l.A,{width:"2.5rem",height:"2.5rem",username:e.user.username}),a.createElement("div",{className:"dynamic-container ms-2",style:{maxWidth:"calc(100% - 48px)"}},a.createElement("div",{className:"d-flex align-items-center"},a.createElement("a",{className:"link-no-decorations",href:`/users/${e.user.username}?page=1`},a.createElement("strong",null,e.user.username)),a.createElement("span",{className:"flex-item ms-2",style:{fontSize:"0.75rem"}},new Date(e.date_created).toISOString().substring(0,10)," ",new Date(e.date_created).toLocaleTimeString().substring(0,5)),e.edited&&a.createElement("small",{className:"ms-1"},"(edited)"),(t.id===e.user.id||1==t.is_admin)&&a.createElement("div",{className:"ms-auto dropdown-div d-flex align-items-start"},a.createElement("button",{id:"announcement-dropdown-button",className:"btn btn-link link-no-decorations ms-auto",style:{padding:"0"},onClick:t=>(0,s.gR)(`comment-${e.id}-dropdown`,t)},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16"},a.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}))),a.createElement("div",{id:`comment-${e.id}-dropdown`,className:"dropdown-menu"},a.createElement("li",null,a.createElement("button",{className:"dropdown-item",onClick:()=>N(e.id)},"Edit")),a.createElement("li",null,a.createElement("a",{className:"dropdown-item",onClick:()=>async function(e){await o(e)}(e.id)},"Delete"))))),a.createElement("div",{className:"break-line-text"},a.createElement("span",{ref:y,id:`comment-${e.id}-text`,style:{overflow:"visible"},className:""},e.text),a.createElement("div",{ref:w,className:"hidden"},a.createElement("textarea",{ref:b,id:`edit-comment-${e.id}-text`,className:"textarea-expand input-field w-100",rows:1,defaultValue:e.text,onKeyUp:e=>h(e.target.value),onChange:e=>{(0,s.QL)(e.target)}}),a.createElement("div",{className:"d-flex"},a.createElement("button",{id:`comment-${e.id}-save-button`,className:"btn btn-primary ms-auto me-2 mt-2",onClick:()=>async function(){""!=v&&await d(v,e.id)&&(y.current.innerHTML=v,h(""),b.current.value="",N())}(e.id)},"Save"),a.createElement("button",{id:`comment-${e.id}-cancel-button`,className:"btn btn-outline-secondary mt-2",onClick:()=>N(e.id)},"Cancel")))),a.createElement("div",{className:"d-flex mb-3"},parseInt(e.amount_replies)>0&&a.createElement("button",{className:"btn btn-link link-no-decorations p-0 pe-1",style:{color:"blue"},onClick:()=>{f.current&&f.current.classList.toggle("hidden")}},a.createElement("small",null,"Show ",e.amount_replies," replies")),!0===t.is_logged_in?a.createElement("button",{className:"btn btn-link link-no-decorations p-0",onClick:()=>x(e.id)},a.createElement("small",null,"Reply")):a.createElement("div",{className:"my-2"})))),a.createElement("div",{ref:p,id:`comment-reply-div-${e.id}`,className:"hidden",style:{marginBottom:"0.5rem",marginLeft:"3.4rem"}},a.createElement("div",{className:"d-flex justify-content-center"},a.createElement("textarea",{ref:g,id:`comment-reply-text-${e.id}`,role:"textbox",className:"input-field textarea-expand w-100",placeholder:"Add a reply...",rows:1,onClick:()=>(0,s.Gd)(`comment-reply-text-${e.id}`),onChange:e=>{(0,s.QL)(e.target)},onKeyUp:e=>E(e.target.value)}),a.createElement("button",{id:`comment-reply-button-${e.id}`,className:"btn btn-outline-secondary p-1 ms-2",onClick:()=>{!async function(){""!=u&&await i(u,e.id)&&(E(""),g.current.value="",x())}()}},a.createElement("small",null,"Reply")))),a.createElement("div",{ref:f,id:`comment-replies-${e.id}`,className:"dynamic-container hidden mb-3",style:{marginLeft:"2.7rem"}},e.replies.length>0&&e.replies.map((e=>a.createElement(m,{key:e.id,reply:e})))))}function i(){const{user:e,userLoading:t}=(0,r.Xn)(),{postComment:n}=(0,c.D)(),[m,o]=(0,a.useState)(""),i=(0,a.useRef)(null);if(!t)return e.is_logged_in?a.createElement("div",{className:"flex-box align-items-center"},a.createElement(l.A,{width:"3rem",height:"3rem",username:e.username}),a.createElement("textarea",{ref:i,id:"comment-text",className:"input-field textarea-expand ms-2 w-100",rows:1,placeholder:"Write a comment...",onChange:e=>{(0,s.QL)(e.target)},onKeyUp:e=>o(e.target.value)}),a.createElement("button",{className:"btn btn-outline-secondary ms-2",onClick:async function(){await n(m,null)&&(i.value="",o(""))}},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-send",viewBox:"0 0 16 16"},a.createElement("path",{d:"M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"})))):a.createElement("div",{className:"d-flex justify-content-center"},a.createElement("span",null,"Login in to write a comment"))}function d(){const{setErrorMessage:e}=(0,r.Xn)(),{comments:t,commentsLoading:n,retrieveComments:l,parentElement:s}=(0,c.D)();return(0,a.useEffect)((()=>{!async function(){await l()}()}),[]),n?a.createElement("div",null,"Loading..."):a.createElement("div",{className:"card rounded-15 mt-2 element-background-color element-border-color",id:"comments-card"},a.createElement("div",{className:"card-header"},a.createElement("h5",null,"Comments")),a.createElement("div",{className:"card-body"},a.createElement(i,null),a.createElement("hr",null),t.map((e=>a.createElement(o,{key:e.id,comment:e})))))}},891:(e,t,n)=>{n.d(t,{A:()=>m,D:()=>o});var a=n(540),r=n(974),l=n(946),s=n(398);const c=(0,a.createContext)();function m({parentElement:e,children:t}){const{setErrorMessage:n}=(0,l.Xn)(),[m,o]=(0,a.useState)([]),[i,d]=(0,a.useState)();async function u(){d(!0);const t=await(0,r.vr)(e);return t.error||200!=t.status?(n("There was an error getting the comments"),!1):(o(t.comments),d(!1),!0)}return a.createElement(c.Provider,{value:{comments:m,commentsLoading:i,retrieveComments:u,postComment:async function(t,a){const r=await(0,s.cC)(t,e,a);return r.error||201!=r.status?(n("There was an error posting the comment"),!1):(await u(),!0)},postEditComment:async function(e,t){const a=await(0,s.Q6)(e,t);return!a.error&&201==a.status||(n("There was an error posting the comment"),!1)},postDeleteComment:async function(e){const t=await(0,s.tR)(e);return t.error||201!=t.status?(n("There was an error deleting the comment"),!1):(await u(),!0)},parentElement:e}},t)}function o(){return(0,a.useContext)(c)}}}]);