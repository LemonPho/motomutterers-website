"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[192,330,446,807],{807:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(540);class r extends n.Component{constructor(e){super(e)}render(){return n.createElement("p",null,"Error page not found")}}const o=r},192:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l,useSeasonCreateContext:()=>i});var n=a(540),r=a(767),o=a(974),s=a(946);const c=(0,n.createContext)();function l(){const{setErrorMessage:e}=(0,s.Xn)(),[t,a]=(0,n.useState)(!1),[l,i]=(0,n.useState)([]);return n.createElement(c.Provider,{value:{seasons:l,seasonsLoading:t,retrieveSeasons:async function(){let t=await(0,o.a)();if(t.error)return console.log(t.error),void e("There was an error loading the seasons");i(t.seasons),a(!1)}}},n.createElement(r.sv,null))}function i(){return(0,n.useContext)(c)}},446:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i,useSeasonContext:()=>m});var n=a(540),r=a(974),o=a(767),s=a(398),c=a(946);a(192);const l=(0,n.createContext)();function i(){const{setErrorMessage:e,setSuccessMessage:t,setLoadingMessage:a,resetApplicationMessages:i}=(0,c.Xn)(),m=(0,o.g)().seasonYear,[d,u]=(0,n.useState)(null),[p,E]=(0,n.useState)(!1);async function g(){const t=await(0,r.oK)(m);let a={};return 404===t.status?(u(!1),E(!1),void e("Season not found")):t.error||200!=t.status?(e("There was an error loading the season"),E(!1),void console.log(t.error)):(a=t.season,a.competitorsSortedNumber=t.competitorsSortedNumber,u(a),void E(!1))}return n.createElement(l.Provider,{value:{season:d,seasonLoading:p,retrieveSeason:g,deleteSeason:async function(){const a=await(0,s.Hs)(d.id);200!=a.status||a.error?e("There was an error deleting the season"):(t("Season deleted"),u(null))},createSeasonRace:async function(a){i();const n=await(0,s.Ir)(a);return n.error||200!=n.status?(e("There was an error creating the race"),console.log(n.error),!1):(t("Race created"),g(),!0)},addSeasonRaceResults:async function(a){i();const n=await(0,s.yN)(a);return n.error?(e("There was an error adding the results"),console.log(n.error),!1):200!=n.status?(e("Be sure that the information inputted is correct"),!1):(t("Race result saved"),g(),!0)},editSeasonRace:async function(a){i();let n=await(0,s._O)(a);return n.error?(e("There was an error editing the race"),console.log(n.error),!1):200!=n.status?(e("Be sure the information is valid"),!1):(t("Changes saved"),g(),!0)},deleteSeasonRace:async function(n){i(),a("Loading...");let r=await(0,s.DK)(n,m);if(r.error||200!=r.status)return console.log(r.error),e("There was an error deleting the race"),void e("There was an error deleting the race");a(!1),t("Race deleted"),g()},createSeasonCompetitor:async function(a){i();const n=await(0,s.To)(a);return n.error?(e("There was an error submiting the competitor"),console.log(n.error),!1):n.riderExists?(e("A rider with that number already exists"),!1):n.seasonNotFound?(e("The season was not found of which you want to add the competitor"),!1):201!=n.status?(e("Make sure the information is correct and valid"),!1):(t("Rider created"),g(),!0)},editSeasonCompetitor:async function(a){i();const n=await(0,s.qZ)(a);return n.error?(console.log(n.error),e("There was an error editing the rider"),!1):200!=n.status?(e("Make sure the information is valid"),!1):(t("Changes saved"),g(),!0)},deleteSeasonCompetitor:async function(a,n){i();const r=await(0,s.Se)(a,n);return r.error||200!=r.status?(e("There was an error deleting the rider"),console.log(r.error),!1):(t("Rider deleted"),g(),!0)}}},n.createElement(o.sv,null))}function m(){return(0,n.useContext)(l)}},330:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var n=a(540),r=a(446),o=(a(807),a(974)),s=a(926),c=a(946);function l(){const{createSeasonCompetitor:e,season:t}=(0,r.useSeasonContext)(),{setModalErrorMessage:a,modalErrorMessage:o,resetApplicationMessages:l}=(0,c.Xn)(),[i,m]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[p,E]=(0,n.useState)(!1),[g,h]=(0,n.useState)(!1),[f,v]=(0,n.useState)(1),[b,N]=(0,n.useState)(0);function y(e){const t=e.currentTarget.id;"competitor-edit-number"==t||"competitor-create-number"==t?v(e.currentTarget.value):"competitor-edit-points"==t||"competitor-create-points"==t?N(e.currentTarget.value):"competitor-edit-independent"==t||"competitor-create-independent"==t?E(e.currentTarget.checked):"competitor-edit-first"==t||"competitor-create-first"==t?m(e.currentTarget.innerHTML):"competitor-edit-last"==t||"competitor-create-last"==t?u(e.currentTarget.innerHTML):"competitor-edit-rookie"!=t&&"competitor-create-rookie"!=t||h(e.currentTarget.checked)}async function k(){l();let a={first:null,last:null,number:null},n={competitor:a,points:null},r={competitor_points:n,independent:null,rookie:null,season:t.year};a.first=i,a.last=d,a.number=f,n.points=b,n.competitor=a,r.independent=p,r.rookie=g,r.competitor_points=n,await e(r)&&((0,s.tI)(),retrieveSeason())}return n.createElement("div",{className:"custom-modal hidden",id:"competitor-create-manual-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Create rider")),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},o&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,o)),n.createElement("div",{id:"competitor-create-first",className:"input-field mt-2",contentEditable:!0,"data-placeholder":"First name...","data-category":"input-field",autoFocus:!0,onKeyUp:e=>(0,s.ac)(e,k),onInput:e=>y(e)}),n.createElement("div",{id:"competitor-create-last",className:"input-field mt-2",contentEditable:!0,"data-placeholder":"Last name(s)...","data-category":"input-field",onKeyUp:e=>(0,s.ac)(e,k),onInput:e=>y(e)}),n.createElement("div",{className:"d-flex justify-content-around my-2"},n.createElement("input",{id:"competitor-create-number",className:"input-field flex-grow-1 me-1",type:"number",min:"1",max:"99",step:"1",placeholder:"Number","data-category":"input-field",onChange:e=>y(e),onKeyUp:e=>(0,s.ac)(e,k)}),n.createElement("input",{id:"competitor-create-points",className:"input-field flex-grow-1",type:"number",min:"0",max:"999",step:"1",placeholder:"Points","data-category":"input-field",onChange:e=>y(e),onKeyUp:e=>(0,s.ac)(e,k)})),n.createElement("form",{className:"form-check"},n.createElement("input",{id:"competitor-create-independent",type:"checkbox",className:"form-check-input",value:"","data-category":"input-field",onChange:e=>y(e),onKeyUp:e=>(0,s.ac)(e,k)}),n.createElement("label",{className:"form-check-label ms-1",htmlFor:"competitor-create-independent"},"Independent Rider")),n.createElement("form",{className:"form-check"},n.createElement("input",{id:"competitor-create-rookie",type:"checkbox",className:"form-check-input",value:"","data-category":"input-field",onChange:e=>y(e),onKeyUp:e=>(0,s.ac)(e,k)}),n.createElement("label",{className:"form-check-label ms-1",htmlFor:"competitor-create-rookie"},"Rookie Rider"))),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{id:"competitor-create-button",className:"btn btn-primary me-auto rounded-15",onClick:k},"Create rider")))}var i=a(398);function m(){const{modalErrorMessage:e,setModalErrorMessage:t,loadingMessage:a,setLoadingMessage:o,setSuccessMessage:l,resetApplicationMessages:m}=(0,c.Xn)(),{retrieveSeason:d,season:u}=(0,r.useSeasonContext)();async function p(){m(),o("Loading...");let e=document.getElementById("competitor-automatic-link").innerHTML;const a=await(0,i.ZR)(e,u.year);o(!1),a.error?t("There was an error processing the riders, try again later"):a.invalidLink?t("Incorrect link, be sure its coppied correctly"):a.invalidSeason?t("Could not find the season in the database"):a.timeout?t("MotoGP website didn't load"):400!=a.status?((0,s.tI)(),d(),l("Riders successfully added")):t("There was an error adding the riders")}return n.createElement("div",{id:"competitor-create-standings-modal",className:"custom-modal hidden",onClick:e=>e.stopPropagation()},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Create rider automatic")),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",{className:"alert alert-info"},n.createElement("small",null,"Paste the link of the motogp.com standings page")),e&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,e)),a&&n.createElement("div",{className:"alert alert-secondary"},n.createElement("small",null,a)),n.createElement("div",{className:"input-field",id:"competitor-automatic-link",contentEditable:!0,role:"textbox","data-placeholder":"Link...","data-category":"input-field",onClick:e=>{(0,s.Gd)("competitor-automatic-link"),e.stopPropagation()},onKeyUp:e=>{(0,s.ac)(e,p)}})),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{className:"btn btn-primary",onClick:p},"Submit")))}function d(){const{modalErrorMessage:e,setModalErrorMessage:t,resetApplicationMessages:a,setLoadingMessage:o,loadingMessage:d,setSuccessMessage:u}=(0,c.Xn)(),{retrieveSeason:p,season:E}=(0,r.useSeasonContext)();return n.createElement("div",{className:"ms-auto"},n.createElement("div",{className:"custom-modal hidden",id:"competitor-create-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-body"},e&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,e)),d&&n.createElement("div",{className:"alert alert-secondary"},n.createElement("small",null,d)),n.createElement("div",{className:"card rounded-15 clickable mb-2",onClick:e=>{a(),(0,s.YK)("competitor-create-standings-modal",e)}},n.createElement("div",{className:"card-body"},n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("strong",null,"Retrieve season riders through motogp standings page")))),n.createElement("div",{className:"card rounded-15 clickable mb-2",onClick:async function(){a(),o("Loading...");const e=await(0,i.ZR)("https://www.motogp.com/en/riders/motogp",E.year);o(!1),e.error?t("There was an error processing the riders, try again later"):e.invalidLink?t("Incorrect link, be sure its coppied correctly"):e.invalidSeason?t("Could not find the season in the database"):e.timeout?t("MotoGP website didn't load"):400!=e.status?((0,s.tI)(),p(),u("Riders successfully added")):t("There was an error adding the riders")}},n.createElement("div",{className:"card-body"},n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("strong",null,"Retrieve season riders through motogp rider list")))),n.createElement("div",{className:"card rounded-15 clickable",onClick:e=>{a(),(0,s.YK)("competitor-create-manual-modal",e)}},n.createElement("div",{className:"card-body"},n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("strong",null,"Create riders manually")))))),n.createElement(m,null),n.createElement(l,null))}function u(){const{setLoadingMessage:e,setModalErrorMessage:t,setSuccessMessage:a,modalErrorMessage:o,loadingMessage:l}=(0,c.Xn)(),{season:m,retrieveSeason:d}=(0,r.useSeasonContext)();return n.createElement("div",{className:"custom-modal hidden",id:"delete-all-competitors-modal",onClick:e=>{e.stopPropagation()}},o&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,o)),l&&n.createElement("div",{className:"alert alert-secondary"},n.createElement("small",null,l)),n.createElement("div",{className:"custom-modal-body justify-content-center"},n.createElement("h5",null,n.createElement("strong",null,"Are you sure you want to delete all the riders?"))),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{className:"btn btn-danger rounded-15",onClick:async function(){e("Loading...");const n=await(0,i.UH)(m.id);e(!1),n.error||500===n.status?t("There was an error deleting all the competitors"):400!==n.status?404!==n.status?((0,s.tI)(),a("Competitors successfully deleted"),d()):t("Season was not found, please reload and try again"):t("There was an error sending the season data, please reload and try again")}},"Yes"),n.createElement("button",{className:"btn btn-secondary rounded-15 ms-auto",onClick:s.tI},"Cancel")))}function p(){return n.createElement("div",{className:"custom-modal hidden",id:"select-competitors-delete-modal"},n.createElement("div",{className:"custom-modal-body"},"This is the select riders to delete modal"))}function E(){return n.createElement("div",null,n.createElement("div",{className:"custom-modal hidden",id:"competitor-delete-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"card rounded-15 clickable mb-2",onClick:e=>{(0,s.YK)("delete-all-competitors-modal",e)}},n.createElement("div",{className:"card-body"},n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("strong",null,"Delete all riders")))),n.createElement("div",{className:"card rounded-15 clickable",onClick:e=>{(0,s.YK)("select-competitors-delete-modal",e)}},n.createElement("div",{className:"card-body"},n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("strong",null,"Select riders to delete"))))),n.createElement(u,null),n.createElement(p,null))}function g(){const{season:e,seasonLoading:t,createSeasonCompetitor:a,editSeasonCompetitor:l,deleteSeasonCompetitor:i,retrieveSeason:m}=(0,r.useSeasonContext)(),{resetApplicationMessages:u,modalErrorMessage:p,setModalErrorMessage:g,loadingMessage:h,setLoadingMessage:f,setSuccessMessage:v}=(0,c.Xn)(),[b,N]=(0,n.useState)({}),[y,k]=(0,n.useState)(0),[w,C]=(0,n.useState)(0),[S,x]=(0,n.useState)(""),[M,T]=(0,n.useState)(""),[_,L]=(0,n.useState)(!1),[R,K]=(0,n.useState)(!1);function I(e){const t=e.currentTarget.id;"competitor-edit-number"==t||"competitor-create-number"==t?k(e.currentTarget.value):"competitor-edit-points"==t||"competitor-create-points"==t?C(e.currentTarget.value):"competitor-edit-independent"==t||"competitor-create-independent"==t?L(e.currentTarget.checked):"competitor-edit-first"==t||"competitor-create-first"==t?x(e.currentTarget.innerHTML):"competitor-edit-last"==t||"competitor-create-last"==t?T(e.currentTarget.innerHTML):"competitor-edit-rookie"!=t&&"competitor-create-rooie"!=t||K(e.currentTarget.checked)}async function P(){u();let e={id:null,first:null,last:null,number:null},t={competitor:e,points:null,id:null},a={id:null,competitorPoints:t,independent:null,rookie:null};e.first=S,e.last=M,e.number=y,e.id=b.competitor_points.competitor.id,t.points=w,t.id=b.competitor_points.id,a.id=b.id,a.competitorPoints=t,a.independent=_,a.rookie=R,await l(a)?(0,s.tI)():g("There was an error while submiting the edited competitor")}return t?n.createElement("div",{className:"p-3"},"Loading..."):n.createElement("div",null,n.createElement("div",{className:"card-header rounded-15-top"},n.createElement("div",{className:"container",style:{paddingLeft:"0px",paddingRight:"0px"}},n.createElement("div",{className:"d-flex"},n.createElement("h3",null,"Riders"),!e.finalized&&n.createElement("div",{className:"ms-auto"},n.createElement("button",{className:"btn",id:"create-competitor-button",onClick:e=>(0,s.YK)("competitor-create-modal",e)},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"blue",className:"bi bi-plus",viewBox:"0 0 16 16"},n.createElement("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"}))),n.createElement("button",{className:"btn"},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"red",className:"bi bi-trash",viewBox:"0 0 16 16",onClick:e=>(0,s.YK)("competitor-delete-modal",e)},n.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),n.createElement("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"}))))))),n.createElement("div",{className:"card-body",style:{padding:"0.5rem"}},n.createElement("div",{className:"container mb-2"},0!=e.competitors.length&&n.createElement("div",{className:"row"},n.createElement("div",{className:"col-1"},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"currentColor",className:"bi bi-pen",viewBox:"0 0 16 16"},n.createElement("path",{d:"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z"}))),n.createElement("span",{className:"col-5"},"Name"),n.createElement("span",{className:"col-3"},"#"),n.createElement("span",{className:"col-3"},"Points")),e.competitors.map((e=>n.createElement("div",{className:"row",key:`competitor-${e.id}`},n.createElement("div",{id:"edit-competitor-button",className:"ms-auto dropdown-div col-1 d-flex align-items-center",onClick:t=>async function(e,t){u(),(0,s.YK)("competitor-edit-modal",t);const a=await(0,o.Si)(e);if(a.error)return g("There was an error editing the rider"),void console.log(a.error);404!=a.status?200==a.status?(N(a.competitor),k(a.competitor.competitor_points.competitor.number),C(a.competitor.competitor_points.points),x(a.competitor.competitor_points.competitor.first),T(a.competitor.competitor_points.competitor.last),L(a.competitor.independent),K(a.competitor.rookie),document.getElementById("competitor-edit-first").innerHTML=a.competitor.competitor_points.competitor.first,document.getElementById("competitor-edit-last").innerHTML=a.competitor.competitor_points.competitor.last):g("Be sure the rider number is unique to this season"):g("Rider was not found in the database")}(e.id,t)},n.createElement("div",null,n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16"},n.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"})))),n.createElement("span",{className:"col-5"},e.competitor_points.competitor.first," ",e.competitor_points.competitor.last),n.createElement("span",{className:"col-3"},e.competitor_points.competitor.number),n.createElement("span",{className:"col-3"},e.competitor_points.points)))))),n.createElement(d,null),n.createElement(E,null),n.createElement("div",{className:"custom-modal hidden",id:"competitor-edit-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Edit rider")),p&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,p)),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",{id:"competitor-edit-first",className:"input-field mt-2",contentEditable:!0,"data-placeholder":"First name...","data-category":"input-field",onKeyUp:e=>(0,s.ac)(e,P),onInput:e=>I(e)}),n.createElement("div",{id:"competitor-edit-last",className:"input-field mt-2",contentEditable:!0,"data-placeholder":"Last name(s)...","data-category":"input-field",onKeyUp:e=>(0,s.ac)(e,P),onInput:e=>I(e)}),n.createElement("div",{className:"d-flex justify-content-around mt-2"},n.createElement("input",{id:"competitor-edit-number",className:"input-field flex-grow-1 me-1",type:"number",min:"1",max:"99",step:"1",placeholder:"Number",value:y,"data-category":"input-field",onChange:e=>I(e),onKeyUp:e=>(0,s.ac)(e,P)}),n.createElement("input",{id:"competitor-edit-points",className:"input-field flex-grow-1",type:"number",min:"0",max:"999",step:"1",placeholder:"Points",value:w,"data-category":"input-field",onChange:e=>I(e),onKeyUp:e=>(0,s.ac)(e,P)})),n.createElement("form",{className:"form-check"},n.createElement("input",{id:"competitor-edit-independent",type:"checkbox",className:"form-check-input",checked:_,"data-category":"input-field",onChange:e=>I(e),onKeyUp:e=>(0,s.ac)(e,P)}),n.createElement("label",{className:"form-check-label ms-1",htmlFor:"competitor-edit-independent"},"Independent Rider")),n.createElement("form",{className:"form-check"},n.createElement("input",{id:"competitor-edit-rookie",type:"checkbox",className:"form-check-input",checked:R,"data-category":"input-field",onChange:e=>I(e),onKeyUp:e=>(0,s.ac)(e,P)}),n.createElement("label",{className:"form-check-label ms-1",htmlFor:"competitor-edit-rookie"},"Rookie"))),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{id:"competitor-edit-button",className:"btn btn-primary me-auto rounded-15",onClick:P},"Save Changes"),n.createElement("button",{id:"competitor-delete-button",className:"btn btn-danger ms-auto rounded-15",onClick:()=>async function(t){u(),await i(t,e.id)&&(0,s.tI)()}(b.id)},"Delete Rider"))))}function h(){const{setErrorMessage:e,setSuccessMessage:t,setLoadingMessage:a,resetApplicationMessages:o}=(0,c.Xn)(),{season:l,retrieveSeason:m}=(0,r.useSeasonContext)(),[d,u]=(0,n.useState)();async function p(){o(),a("Loading...");let n=document.getElementById("race-automatic-link").innerHTML,r=await(0,i.TR)(n,d,l.year);if(a(!1),r.error)return e("There was an error processing the link."),void console.log(r.error);if(r.invalidLink)e("The link is invalid or website didn't load.");else{if(r.competitorNumbersNotFound.length>0){let t="Competitors with the numbers: ";for(let e=0;e<r.competitorNumbersNotFound.length;e++)t+=String(r.competitorNumbersNotFound[e]),t+=" ";return t+="were not found in the database",void e(t)}r.timeout?e("Motosport website didn't load, try again later"):r.invalidSeason?e("Season was not found in the database"):201==r.status?((0,s.tI)(),a(!1),t("The race has been submited"),m()):e("There was an error processing the link.")}}return n.createElement("div",{className:"custom-modal hidden",id:"race-create-automatic-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Create Race Automatic")),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",{className:"alert alert-info"},n.createElement("small",null,"Open the race result on motorsport.com and then paste the link into the textbox")),n.createElement("div",{className:"input-field",id:"race-automatic-link",contentEditable:!0,role:"textbox","data-placeholder":"Link...","data-category":"input-field",onClick:e=>{(0,s.Gd)("race-automatic-link"),e.stopPropagation()},onKeyUp:e=>{(0,s.ac)(e,p)}}),n.createElement("div",{className:"d-flex justify-content-center align-items-center mt-2"},n.createElement("input",{id:"race-automatic-date",type:"date",className:"input-field","data-category":"input-field",onChange:e=>function(e){const t=e.target.value;u(t)}(e),onKeyUp:e=>{(0,s.ac)(e,p)}}))),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{className:"btn btn-primary rounded-15",onClick:p},"Submit")))}const f=(0,n.createContext)();function v({children:e}){const[t,a]=(0,n.useState)(""),[o,l]=(0,n.useState)(""),[m,d]=(0,n.useState)(""),[u,p]=(0,n.useState)(!1),[E,g]=(0,n.useState)([]),[h,v]=(0,n.useState)([]),[b,N]=(0,n.useState)([]),{setErrorMessage:y,setSuccessMessage:k,setLoadingMessage:w}=(0,c.Xn)(),{season:C,retrieveSeason:S}=(0,r.useSeasonContext)();function x(){a(""),l(""),d(""),p(!1),g([]),v([]),N([])}return n.createElement(f.Provider,{value:{track:t,title:o,timestamp:m,isSprint:u,setTrack:a,setTitle:l,setIsSprint:p,setTimestamp:d,setSelectedCompetitors:g,setCompetitorsPositions:v,competitorsPositions:h,selectedCompetitors:E,createRace:async function(){w("Loading..."),N([]);let e={race:{title:o,track:t,timestamp:m,is_sprint:u,finalized:!0},competitors_positions:h},a=await(0,i.jl)(e,C.year);return a.error?(console.log(a),void y("There was an error submiting the race")):a.competitorsNotFound.includes(!0)?(y("Highlighted competitors were not found in the database"),void N(a.competitorsNotFound)):0!=a.invalidCompetitorsPositionsSpacing.length?(y("Highlighted competitors have invalid spacing (positions) between them"),void N(a.invalidCompetitorsPositionsSpacing)):void(a.invalidCompetitorsPositions?y("Some or all competitor positions could not be created"):a.invalidSeason?y("There was an error retrieving the season from the database or it doesn't exist"):a.invalidRaceData?y("Some or all of the details of the race are bad (title, track, date, etc)"):400!==a.status?(x(),w(!1),k("Race successfully added"),(0,s.tI)(),S()):y("There was an error submiting the race"))},invalidCompetitors:b,resetVariables:x}},e)}function b(){return(0,n.useContext)(f)}function N(){const{loggedIn:e,user:t,setErrorMessage:a,resetApplicationMessages:r}=(0,c.Xn)(),{track:o,title:l,timestamp:i,isSprint:m,setTrack:d,setTitle:u,setTimestamp:p,setIsSprint:E,resetVariables:g}=b();function h(n){""!=o&&""!=l&&0!=i?(r(),(0,s.YK)("competitors-select-modal",n,e,t.is_admin,!1)):a("Make sure the fields are filled in")}return n.createElement("div",{className:"custom-modal hidden",id:"create-race-details-manual-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Race Details")),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",{id:"race-create-track",className:"input-field mt-2","data-category":"input-field",contentEditable:!0,"data-placeholder":"Track name...",onKeyUp:e=>{(0,s.ac)(e,h),function(e){d(e.currentTarget.innerHTML)}(e)}}),n.createElement("div",{id:"race-create-title",className:"input-field mt-2","data-category":"input-field",contentEditable:!0,"data-placeholder":"Race title...",onKeyUp:e=>{(0,s.ac)(e,h),function(e){u(e.currentTarget.innerHTML)}(e)}}),n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("input",{id:"race-create-date",type:"date",className:"input-field flex-grow-1 mt-2","data-category":"input-field",onChange:e=>function(e){p(e.currentTarget.value)}(e),onKeyUp:e=>(0,s.ac)(e,h)})),n.createElement("div",{className:"form-check mt-1"},n.createElement("input",{id:"race-create-sprint",type:"checkbox",className:"form-check-input","data-category":"input-field",value:m,onChange:e=>function(e){E(e.currentTarget.checked)}(e),onKeyUp:e=>(0,s.ac)(e,h)}),n.createElement("label",{className:"form-check-label",htmlFor:"race-create-sprint"},"Sprint Race"))),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{className:"btn btn-primary rounded-15 ms-auto",onClick:e=>{h(e)}},"Next")))}function y(){const{season:e,seasonLoading:t}=(0,r.useSeasonContext)(),{user:a,resetApplicationMessages:o,setLoadingMessage:l}=(0,c.Xn)(),{createRace:i,invalidCompetitors:m,selectedCompetitors:d,competitorsPositions:u,setCompetitorsPositions:p}=b(),[E,g]=(0,n.useState)([]),[h,f]=(0,n.useState)(!0);function v(e,t){let a=u;a[t].position=Number(e.currentTarget.value),p(a)}if((0,n.useEffect)((()=>{f(!0),function(){g(d);const e=d.map((e=>({competitor_id:e.competitor_points.competitor.id,position:0})));p(e)}(),f(!1)}),[d]),!t&&!h)return n.createElement("div",{className:"custom-modal hidden",id:"race-results-create-manual-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Race Create Manual")),n.createElement("div",{className:"alert alert-info"},n.createElement("small",null,"Input the final positions of the riders, 0 for DNF")),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},0!=E.length&&E.map(((e,t)=>n.createElement("div",{key:`competitor-position-form-${e.competitor_points.competitor.number}`,className:"mb-1"},0!=m.length&&m.some((t=>t==e.competitor.id))?n.createElement("form",null,n.createElement("input",{className:"input-field me-2","data-category":"input-field",id:`competitor-position-${e.competitor_points.competitor.number}`,type:"number",max:99,min:0,defaultValue:0,onChange:e=>v(e,t)}),n.createElement("label",{className:"text-danger",htmlFor:`competitor-position-${e.competitor_points.competitor.number}`},"#",e.competitor_points.competitor.number," ",e.competitor_points.competitor.first," ",e.competitor_points.competitor.last)):n.createElement("form",null,n.createElement("input",{className:"input-field me-2","data-category":"input-field",id:`competitor-position-${e.competitor_points.competitor.number}`,type:"number",max:99,min:0,defaultValue:0,onChange:e=>v(e,t)}),n.createElement("label",{htmlFor:`competitor-position-${e.competitor_points.competitor.number}`},"#",e.competitor_points.competitor.number," ",e.competitor_points.competitor.first," ",e.competitor_points.competitor.last)))))),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{className:"btn btn-primary rounded-15",onClick:e=>{(0,s.YK)("competitors-select-modal",e,a.is_logged_in,a.is_admin,!1)}},"Back"),n.createElement("button",{className:"btn btn-primary rounded-15 ms-auto",onClick:async function(){o();let e=u;e.sort(((e,t)=>e.position-t.position)),p(e),await i()}},"Save race result")))}function k(){const[e,t]=(0,n.useState)([]),{season:a,seasonLoading:o}=(0,r.useSeasonContext)(),{user:l,resetApplicationMessages:i}=(0,c.Xn)(),{setSelectedCompetitors:m}=b();return(0,n.useEffect)((()=>{if(o)return;const e=a.competitors_sorted_number.map((e=>({competitor:e,include:!0})));t(e)}),[o]),n.createElement("div",{className:"custom-modal hidden",id:"competitors-select-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Select the riders that participated in the race")),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},0!=e.length&&e.map(((a,r)=>n.createElement("div",{className:"form-check",key:`competitor-checkbox-${a.competitor.id}`,id:`competitor-checkbox-${a.competitor.id}`},n.createElement("input",{className:"form-check-input","data-category":"input-field",type:"checkbox",checked:e[r].include,onChange:()=>{var e;e=r,t((t=>t.map(((t,a)=>a==e?{...t,include:!t.include}:t))))},id:`include-competitor-${a.competitor.competitor_points.competitor.id}`}),n.createElement("label",{className:"form-check-label",htmlFor:`include-competitor-${a.competitor.competitor_points.competitor.id}`},"#",a.competitor.competitor_points.competitor.number," ",a.competitor.competitor_points.competitor.first," ",a.competitor.competitor_points.competitor.last))))),n.createElement("div",{className:"custom-modal-footer mt-2"},n.createElement("button",{className:"btn btn-primary rounded-15",onClick:e=>{(0,s.YK)("create-race-details-manual-modal",e,l.is_logged_in,l.is_admin,!1)}},"Back"),n.createElement("button",{className:"btn btn-primary ms-auto rounded-15",onClick:t=>{!function(t){let a=[];for(let t=0;t<e.length;t++)e[t].include&&a.push(e[t].competitor);m(a),i(),(0,s.YK)("race-results-create-manual-modal",t,l.is_logged_in,l.is_admin,!1)}(t)}},"Next")))}function w(){const{modalErrorMessage:e,contextLoading:t,loggedIn:a,user:o}=(0,c.Xn)(),{season:s,seasonLoading:l}=(0,r.useSeasonContext)();if(!l&&!t)return n.createElement("div",null,n.createElement(N,null),n.createElement(y,null),n.createElement(k,null),n.createElement(y,null))}function C(){const{season:e,seasonLoading:t}=(0,r.useSeasonContext)(),{modalErrorMessage:a,setModalErrorMessage:o,resetApplicationMessages:l,loggedIn:i,user:m}=(0,c.Xn)(),{resetVariables:d}=b(),[u,p]=(0,n.useState)((()=>{if(!t)return 0!=e.competitors.length}));return n.createElement("div",{className:"ms-auto"},n.createElement("div",{className:"custom-modal hidden",id:"race-create-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Create Race")),!u&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,"You need to have competitors added to create a race")),u&&n.createElement("div",null,a&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,a)),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",{className:"card rounded-15 clickable mb-2",onClick:e=>{l(),(0,s.YK)("race-create-automatic-modal",e,i,m.is_admin)}},n.createElement("div",{className:"card-body"},n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("strong",null,"Create race automatically with motorsport link")))),n.createElement("div",{className:"card rounded-15 clickable",onClick:e=>{d(),(0,s.YK)("create-race-details-manual-modal",e,i,m.is_admin)}},n.createElement("div",{className:"card-body"},n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("strong",null,"Create race manually"))))))),n.createElement(h,null),n.createElement(w,null))}const S=(0,n.createContext)();function x({children:e,raceId:t}){const{setModalErrorMessage:a,setSuccessMessage:l,resetApplicationMessages:m}=(0,c.Xn)(),{retrieveSeason:d}=(0,r.useSeasonContext)(),[u,p]=(0,n.useState)(""),[E,g]=(0,n.useState)(""),[h,f]=(0,n.useState)(""),[v,b]=(0,n.useState)(!1),[N,y]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{!async function(){y(!0),await async function(){if(m(),null==t)return;const e=await(0,o.YY)(t);200==e.status||201==e.status?(p(e.race.track),g(e.race.title),f(e.race.timestamp),b(e.race.is_sprint)):a("There was an error retrieving the race data")}(),y(!1)}()}),[t]),n.createElement(S.Provider,{value:{track:u,title:E,timestamp:h,isSprint:v,setTrack:p,setTitle:g,setTimestamp:f,setIsSprint:b,editRace:async function(){m();const e={title:E,track:u,timestamp:h,isSprint:v,id:t},n=await(0,i._O)(e);n.error||201!=n.status?a("There has been an error editing the race, make sure the data inputted is correct"):(l("Race edited"),d(),(0,s.tI)(),p(""),g(""),f(""),b(!1))},raceEditLoading:N}},e)}function M(){const{modalErrorMessage:e}=(0,c.Xn)(),{track:t,title:a,isSprint:r,timestamp:o,setTrack:l,setTitle:i,setIsSprint:m,setTimestamp:d,editRace:u,raceEditLoading:p}=(0,n.useContext)(S);async function E(){await u()}return(0,n.useEffect)((()=>{p||(document.getElementById("race-edit-track").innerHTML=t,document.getElementById("race-edit-title").innerHTML=a)}),[p]),n.createElement("div",{className:"custom-modal hidden",id:"race-edit-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Edit Race")),n.createElement("hr",null),e&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,e)),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",{id:"race-edit-track",className:"input-field mt-2","data-category":"input-field",contentEditable:!0,"data-placeholder":"Track name...",onKeyUp:e=>{(0,s.ac)(e,E),l(e.currentTarget.innerHTML)}}),n.createElement("div",{id:"race-edit-title",className:"input-field mt-2","data-category":"input-field",contentEditable:!0,"data-placeholder":"Race title...",onKeyUp:e=>{(0,s.ac)(e,E),i(e.currentTarget.innerHTML)}}),n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("input",{id:"race-edit-date",type:"date","data-category":"input-field",className:"input-field flex-grow-1 mt-2",value:o,onChange:e=>d(e.currentTarget.value),onKeyUp:e=>(0,s.ac)(e,E)})),n.createElement("div",{className:"form-check mt-1"},n.createElement("input",{id:"race-edit-sprint",type:"checkbox",className:"form-check-input","data-category":"input-field",checked:r,onChange:()=>{m(!r)},onKeyUp:e=>(0,s.ac)(e,E)}),n.createElement("label",{className:"form-check-label",htmlFor:"race-edit-sprint"},"Sprint Race"))),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{className:"btn btn-primary ms-auto",onClick:E},"Save changes")))}function T(){const{season:e,seasonLoading:t,retrieveSeason:a,editSeasonRace:l,deleteSeasonRace:i,createSeasonRace:m,addSeasonRaceResults:d}=(0,r.useSeasonContext)(),{modalErrorMessage:u,setModalErrorMessage:p,resetApplicationMessages:E,loggedIn:g,user:h,successMessage:f}=(0,c.Xn)(),[b,N]=(0,n.useState)(null),[y,k]=(0,n.useState)(null),[w,S]=(0,n.useState)(!1);async function T(e,t){const a=await(0,o.YY)(t);if(a.error||200!=a.status)return console.log(a),void p("There was an error loading the race");S(a.race),(0,s.YK)("race-result-modal",e,g,h.is_admin)}return(0,n.useEffect)((()=>{"Race edited"==f&&N(null)}),[f]),t?n.createElement("div",{className:"p-3"},"Loading..."):n.createElement("div",null,n.createElement(v,null,n.createElement(C,null)),n.createElement(x,{raceId:b},n.createElement(M,null)),n.createElement("div",{className:"custom-modal hidden",id:"race-result-modal"},n.createElement("div",{className:"custom-modal-header"},w&&n.createElement("h5",null,w.title)),u&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,u)),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",null,n.createElement("div",{className:"row g-0",style:{marginRight:"0px",padding:"0px"}},n.createElement("strong",{className:"col-2"},"Pos."),n.createElement("strong",{className:"col-6"},"Name")),w&&w.competitors_positions.map((e=>n.createElement("div",{className:"row g-0",key:`competitor-${e.competitor_id}`,style:{marginRight:"0px"}},0==e.position&&n.createElement("span",{className:"col-2"},"DNF"),0!=e.position&&n.createElement("span",{className:"col-2"},e.position),n.createElement("span",{className:"col-6"},n.createElement("small",null,"#",e.number)," ",e.first," ",e.last))))))),n.createElement("div",{className:"card-header rounded-15-top"},n.createElement("div",{className:"container",style:{paddingLeft:"0px",paddingRight:"0px"}},n.createElement("div",{className:"d-flex"},n.createElement("h3",null,"Races"),!e.finalized&&n.createElement("button",{className:"btn ms-auto",id:"create-race-button",onClick:e=>{E(),(0,s.YK)("race-create-modal",e,g,h.is_admin)}},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"blue",className:"bi bi-plus",viewBox:"0 0 16 16"},n.createElement("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})))))),n.createElement("div",{className:"card-body"},e.races.map((e=>n.createElement("div",{className:"container card rounded-15 clickable my-1",id:`race-${e.id}`,key:`race-${e.id}`,onClick:t=>T(t,e.id)},n.createElement("div",{className:"d-flex align-items-center"},n.createElement("div",{className:"container",style:{padding:"0px"}},n.createElement("div",null,e.title," ",e.is_sprint&&n.createElement("span",null,"(sprint)")),n.createElement("small",null,n.createElement("strong",null,e.timestamp))),e.finalized&&n.createElement("span",{className:"badge rounded-pill text-bg-success ms-auto clickable",onClick:t=>{T(t,e.id)}},"Final"),!e.finalized&&n.createElement("span",{className:"badge rounded-pill text-bg-secondary ms-auto clickable",onClick:t=>{openSelectCompetitorsModal(t),setTempRaceId(e.id)}},"Upcoming"),n.createElement("div",{className:"dropdown-div",onClick:t=>(0,s.gR)(`dropdown-race-${e.id}`,t)},n.createElement("div",{className:"d-flex align-items-center"},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16"},n.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}))),n.createElement("ul",{id:`dropdown-race-${e.id}`,className:"dropdown-menu"},n.createElement("li",null,n.createElement("button",{id:"edit-race-button",className:"dropdown-item",onClick:t=>{N(e.id),(0,s.YK)("race-edit-modal",t,g,h.is_admin)}},"Edit")),!e.finalized&&n.createElement("li",null,n.createElement("button",{id:"add-results-race-button",className:"dropdown-item",onClick:e=>{openSelectCompetitorsModal(e)}},"Add Results")),e.finalized&&n.createElement("li",null,n.createElement("button",{id:"view-race-results-button",className:"dropdown-item",onClick:t=>T(t,e.id)},"View Race Results")),n.createElement("li",null,n.createElement("button",{className:"dropdown-item",onClick:()=>i(e.id)},"Delete"))))))))))}function _(){const{season:e,retrieveSeason:t}=(0,r.useSeasonContext)(),{setErrorMessage:a,setSuccessMessage:o,retrieveCurrentSeason:s,retrievePicksState:l}=(0,c.Xn)(),[m,d]=(0,n.useState)(e.selection_open);return n.createElement("div",{className:"d-flex align-items-center w-100 ps-1"},n.createElement("strong",null,"Enable member picks"),!e.finalized&&e.current&&n.createElement("div",{className:"form-check form-switch ms-auto mb-0"},n.createElement("input",{className:"form-check-input",type:"checkbox",checked:m,onChange:async function(){if(0==e.competitors.length)return void a("Be sure to have competitors added before enabling member picks");const n=await(0,i.Qz)();if(!n.error)return 200===n.status?(await t(),await s(),o(`Member picks successfully ${e.selection_open?"disabled":"enabled"}.`),d(!e.selection_open),void await l()):void a("It was not possible to enable member picks");a("There was an error toggling the member picks.")}})),(e.finalized||!e.current)&&n.createElement("div",{className:"form-check form-switch ms-auto mb-0",onClick:e=>{e.stopPropagation(),a("You need to set this season as the current season to enable picks or finalize")}},n.createElement("input",{className:"form-check-input",type:"checkbox",checked:!1,disabled:!0})))}function L(){const{season:e}=(0,r.useSeasonContext)(),{setErrorMessage:t,setSuccessMessage:a,selectPicksState:o,contextLoading:l}=(0,c.Xn)(),[m,d]=(0,n.useState)(e.finalized);return n.createElement("div",{className:"d-flex align-items-center w-100 ps-1"},n.createElement("strong",null,"Finalize season"),m||!e.current&&n.createElement("div",{className:"form-check form-switch ms-auto mb-0",onClick:e=>{e.stopPropagation(),t("You need to set this season as the current season to enable picks or finalize")}},n.createElement("input",{className:"form-check-input",type:"checkbox",checked:m,disabled:!0})),!m&&e.current&&n.createElement("div",{className:"form-check form-switch ms-auto mb-0"},n.createElement("input",{className:"form-check-input",type:"checkbox",checked:m,onChange:e=>{(0,s.YK)("finalize-season-modal",e)}})),n.createElement("div",{className:"custom-modal hidden",id:"finalize-season-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Are you sure you want to finalize the season? This can't be reversed")),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{className:"btn btn-danger",onClick:n=>{!async function(){const n=await(0,i.ou)(e.year);if(!n.error)return 200==n.status?(a("Successfully finalized the season"),void d(!0)):void t("There was a problem finalizing the season");t("There was an error finalizing the season")}(),(0,s.YK)("finalize-season-modal",n)}},"Finalize"),n.createElement("button",{className:"ms-auto btn btn-primary",onClick:e=>{(0,s.YK)("finalize-season-modal",e)}},"Cancel"))))}function R(){const{season:e,retrieveSeason:t}=(0,r.useSeasonContext)(),{setErrorMessage:a,setSuccessMessage:o}=(0,c.Xn)();return n.createElement("div",{className:"d-flex align-items-center w-100 ps-1"},n.createElement("strong",null,"Set as current season"),n.createElement("div",{className:"ms-auto"},!e.current&&!e.finalized&&n.createElement("button",{className:"btn btn-outline-primary rounded-15",onClick:async function(){let n=await(0,i.rI)(e.year);if(n.error)return console.log(n.error),void a("There was an error submiting the current season");o(`Season: ${e.year} was set as the current season`),t()}},"Set as current season"),(e.current||e.finalized)&&n.createElement("button",{className:"btn btn-outline-secondary rounded-15",disabled:!0},"Already current season")))}var K=a(767);function I(){const{season:e,deleteSeason:t}=(0,r.useSeasonContext)(),{user:a,setErrorMessage:o,retrieveCurrentSeason:l}=(0,c.Xn)(),[i,m]=(0,n.useState)(""),d=(0,K.Zp)();return n.createElement(n.Fragment,null,n.createElement("div",{className:"d-flex align-items-center w-100 ps-1"},n.createElement("strong",null,"Delete season"),n.createElement("div",{className:"ms-auto"},n.createElement("button",{className:"btn btn-outline-danger rounded-15",onClick:e=>{(0,s.YK)("season-delete-modal",e,a.is_logged_in,a.is_admin),m("")}},"Delete season"))),n.createElement("div",{className:"custom-modal hidden",id:"season-delete-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Delete Season")),n.createElement("div",{className:"custom-modal-body"},n.createElement("input",{type:"text",className:"input-field w-100",placeholder:"Write the season year",onChange:e=>{!function(e){m(e.target.value)}(e)}})),n.createElement("div",{className:"custom-modal-footer d-flex flex-column"},n.createElement("button",{className:"btn btn-danger w-100 rounded-15",onClick:async function(){i==e.year?(await t(),(0,s.tI)(),d("/administration")):o("The season year is not correct")}},"Delete Season"),n.createElement("button",{className:"btn btn-light w-100 rounded-15 mt-2",onClick:s.tI},"Cancel"))))}function P(){const{retrieveSeason:e,season:t,seasonLoading:a}=(0,r.useSeasonContext)(),{contextLoading:o,user:s}=(0,c.Xn)();return(0,n.useEffect)((()=>{e()}),[]),a||o||!t?n.createElement("div",{className:"container",style:{padding:"0px"}},n.createElement("div",{className:"row"},n.createElement("div",{className:"card rounded-15 col-md me-2 mt-2 element-background-color element-border-color"},"Loading..."),n.createElement("div",{className:"card rounded-15 col-md mt-2 element-background-color element-border-color"},"Loading...")),n.createElement("div",{className:"row"},n.createElement("div",{className:"card rounded-15 col-md my-2 element-background-color element-border-color"},"Loading..."))):s.is_admin?n.createElement("div",null,n.createElement("div",{className:"container",style:{padding:"0px"}},n.createElement("div",{className:"row"},n.createElement("div",{className:"card rounded-15 col-md me-2 element-background-color element-border-color",style:{padding:"0px"}},n.createElement(g,null)),n.createElement("div",{className:"card rounded-15 col-md element-background-color element-border-color",style:{padding:"0px"}},n.createElement(T,null))),n.createElement("div",{className:"row"},n.createElement("div",{className:"card rounded-15 col-md my-2 element-background-color element-border-color",style:{padding:"10px"}},n.createElement(_,null),n.createElement("hr",null),n.createElement(L,null),n.createElement("hr",null),n.createElement(R,null),n.createElement("hr",null),n.createElement(I,null))))):void 0}}}]);