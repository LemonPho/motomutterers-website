/*! For license information please see src_components_RegisterPage_js.584586856e50d821b827.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_components_RegisterPage_js"],{"./src/components/RegisterPage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ RegisterPage)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var _fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetch-utils/fetchPost */ "./src/components/fetch-utils/fetchPost.js");\n/* harmony import */ var _ApplicationContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ApplicationContext */ "./src/components/ApplicationContext.js");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./src/components/utils.js");\n\n\n\n\n\nfunction RegisterPage() {\n  const {\n    loggedIn,\n    contextLoading,\n    setErrorMessage,\n    setSuccessMessage,\n    setLoadingMessage,\n    resetApplicationMessages\n  } = (0,_ApplicationContext__WEBPACK_IMPORTED_MODULE_2__.useApplicationContext)();\n  const [createUserLoading, setCreateUserLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  async function registerAccount() {\n    if (createUserLoading) {\n      return;\n    }\n    resetApplicationMessages();\n    setCreateUserLoading(true);\n    setLoadingMessage("Loading...");\n    const username = document.getElementById("username").value;\n    const email = document.getElementById("email").value;\n    const password1 = document.getElementById("password").value;\n    const password2 = document.getElementById("password-confirm").value;\n    const registerResponse = await (0,_fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_1__.submitRegistration)(username, email, password1, password2);\n    if (registerResponse.error) {\n      setErrorMessage("An error ocurred while submiting the account");\n      setCreateUserLoading(false);\n      setLoadingMessage(false);\n      return;\n    }\n    if (registerResponse.status === 400) {\n      let message = registerResponse.usernameUnique ? "" : "Username is already taken\\n";\n      message += registerResponse.usernameValid ? "" : "Username isn\'t valid, be sure to use only numbers and letters\\n";\n      message += registerResponse.emailUnique ? "" : "Email is already in use\\n";\n      message += registerResponse.emailValid ? "" : "Email isn\'t valid\\n";\n      message += registerResponse.passwordsMatch ? "" : "Passwords don\'t match\\n";\n      message += registerResponse.passwordValid ? "" : "Passwords need at least 8 characters and can\'t be \'simple\'\\n";\n      setErrorMessage(message);\n      setCreateUserLoading(false);\n      setLoadingMessage(false);\n      return;\n    }\n    if (registerResponse.status === 200) {\n      setSuccessMessage("Account created, check your email to finalize the creation");\n      setCreateUserLoading(false);\n      setLoadingMessage(false);\n      return;\n    }\n    setErrorMessage("There was an error while submiting the account information");\n    setCreateUserLoading(false);\n    setLoadingMessage(false);\n    return;\n  }\n  if (contextLoading) {\n    return null;\n  }\n  if (loggedIn) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__.Navigate, {\n      replace: true,\n      to: "/"\n    }));\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "card shadow mx-auto my-5 rounded-15 element-background-color element-border-color",\n    style: {\n      width: "21rem"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "my-3",\n    style: {\n      display: "flex"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("h6", {\n    style: {\n      margin: "auto",\n      fontSize: "40px"\n    }\n  }, "Sign up")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("hr", {\n    className: "mt-2"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "input-group mt-3 px-3 mx-auto"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "input-group px-3  mx-auto"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n    type: "text",\n    className: "form-control",\n    placeholder: "Username",\n    id: "username",\n    onKeyUp: e => (0,_utils__WEBPACK_IMPORTED_MODULE_3__.enterKeySubmit)(e, registerAccount)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "input-group mt-3 px-3  mx-auto"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n    type: "text",\n    className: "form-control",\n    placeholder: "Email",\n    id: "email",\n    onKeyUp: e => (0,_utils__WEBPACK_IMPORTED_MODULE_3__.enterKeySubmit)(e, registerAccount)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "input-group mt-3 px-3  mx-auto"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n    type: "password",\n    className: "form-control",\n    placeholder: "Password",\n    id: "password",\n    onKeyUp: e => (0,_utils__WEBPACK_IMPORTED_MODULE_3__.enterKeySubmit)(e, registerAccount)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "input-group mt-3 px-3 mx-auto"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n    type: "password",\n    className: "form-control",\n    placeholder: "Confirm password",\n    id: "password-confirm",\n    onKeyUp: e => (0,_utils__WEBPACK_IMPORTED_MODULE_3__.enterKeySubmit)(e, registerAccount)\n  })), createUserLoading && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "input-group mt-3 px-3 mx-auto"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    className: "btn btn-primary w-100 rounded-15",\n    disabled: true\n  }, "Loading...")), !createUserLoading && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "input-group mt-3 px-3 mx-auto"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    className: "btn btn-primary w-100 rounded-15",\n    onClick: registerAccount\n  }, "Sign up")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("hr", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "input-group mb-3 px-3 mx-auto"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a", {\n    href: "/login",\n    className: "btn btn-success w-100 rounded-15"\n  }, "Login to an account"))));\n}\n\n//# sourceURL=webpack://frontend/./src/components/RegisterPage.js?')}}]);