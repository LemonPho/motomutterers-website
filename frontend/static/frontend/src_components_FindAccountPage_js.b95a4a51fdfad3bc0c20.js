/*! For license information please see src_components_FindAccountPage_js.b95a4a51fdfad3bc0c20.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_components_FindAccountPage_js"],{"./src/components/FindAccountPage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ FindAccount)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetch-utils/fetchPost */ "./src/components/fetch-utils/fetchPost.js");\n\n\n\n//oh man this looks really not well done, it works so i will leave it\nfunction FindAccount() {\n  const [errorOcurred, setErrorOcurred] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [accountFound, setAccountFound] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [accountUsername, setAccountUsername] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [emailSendSuccess, setEmailSendSuccess] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [emailLoading, setEmailLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  async function searchAccount() {\n    try {\n      let usernameOrEmail = document.getElementById("username-email").value;\n      let queryString = "/api/find-account?";\n      if (usernameOrEmail.includes("@")) {\n        queryString += `email=${usernameOrEmail}`;\n      } else {\n        queryString += `username=${usernameOrEmail}`;\n      }\n      const searchResponse = await fetch(queryString);\n      if (searchResponse.ok) {\n        const response = await searchResponse.json();\n        setAccountUsername(response.username);\n        setAccountFound(true);\n      } else {\n        setAccountFound(false);\n      }\n    } catch (error) {\n      console.log(error);\n      setErrorOcurred(true);\n    }\n  }\n  async function sendEmail() {\n    setEmailLoading(true);\n    let emailResponse = await (0,_fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_1__.sendNewPasswordEmail)(accountUsername);\n    if (emailResponse.error) {\n      setErrorOcurred(true);\n      console.log(emailResponse.error);\n      setEmailLoading(false);\n      return;\n    }\n    if (emailResponse.status === 200) {\n      setEmailSendSuccess(true);\n    } else {\n      setEmailSendSuccess(false);\n    }\n    setEmailLoading(false);\n  }\n  function resetPage() {\n    setAccountFound(null);\n    setAccountUsername(null);\n  }\n  if (accountFound === true) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "card shadow mx-auto my-5 rounded-15",\n      style: {\n        width: "30rem"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "my-3",\n      style: {\n        display: "flex"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("h6", {\n      style: {\n        margin: "auto",\n        fontSize: "40px"\n      }\n    }, "Account Found")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("hr", {\n      className: "mt-2"\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "mt-3 px-3"\n    }, emailLoading && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "alert alert-secondary d-flex justify-content-center"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("small", null, "Sending email...")), emailSendSuccess === true && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "alert alert-success"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("small", null, "Email sent successfully, please follow the instructions in the email")), errorOcurred === true && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "alert alert-danger"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("small", null, "Error occured, please contact admin or try again"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "px-3"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", null, "This account was found: ", accountUsername), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", null, "We can send an email to reset the password")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "mt-3 px-3"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n      className: "btn btn-primary float-left",\n      style: {\n        width: "48%"\n      },\n      onClick: resetPage\n    }, "Search again"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n      className: "btn btn-primary ms-3",\n      style: {\n        width: "48%"\n      },\n      onClick: sendEmail\n    }, "Send email")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "container d-flex justify-content-center mt-2 mb-2 px-3"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a", {\n      href: "/contact"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("small", null, "Contact admin")))));\n  } else {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "card shadow mx-auto my-5 rounded-15",\n      style: {\n        width: "30rem"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "my-3",\n      style: {\n        display: "flex"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("h6", {\n      style: {\n        margin: "auto",\n        fontSize: "40px"\n      }\n    }, "Find my Account")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("hr", {\n      className: "mt-2"\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "mt-3 px-3"\n    }, accountFound === false && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "alert alert-danger"\n    }, "Account not found, please try again")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "input-group px-3  mx-auto"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n      type: "text",\n      className: "form-control",\n      placeholder: "Username or email",\n      id: "username-email"\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n      className: "input-group mt-3 px-3 mx-auto"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n      className: "btn btn-primary btn-block",\n      onClick: searchAccount\n    }, "Find Account"))));\n  }\n}\n\n//# sourceURL=webpack://frontend/./src/components/FindAccountPage.js?')}}]);