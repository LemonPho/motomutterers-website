"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[192,446,657,807],{807:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(540);class o extends n.Component{constructor(e){super(e)}render(){return n.createElement("p",null,"Error page not found")}}const r=o},192:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i,useSeasonCreateContext:()=>l});var n=a(540),o=a(767),r=a(974),s=a(946);const c=(0,n.createContext)();function i(){const{setErrorMessage:e}=(0,s.Xn)(),[t,a]=(0,n.useState)(!1),[i,l]=(0,n.useState)([]);return n.createElement(c.Provider,{value:{seasons:i,seasonsLoading:t,retrieveSeasons:async function(){let t=await(0,r.a)();if(t.error)return console.log(t.error),void e("There was an error loading the seasons");l(t.seasons),a(!1)}}},n.createElement(o.sv,null))}function l(){return(0,n.useContext)(c)}},446:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l,useSeasonContext:()=>m});var n=a(540),o=a(974),r=a(767),s=a(398),c=a(946);a(192);const i=(0,n.createContext)();function l(){const{setErrorMessage:e,setSuccessMessage:t,setLoadingMessage:a,resetApplicationMessages:l}=(0,c.Xn)(),m=(0,r.g)().seasonYear,[d,u]=(0,n.useState)(null),[p,g]=(0,n.useState)(!1);async function h(){const t=await(0,o.oK)(m);let a={};return 404===t.status?(u(!1),g(!1),void e("Season not found")):t.error||200!=t.status?(e("There was an error loading the season"),g(!1),void console.log(t.error)):(a=t.season,a.competitorsSortedNumber=t.competitorsSortedNumber,u(a),void g(!1))}return n.createElement(i.Provider,{value:{season:d,seasonLoading:p,retrieveSeason:h,deleteSeason:async function(){const a=await(0,s.Hs)(d.id);200!=a.status||a.error?e("There was an error deleting the season"):(t("Season deleted"),u(null))},createSeasonRace:async function(a){l();const n=await(0,s.Ir)(a);return n.error||200!=n.status?(e("There was an error creating the race"),console.log(n.error),!1):(t("Race created"),h(),!0)},addSeasonRaceResults:async function(a){l();const n=await(0,s.yN)(a);return n.error?(e("There was an error adding the results"),console.log(n.error),!1):200!=n.status?(e("Be sure that the information inputted is correct"),!1):(t("Race result saved"),h(),!0)},editSeasonRace:async function(a){l();let n=await(0,s._O)(a);return n.error?(e("There was an error editing the race"),console.log(n.error),!1):200!=n.status?(e("Be sure the information is valid"),!1):(t("Changes saved"),h(),!0)},deleteSeasonRace:async function(n){l(),a("Loading...");let o=await(0,s.DK)(n,m);if(o.error||200!=o.status)return console.log(o.error),e("There was an error deleting the race"),void e("There was an error deleting the race");a(!1),t("Race deleted"),h()},createSeasonCompetitor:async function(a){l();const n=await(0,s.To)(a);return n.error?(e("There was an error submiting the competitor"),console.log(n.error),!1):n.riderExists?(e("A rider with that number already exists"),!1):n.seasonNotFound?(e("The season was not found of which you want to add the competitor"),!1):201!=n.status?(e("Make sure the information is correct and valid"),!1):(t("Rider created"),h(),!0)},editSeasonCompetitor:async function(a){l();const n=await(0,s.qZ)(a);return n.error?(console.log(n.error),e("There was an error editing the rider"),!1):200!=n.status?(e("Make sure the information is valid"),!1):(t("Changes saved"),h(),!0)},deleteSeasonCompetitor:async function(a,n){l();const o=await(0,s.Se)(a,n);return o.error?(e("There was an error deleting the rider"),console.log(o.error),!1):422==o.status?(e("The competitor is being used in picks or a race, please edit instead of deleting"),!1):200!=o.status?(e("There was an error deleting the competitor"),!1):(t("Rider deleted"),h(),!0)}}},n.createElement(r.sv,null))}function m(){return(0,n.useContext)(i)}},657:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var n=a(540),o=a(446),r=(a(807),a(974)),s=a(926),c=a(946);function i(){const{createSeasonCompetitor:e,season:t}=(0,o.useSeasonContext)(),{setModalErrorMessage:a,modalErrorMessage:r,resetApplicationMessages:i}=(0,c.Xn)(),[l,m]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[p,g]=(0,n.useState)(!1),[h,E]=(0,n.useState)(!1),[f,v]=(0,n.useState)(1),[b,N]=(0,n.useState)(0);function y(e){const t=e.currentTarget.id;"competitor-edit-number"==t||"competitor-create-number"==t?v(e.currentTarget.value):"competitor-edit-points"==t||"competitor-create-points"==t?N(e.currentTarget.value):"competitor-edit-independent"==t||"competitor-create-independent"==t?g(e.currentTarget.checked):"competitor-edit-first"==t||"competitor-create-first"==t?m(e.currentTarget.innerHTML):"competitor-edit-last"==t||"competitor-create-last"==t?u(e.currentTarget.innerHTML):"competitor-edit-rookie"!=t&&"competitor-create-rookie"!=t||E(e.currentTarget.checked)}async function k(){i();let a={first:null,last:null,number:null},n={competitor:a,points:null},o={competitor_points:n,independent:null,rookie:null,season:t.year};a.first=l,a.last=d,a.number=f,n.points=b,n.competitor=a,o.independent=p,o.rookie=h,o.competitor_points=n,await e(o)&&((0,s.tI)(),retrieveSeason())}return n.createElement("div",{className:"custom-modal hidden",id:"competitor-create-manual-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Create rider")),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},r&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,r)),n.createElement("div",{id:"competitor-create-first",className:"input-field mt-2",contentEditable:!0,"data-placeholder":"First name...","data-category":"input-field",autoFocus:!0,onKeyUp:e=>(0,s.ac)(e,k),onInput:e=>y(e)}),n.createElement("div",{id:"competitor-create-last",className:"input-field mt-2",contentEditable:!0,"data-placeholder":"Last name(s)...","data-category":"input-field",onKeyUp:e=>(0,s.ac)(e,k),onInput:e=>y(e)}),n.createElement("div",{className:"d-flex justify-content-around my-2"},n.createElement("input",{id:"competitor-create-number",className:"input-field flex-grow-1 me-1",type:"number",min:"1",max:"99",step:"1",placeholder:"Number","data-category":"input-field",onChange:e=>y(e),onKeyUp:e=>(0,s.ac)(e,k)}),n.createElement("input",{id:"competitor-create-points",className:"input-field flex-grow-1",type:"number",min:"0",max:"999",step:"1",placeholder:"Points","data-category":"input-field",onChange:e=>y(e),onKeyUp:e=>(0,s.ac)(e,k)})),n.createElement("form",{className:"form-check"},n.createElement("input",{id:"competitor-create-independent",type:"checkbox",className:"form-check-input",value:"","data-category":"input-field",onChange:e=>y(e),onKeyUp:e=>(0,s.ac)(e,k)}),n.createElement("label",{className:"form-check-label ms-1",htmlFor:"competitor-create-independent"},"Independent Rider")),n.createElement("form",{className:"form-check"},n.createElement("input",{id:"competitor-create-rookie",type:"checkbox",className:"form-check-input",value:"","data-category":"input-field",onChange:e=>y(e),onKeyUp:e=>(0,s.ac)(e,k)}),n.createElement("label",{className:"form-check-label ms-1",htmlFor:"competitor-create-rookie"},"Rookie Rider"))),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{id:"competitor-create-button",className:"btn btn-primary me-auto rounded-15 w-100",onClick:k},"Create rider")))}var l=a(398);function m(){const{setErrorMessage:e,loadingMessage:t,setLoadingMessage:a,setSuccessMessage:r,resetApplicationMessages:i}=(0,c.Xn)(),{retrieveSeason:m,season:d}=(0,o.useSeasonContext)();async function u(){i(),a("Loading...");let t=document.getElementById("competitor-automatic-link").innerHTML;const n=await(0,l.ZR)(t,d.year);a(!1),n.error?e("There was an error processing the riders, try again later"):n.invalidLink?e("Incorrect link, be sure its coppied correctly"):n.invalidSeason?e("Could not find the season in the database"):n.timeout?e("MotoGP website didn't load"):400!=n.status?((0,s.tI)(),m(),r("Riders successfully added")):e("There was an error adding the riders")}return n.createElement("div",{id:"competitor-create-standings-modal",className:"custom-modal hidden",onClick:e=>e.stopPropagation()},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Create rider automatic")),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",{className:"alert alert-info"},n.createElement("small",null,"Paste the link of the motogp.com standings page")),n.createElement("div",{className:"input-field",id:"competitor-automatic-link",contentEditable:!0,role:"textbox","data-placeholder":"Link...","data-category":"input-field",onClick:e=>{(0,s.Gd)("competitor-automatic-link"),e.stopPropagation()},onKeyUp:e=>{(0,s.ac)(e,u)}})),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{className:"btn btn-primary rounded-15 w-100",onClick:u},"Submit")))}function d(){const{modalErrorMessage:e,setErrorMessage:t,resetApplicationMessages:a,setLoadingMessage:r,loadingMessage:d,setSuccessMessage:u}=(0,c.Xn)(),{retrieveSeason:p,season:g}=(0,o.useSeasonContext)();return n.createElement("div",{className:"ms-auto"},n.createElement("div",{className:"custom-modal hidden",id:"competitor-create-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-body"},e&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,e)),n.createElement("div",{className:"card rounded-15 clickable mb-2",onClick:e=>{a(),(0,s.YK)("competitor-create-standings-modal",e)}},n.createElement("div",{className:"card-body"},n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("strong",null,"Retrieve season riders through motogp standings page")))),n.createElement("div",{className:"card rounded-15 clickable mb-2",onClick:async function(){a(),r("Loading...");const e=await(0,l.ZR)("https://www.motogp.com/en/riders/motogp",g.year);r(!1),e.error?t("There was an error processing the riders, try again later"):e.invalidLink?t("Incorrect link, be sure its coppied correctly"):e.invalidSeason?t("Could not find the season in the database"):e.timeout?t("MotoGP website didn't load"):400!=e.status?((0,s.tI)(),p(),u("Riders successfully added")):t("There was an error adding the riders")}},n.createElement("div",{className:"card-body"},n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("strong",null,"Retrieve season riders through motogp rider list")))),n.createElement("div",{className:"card rounded-15 clickable",onClick:e=>{a(),(0,s.YK)("competitor-create-manual-modal",e)}},n.createElement("div",{className:"card-body"},n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("strong",null,"Create riders manually")))))),n.createElement(m,null),n.createElement(i,null))}function u({reset:e}){const{season:t,seasonLoading:a,retrieveSeason:r}=(0,o.useSeasonContext)(),{user:i,setLoadingMessage:m,loadingMessage:d,setErrorMessage:u,setSuccessMessage:p}=(0,c.Xn)(),[g,h]=(0,n.useState)(t.competitors_sorted_number.map((e=>({competitor:e,selected:!1})))),[E,f]=(0,n.useState)(!1),[v,b]=(0,n.useState)(!1),[N,y]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{e&&(y(!0),a||(f(!1),h(t.competitors_sorted_number.map((e=>({competitor:e,selected:!1})))),b(!1),y(!1)))}),[e]),N?n.createElement("div",{className:"custom-modal hidden",id:"competitor-delete-modal"}):n.createElement("div",{className:"custom-modal hidden",id:"competitor-delete-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header"},n.createElement("h5",null,"Delete Riders")),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",{id:"select-all-competitors-container"},n.createElement("input",{type:"checkbox",className:"form-check-input me-2",id:"select-all-competitors",checked:E,onChange:()=>{h((e=>e.map((e=>({competitor:e.competitor,selected:!E}))))),f(!E),b(!1)}}),n.createElement("label",{htmlFor:"select-all-competitors"},"Select all riders")),g.map(((e,t)=>n.createElement("div",{key:`delete-competitor-${e.competitor.id}`},n.createElement("input",{type:"checkbox",className:"form-check-input me-2","data-category":"input-field",id:`checkbox-competitor-${e.competitor.id}`,checked:e.selected,onChange:()=>{var e;e=t,h((t=>t.map(((t,a)=>a==e?{competitor:t.competitor,selected:!t.selected}:{competitor:t.competitor,selected:t.selected})))),b(!1)}}),n.createElement("label",{htmlFor:`checkbox-competitor-${e.competitor.id}`},"#",e.competitor.competitor_points.competitor.number," ",e.competitor.competitor_points.competitor.first," ",e.competitor.competitor_points.competitor.last))))),n.createElement("div",{className:"custom-modal-footer d-flex flex-column"},d?n.createElement("button",{className:"btn btn-danger rounded-15 mb-2",disabled:!0},`${d}`):n.createElement("button",{className:"btn btn-danger rounded-15 mb-2",onClick:async function(){if(!v)return void b(!0);m("Loading..."),console.log(g);const e=g.filter((e=>1==e.selected)).map((e=>e.competitor.id)),a=await(0,l.lI)(e,t.id);if(m(!1),!a.error)return 422==a.status?(u("One or more riders are already included in a race or picks, ones that weren't were deleted"),(0,s.tI)(),void r()):void(201==a.status?(p("Riders deleted"),(0,s.tI)(),r()):u("There was an error deleting the riders"));u("There was an error deleting the competitors")}},v?"Click again to delete":"Delete"),n.createElement("button",{className:"btn btn-light rounded-15",onClick:s.tI},"Cancel")))}function p(){const{season:e,seasonLoading:t,createSeasonCompetitor:a,editSeasonCompetitor:i,deleteSeasonCompetitor:l,retrieveSeason:m}=(0,o.useSeasonContext)(),{resetApplicationMessages:p,modalErrorMessage:g,setModalErrorMessage:h,loadingMessage:E,setLoadingMessage:f,setSuccessMessage:v,user:b}=(0,c.Xn)(),[N,y]=(0,n.useState)({}),[k,w]=(0,n.useState)(0),[S,C]=(0,n.useState)(0),[x,T]=(0,n.useState)(""),[M,_]=(0,n.useState)(""),[R,L]=(0,n.useState)(!1),[I,K]=(0,n.useState)(!1),[P,z]=(0,n.useState)(!1);function F(e){const t=e.currentTarget.id;"competitor-edit-number"==t||"competitor-create-number"==t?w(e.currentTarget.value):"competitor-edit-points"==t||"competitor-create-points"==t?C(e.currentTarget.value):"competitor-edit-independent"==t||"competitor-create-independent"==t?L(e.currentTarget.checked):"competitor-edit-first"==t||"competitor-create-first"==t?T(e.currentTarget.innerHTML):"competitor-edit-last"==t||"competitor-create-last"==t?_(e.currentTarget.innerHTML):"competitor-edit-rookie"!=t&&"competitor-create-rooie"!=t||K(e.currentTarget.checked)}async function U(){p();let e={id:null,first:null,last:null,number:null},t={competitor:e,points:null,id:null},a={id:null,competitorPoints:t,independent:null,rookie:null};e.first=x,e.last=M,e.number=k,e.id=N.competitor_points.competitor.id,t.points=S,t.id=N.competitor_points.id,a.id=N.id,a.competitorPoints=t,a.independent=R,a.rookie=I,await i(a)?(0,s.tI)():h("There was an error while submiting the edited competitor")}return t?n.createElement("div",{className:"p-3"},"Loading..."):n.createElement("div",null,n.createElement("div",{className:"card-header rounded-15-top"},n.createElement("div",{className:"container",style:{paddingLeft:"0px",paddingRight:"0px"}},n.createElement("div",{className:"d-flex"},n.createElement("h3",null,"Riders"),!e.finalized&&n.createElement("div",{className:"ms-auto"},n.createElement("button",{className:"btn",id:"create-competitor-button",onClick:e=>(0,s.YK)("competitor-create-modal",e)},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"blue",className:"bi bi-plus",viewBox:"0 0 16 16"},n.createElement("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"}))),n.createElement("button",{className:"btn"},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"red",className:"bi bi-trash",viewBox:"0 0 16 16",onClick:e=>{return t=e,z(!0),(0,s.YK)("competitor-delete-modal",t,b.is_logged_in,b.is_admin),void setTimeout((()=>z(!1)),0);var t}},n.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),n.createElement("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"}))))))),n.createElement("div",{className:"card-body",style:{padding:"0.5rem"}},n.createElement("div",{className:"container mb-2"},0!=e.competitors.length&&n.createElement("div",{className:"row"},n.createElement("div",{className:"col-1"},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"currentColor",className:"bi bi-pen",viewBox:"0 0 16 16"},n.createElement("path",{d:"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z"}))),n.createElement("span",{className:"col-5"},"Name"),n.createElement("span",{className:"col-3"},"#"),n.createElement("span",{className:"col-3"},"Points")),e.competitors.map((e=>n.createElement("div",{className:"row",key:`competitor-${e.id}`},n.createElement("div",{id:"edit-competitor-button",className:"ms-auto dropdown-div col-1 d-flex align-items-center",onClick:t=>async function(e,t){p(),(0,s.YK)("competitor-edit-modal",t);const a=await(0,r.Si)(e);if(a.error)return h("There was an error editing the rider"),void console.log(a.error);404!=a.status?200==a.status?(y(a.competitor),w(a.competitor.competitor_points.competitor.number),C(a.competitor.competitor_points.points),T(a.competitor.competitor_points.competitor.first),_(a.competitor.competitor_points.competitor.last),L(a.competitor.independent),K(a.competitor.rookie),document.getElementById("competitor-edit-first").innerHTML=a.competitor.competitor_points.competitor.first,document.getElementById("competitor-edit-last").innerHTML=a.competitor.competitor_points.competitor.last):h("Be sure the rider number is unique to this season"):h("Rider was not found in the database")}(e.id,t)},n.createElement("div",null,n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16"},n.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"})))),n.createElement("span",{className:"col-5"},e.competitor_points.competitor.first," ",e.competitor_points.competitor.last),n.createElement("span",{className:"col-3"},e.competitor_points.competitor.number),n.createElement("span",{className:"col-3"},e.competitor_points.points)))))),n.createElement(d,null),n.createElement(u,{reset:P}),n.createElement("div",{className:"custom-modal hidden",id:"competitor-edit-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Edit rider")),g&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,g)),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",{id:"competitor-edit-first",className:"input-field mt-2",contentEditable:!0,"data-placeholder":"First name...","data-category":"input-field",onKeyUp:e=>(0,s.ac)(e,U),onInput:e=>F(e)}),n.createElement("div",{id:"competitor-edit-last",className:"input-field mt-2",contentEditable:!0,"data-placeholder":"Last name(s)...","data-category":"input-field",onKeyUp:e=>(0,s.ac)(e,U),onInput:e=>F(e)}),n.createElement("div",{className:"d-flex justify-content-around mt-2"},n.createElement("input",{id:"competitor-edit-number",className:"input-field flex-grow-1 me-1",type:"number",min:"1",max:"99",step:"1",placeholder:"Number",value:k,"data-category":"input-field",onChange:e=>F(e),onKeyUp:e=>(0,s.ac)(e,U)}),n.createElement("input",{id:"competitor-edit-points",className:"input-field flex-grow-1",type:"number",min:"0",max:"999",step:"1",placeholder:"Points",value:S,"data-category":"input-field",onChange:e=>F(e),onKeyUp:e=>(0,s.ac)(e,U)})),n.createElement("form",{className:"form-check"},n.createElement("input",{id:"competitor-edit-independent",type:"checkbox",className:"form-check-input",checked:R,"data-category":"input-field",onChange:e=>F(e),onKeyUp:e=>(0,s.ac)(e,U)}),n.createElement("label",{className:"form-check-label ms-1",htmlFor:"competitor-edit-independent"},"Independent Rider")),n.createElement("form",{className:"form-check"},n.createElement("input",{id:"competitor-edit-rookie",type:"checkbox",className:"form-check-input",checked:I,"data-category":"input-field",onChange:e=>F(e),onKeyUp:e=>(0,s.ac)(e,U)}),n.createElement("label",{className:"form-check-label ms-1",htmlFor:"competitor-edit-rookie"},"Rookie"))),n.createElement("div",{className:"custom-modal-footer d-flex flex-column"},n.createElement("button",{id:"competitor-edit-button",className:"btn btn-primary rounded-15 w-100",onClick:U},"Save Changes"),n.createElement("button",{id:"competitor-delete-button",className:"btn btn-outline-danger mt-2 rounded-15 w-100",onClick:()=>async function(t){p(),await l(t,e.id)&&(0,s.tI)()}(N.id)},"Delete Rider"))))}const g=(0,n.createContext)();function h({children:e}){const[t,a]=(0,n.useState)(""),[r,i]=(0,n.useState)(""),[m,d]=(0,n.useState)(""),[u,p]=(0,n.useState)(!1),[h,E]=(0,n.useState)(""),[f,v]=(0,n.useState)(""),[b,N]=(0,n.useState)(1),[y,k]=(0,n.useState)([]),[w,S]=(0,n.useState)([]),[C,x]=(0,n.useState)([]),{setErrorMessage:T,setSuccessMessage:M,setLoadingMessage:_}=(0,c.Xn)(),{season:R,retrieveSeason:L}=(0,o.useSeasonContext)();function I(){a(""),i(""),d(""),p(!1),k([]),S([]),x([]),E(""),v(""),N(1)}return n.createElement(g.Provider,{value:{track:t,title:r,timestamp:m,isSprint:u,setTrack:a,setTitle:i,setIsSprint:p,setTimestamp:d,setSelectedCompetitors:k,setCompetitorsPositions:S,competitorsPositions:w,selectedCompetitors:y,link:h,setLink:E,raceDate:f,setRaceDate:v,raceType:b,setRaceType:N,createRace:async function(){_("Loading..."),x([]);let e={race:{title:r,track:t,timestamp:m,is_sprint:u,finalized:!0},competitors_positions:w},a=await(0,l.jl)(e,R.year);return a.error?(console.log(a),void T("There was an error submiting the race")):a.competitorsNotFound.includes(!0)?(T("Highlighted competitors were not found in the database"),void x(a.competitorsNotFound)):0!=a.invalidCompetitorsPositionsSpacing.length?(T("Highlighted competitors have invalid spacing (positions) between them"),void x(a.invalidCompetitorsPositionsSpacing)):void(a.invalidCompetitorsPositions?T("Some or all competitor positions could not be created"):a.invalidSeason?T("There was an error retrieving the season from the database or it doesn't exist"):a.invalidRaceData?T("Some or all of the details of the race are bad (title, track, date, etc)"):400!==a.status?(I(),_(!1),M("Race successfully added"),(0,s.tI)(),L()):T("There was an error submiting the race"))},invalidCompetitors:C,resetVariables:I}},e)}function E(){return(0,n.useContext)(g)}function f(){const{setErrorMessage:e,setSuccessMessage:t,setLoadingMessage:a,resetApplicationMessages:r}=(0,c.Xn)(),{season:i,retrieveSeason:m}=(0,o.useSeasonContext)(),{link:d,raceDate:u,raceType:p,setLink:g,setRaceDate:h,setRaceType:f}=E();async function v(){r(),a("Loading...");let n=await(0,l.TR)(d,u,p,i.year);if(a(!1),n.error)return e("There was an error processing the link."),void console.log(n.error);if(n.invalidLink)e("The link is invalid or website didn't load.");else{if(n.competitorNumbersNotFound.length>0){let t="Competitors with the numbers: ";for(let e=0;e<n.competitorNumbersNotFound.length;e++)t+=String(n.competitorNumbersNotFound[e]),t+=" ";return t+="were not found in the database",void e(t)}n.timeout?e("Motosport website didn't load, try again later"):n.invalidSeason?e("Season was not found in the database"):n.invalidType?e("Race type was not valid (Upcoming, Final, Sprint)"):201==n.status?((0,s.tI)(),a(!1),t("The race has been submited"),m()):e("There was an error processing the link.")}}return n.createElement("div",{className:"custom-modal hidden",id:"race-create-automatic-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Create Race Automatic")),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",{className:"alert alert-info"},n.createElement("small",null,"Open the race result on motorsport.com and then paste the link into the textbox")),n.createElement("div",{className:"input-field",id:"race-automatic-link",contentEditable:!0,role:"textbox","data-placeholder":"Link...","data-category":"input-field",onInput:e=>{g(e.target.innerHTML)},onClick:e=>{(0,s.Gd)("race-automatic-link"),e.stopPropagation()},onKeyUp:e=>{(0,s.ac)(e,v)}}),n.createElement("div",{className:"d-flex justify-content-center align-items-center mt-2"},n.createElement("input",{id:"race-automatic-date",type:"date",className:"input-field","data-category":"input-field",onChange:e=>function(e){const t=e.target.value;h(t)}(e),onKeyUp:e=>{(0,s.ac)(e,v)}}),n.createElement("select",{className:"input-field ms-2","data-category":"input-field",onChange:e=>{f(e.target.value)}},n.createElement("option",{value:1},"Upcoming Race"),n.createElement("option",{value:2},"Finalized Race"),n.createElement("option",{value:3},"Sprint Race")))),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{className:"btn btn-primary rounded-15 w-100",onClick:v},"Submit")))}function v(){const{loggedIn:e,user:t,setErrorMessage:a,resetApplicationMessages:o}=(0,c.Xn)(),{track:r,title:i,timestamp:l,isSprint:m,setTrack:d,setTitle:u,setTimestamp:p,setIsSprint:g,resetVariables:h}=E();function f(n){""!=r&&""!=i&&0!=l?(o(),(0,s.YK)("competitors-select-modal",n,e,t.is_admin,!1)):a("Make sure the fields are filled in")}return n.createElement("div",{className:"custom-modal hidden",id:"create-race-details-manual-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Race Details")),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",{id:"race-create-track",className:"input-field mt-2","data-category":"input-field",contentEditable:!0,"data-placeholder":"Track name...",onKeyUp:e=>{(0,s.ac)(e,f),function(e){d(e.currentTarget.innerHTML)}(e)}}),n.createElement("div",{id:"race-create-title",className:"input-field mt-2","data-category":"input-field",contentEditable:!0,"data-placeholder":"Race title...",onKeyUp:e=>{(0,s.ac)(e,f),function(e){u(e.currentTarget.innerHTML)}(e)}}),n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("input",{id:"race-create-date",type:"date",className:"input-field flex-grow-1 mt-2","data-category":"input-field",onChange:e=>function(e){p(e.currentTarget.value)}(e),onKeyUp:e=>(0,s.ac)(e,f)})),n.createElement("div",{className:"form-check mt-1"},n.createElement("input",{id:"race-create-sprint",type:"checkbox",className:"form-check-input","data-category":"input-field",value:m,onChange:e=>function(e){g(e.currentTarget.checked)}(e),onKeyUp:e=>(0,s.ac)(e,f)}),n.createElement("label",{className:"form-check-label",htmlFor:"race-create-sprint"},"Sprint Race"))),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{className:"btn btn-primary rounded-15 w-100",onClick:e=>{f(e)}},"Next")))}function b(){const{season:e,seasonLoading:t}=(0,o.useSeasonContext)(),{user:a,resetApplicationMessages:r,setLoadingMessage:i}=(0,c.Xn)(),{createRace:l,invalidCompetitors:m,selectedCompetitors:d,competitorsPositions:u,setCompetitorsPositions:p}=E(),[g,h]=(0,n.useState)([]),[f,v]=(0,n.useState)(!0);function b(e,t){let a=u;a[t].position=Number(e.currentTarget.value),p(a)}if((0,n.useEffect)((()=>{v(!0),function(){h(d);const e=d.map((e=>({competitor_id:e.competitor_points.competitor.id,position:0})));p(e)}(),v(!1)}),[d]),!t&&!f)return n.createElement("div",{className:"custom-modal hidden",id:"race-results-create-manual-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Race Create Manual")),n.createElement("div",{className:"alert alert-info"},n.createElement("small",null,"Input the final positions of the riders, 0 for DNF")),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},0!=g.length&&g.map(((e,t)=>n.createElement("div",{key:`competitor-position-form-${e.competitor_points.competitor.number}`,className:"mb-1"},0!=m.length&&m.some((t=>t==e.competitor.id))?n.createElement("form",null,n.createElement("input",{className:"input-field me-2","data-category":"input-field",id:`competitor-position-${e.competitor_points.competitor.number}`,type:"number",max:99,min:0,defaultValue:0,onChange:e=>b(e,t)}),n.createElement("label",{className:"text-danger",htmlFor:`competitor-position-${e.competitor_points.competitor.number}`},"#",e.competitor_points.competitor.number," ",e.competitor_points.competitor.first," ",e.competitor_points.competitor.last)):n.createElement("form",null,n.createElement("input",{className:"input-field me-2","data-category":"input-field",id:`competitor-position-${e.competitor_points.competitor.number}`,type:"number",max:99,min:0,defaultValue:0,onChange:e=>b(e,t)}),n.createElement("label",{htmlFor:`competitor-position-${e.competitor_points.competitor.number}`},"#",e.competitor_points.competitor.number," ",e.competitor_points.competitor.first," ",e.competitor_points.competitor.last)))))),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{className:"btn btn-primary rounded-15",onClick:e=>{(0,s.YK)("competitors-select-modal",e,a.is_logged_in,a.is_admin,!1)}},"Back"),n.createElement("button",{className:"btn btn-primary rounded-15 ms-auto",onClick:async function(){r();let e=u;e.sort(((e,t)=>e.position-t.position)),p(e),await l()}},"Save race result")))}function N(){const[e,t]=(0,n.useState)([]),{season:a,seasonLoading:r}=(0,o.useSeasonContext)(),{user:i,resetApplicationMessages:l}=(0,c.Xn)(),{setSelectedCompetitors:m}=E();return(0,n.useEffect)((()=>{if(r)return;const e=a.competitors_sorted_number.map((e=>({competitor:e,include:!0})));t(e)}),[r]),n.createElement("div",{className:"custom-modal hidden",id:"competitors-select-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Select the riders that participated in the race")),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},0!=e.length&&e.map(((a,o)=>n.createElement("div",{className:"form-check",key:`competitor-checkbox-${a.competitor.id}`,id:`competitor-checkbox-${a.competitor.id}`},n.createElement("input",{className:"form-check-input","data-category":"input-field",type:"checkbox",checked:e[o].include,onChange:()=>{var e;e=o,t((t=>t.map(((t,a)=>a==e?{...t,include:!t.include}:t))))},id:`include-competitor-${a.competitor.competitor_points.competitor.id}`}),n.createElement("label",{className:"form-check-label",htmlFor:`include-competitor-${a.competitor.competitor_points.competitor.id}`},"#",a.competitor.competitor_points.competitor.number," ",a.competitor.competitor_points.competitor.first," ",a.competitor.competitor_points.competitor.last))))),n.createElement("div",{className:"custom-modal-footer mt-2"},n.createElement("button",{className:"btn btn-primary rounded-15",onClick:e=>{(0,s.YK)("create-race-details-manual-modal",e,i.is_logged_in,i.is_admin,!1)}},"Back"),n.createElement("button",{className:"btn btn-primary ms-auto rounded-15",onClick:t=>{!function(t){let a=[];for(let t=0;t<e.length;t++)e[t].include&&a.push(e[t].competitor);m(a),l(),(0,s.YK)("race-results-create-manual-modal",t,i.is_logged_in,i.is_admin,!1)}(t)}},"Next")))}function y(){const{modalErrorMessage:e,contextLoading:t,loggedIn:a,user:r}=(0,c.Xn)(),{season:s,seasonLoading:i}=(0,o.useSeasonContext)();if(!i&&!t)return n.createElement("div",null,n.createElement(v,null),n.createElement(b,null),n.createElement(N,null),n.createElement(b,null))}function k(){const{season:e,seasonLoading:t}=(0,o.useSeasonContext)(),{modalErrorMessage:a,setModalErrorMessage:r,resetApplicationMessages:i,loggedIn:l,user:m}=(0,c.Xn)(),{resetVariables:d}=E();return n.createElement("div",{className:"ms-auto"},n.createElement("div",{className:"custom-modal hidden",id:"race-create-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Create Race")),0==e.competitors.length&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,"You need to have competitors added to create a race")),0!=e.competitors.length&&n.createElement("div",null,a&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,a)),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",{className:"card rounded-15 clickable mb-2",onClick:e=>{d(),(0,s.YK)("race-create-automatic-modal",e,l,m.is_admin)}},n.createElement("div",{className:"card-body"},n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("strong",null,"Create race automatically with motorsport link")))),n.createElement("div",{className:"card rounded-15 clickable",onClick:e=>{d(),(0,s.YK)("create-race-details-manual-modal",e,l,m.is_admin)}},n.createElement("div",{className:"card-body"},n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("strong",null,"Create race manually"))))))),n.createElement(f,null),n.createElement(y,null))}const w=(0,n.createContext)();function S({children:e,raceId:t}){const{setModalErrorMessage:a,setSuccessMessage:i,resetApplicationMessages:m}=(0,c.Xn)(),{retrieveSeason:d}=(0,o.useSeasonContext)(),[u,p]=(0,n.useState)(""),[g,h]=(0,n.useState)(""),[E,f]=(0,n.useState)(""),[v,b]=(0,n.useState)(!1),[N,y]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{!async function(){y(!0),await async function(){if(m(),null==t)return;const e=await(0,r.YY)(t);200==e.status||201==e.status?(p(e.race.track),h(e.race.title),f(e.race.timestamp),b(e.race.is_sprint)):a("There was an error retrieving the race data")}(),y(!1)}()}),[t]),n.createElement(w.Provider,{value:{track:u,title:g,timestamp:E,isSprint:v,setTrack:p,setTitle:h,setTimestamp:f,setIsSprint:b,editRace:async function(){m();const e={title:g,track:u,timestamp:E,isSprint:v,id:t},n=await(0,l._O)(e);n.error||201!=n.status?a("There has been an error editing the race, make sure the data inputted is correct"):(i("Race edited"),d(),(0,s.tI)(),p(""),h(""),f(""),b(!1))},raceEditLoading:N}},e)}function C(){const{modalErrorMessage:e}=(0,c.Xn)(),{track:t,title:a,isSprint:o,timestamp:r,setTrack:i,setTitle:l,setIsSprint:m,setTimestamp:d,editRace:u,raceEditLoading:p}=(0,n.useContext)(w);async function g(){await u()}return(0,n.useEffect)((()=>{p||(document.getElementById("race-edit-track").innerHTML=t,document.getElementById("race-edit-title").innerHTML=a)}),[p]),n.createElement("div",{className:"custom-modal hidden",id:"race-edit-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Edit Race")),n.createElement("hr",null),e&&n.createElement("div",{className:"alert alert-danger"},n.createElement("small",null,e)),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",{id:"race-edit-track",className:"input-field mt-2","data-category":"input-field",contentEditable:!0,"data-placeholder":"Track name...",onKeyUp:e=>{(0,s.ac)(e,g),i(e.currentTarget.innerHTML)}}),n.createElement("div",{id:"race-edit-title",className:"input-field mt-2","data-category":"input-field",contentEditable:!0,"data-placeholder":"Race title...",onKeyUp:e=>{(0,s.ac)(e,g),l(e.currentTarget.innerHTML)}}),n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("input",{id:"race-edit-date",type:"date","data-category":"input-field",className:"input-field flex-grow-1 mt-2",value:r,onChange:e=>d(e.currentTarget.value),onKeyUp:e=>(0,s.ac)(e,g)})),n.createElement("div",{className:"form-check mt-1"},n.createElement("input",{id:"race-edit-sprint",type:"checkbox",className:"form-check-input","data-category":"input-field",checked:o,onChange:()=>{m(!o)},onKeyUp:e=>(0,s.ac)(e,g)}),n.createElement("label",{className:"form-check-label",htmlFor:"race-edit-sprint"},"Sprint Race"))),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{className:"btn btn-primary ms-auto",onClick:g},"Save changes")))}function x(){const{season:e,seasonLoading:t,retrieveSeason:a,editSeasonRace:i,deleteSeasonRace:m,createSeasonRace:d,addSeasonRaceResults:u}=(0,o.useSeasonContext)(),{setErrorMessage:p,setLoadingMessage:g,setSuccessMessage:E,resetApplicationMessages:f,loggedIn:v,user:b,successMessage:N}=(0,c.Xn)(),[y,w]=(0,n.useState)(null),[x,T]=(0,n.useState)(null),[M,_]=(0,n.useState)(!1);async function R(e,t){const a=await(0,r.YY)(t);if(a.error||200!=a.status)return console.log(a),void p("There was an error loading the race");_(a.race),(0,s.YK)("race-result-modal",e,v,b.is_admin)}return(0,n.useEffect)((()=>{"Race edited"==N&&w(null)}),[N]),t?n.createElement("div",{className:"p-3"},"Loading..."):n.createElement("div",null,n.createElement(h,null,n.createElement(k,null)),n.createElement(S,{raceId:y},n.createElement(C,null)),n.createElement("div",{className:"custom-modal hidden",id:"race-result-modal"},n.createElement("div",{className:"custom-modal-header"},M&&n.createElement("h5",null,M.title)),n.createElement("hr",null),n.createElement("div",{className:"custom-modal-body"},n.createElement("div",null,n.createElement("div",{className:"row g-0",style:{marginRight:"0px",padding:"0px"}},n.createElement("strong",{className:"col-2"},"Pos."),n.createElement("strong",{className:"col-6"},"Name")),M&&M.competitors_positions.map((e=>n.createElement("div",{className:"row g-0",key:`competitor-${e.competitor_id}`,style:{marginRight:"0px"}},0==e.position&&n.createElement("span",{className:"col-2"},"DNF"),0!=e.position&&n.createElement("span",{className:"col-2"},e.position),n.createElement("span",{className:"col-6"},n.createElement("small",null,"#",e.number)," ",e.first," ",e.last))))))),n.createElement("div",{className:"card-header rounded-15-top"},n.createElement("div",{className:"container",style:{paddingLeft:"0px",paddingRight:"0px"}},n.createElement("div",{className:"d-flex"},n.createElement("h3",null,"Races"),!e.finalized&&n.createElement("button",{className:"btn ms-auto",id:"create-race-button",onClick:e=>{f(),(0,s.YK)("race-create-modal",e,v,b.is_admin)}},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"blue",className:"bi bi-plus",viewBox:"0 0 16 16"},n.createElement("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})))))),n.createElement("div",{className:"card-body"},e.races.map(((t,o)=>n.createElement("div",{className:"container card rounded-15 clickable my-1",id:`race-${t.id}`,key:`race-${t.id}`,onClick:e=>R(e,t.id)},n.createElement("div",{className:"d-flex align-items-center"},n.createElement("div",{className:"container",style:{padding:"0px"}},n.createElement("div",null,t.title," ",t.is_sprint&&n.createElement("span",null,"(sprint)")),n.createElement("small",null,n.createElement("strong",null,t.timestamp))),t.finalized&&n.createElement("span",{className:"badge rounded-pill text-bg-success ms-auto clickable",onClick:e=>{R(e,t.id)}},"Final"),!t.finalized&&n.createElement("span",{className:"badge rounded-pill text-bg-secondary ms-auto clickable",onClick:e=>{openSelectCompetitorsModal(e),setTempRaceId(t.id)}},"Upcoming"),n.createElement("div",{className:"dropdown-div",onClick:e=>(0,s.gR)(`dropdown-race-${t.id}`,e)},n.createElement("div",{className:"d-flex align-items-center"},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16"},n.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}))),n.createElement("ul",{id:`dropdown-race-${t.id}`,className:"dropdown-menu"},n.createElement("li",null,n.createElement("button",{id:"edit-race-button",className:"dropdown-item",onClick:e=>{w(t.id),(0,s.YK)("race-edit-modal",e,v,b.is_admin)}},"Edit")),!t.finalized&&!t.has_url&&n.createElement("li",null,n.createElement("button",{id:"add-results-race-button",className:"dropdown-item",onClick:e=>{openSelectCompetitorsModal(e)}},"Add Results")),!t.finalized&&t.has_url&&n.createElement("li",null,n.createElement("button",{id:"retrieve-results-race-button",className:"dropdown-item",onClick:t=>{!async function(t){if(!e.races[t].has_url)return void p("The race has no url associated to it");g("Loading...");const n=await(0,l.$7)(e.races[t].id);n.error?(p("There was an error retrieving the race result"),g(!1)):400==n.status?(p("Be sure the race isn't already final"),g(!1)):404==n.status?(p("The race was not found"),g(!1)):408==n.status?(p("motorsport.com took too long to load"),g(!1)):422==n.status?(p("The server could not process the race result"),g(!1)):201!=n.status?(p("There was an error retrieving the race result"),g(!1)):(E("Results successfully retrieved"),g(!1),await a())}(o)}},"Retrieve Results")),t.finalized&&n.createElement("li",null,n.createElement("button",{id:"view-race-results-button",className:"dropdown-item",onClick:e=>R(e,t.id)},"View Race Results")),n.createElement("li",null,n.createElement("button",{className:"dropdown-item",onClick:()=>m(t.id)},"Delete"))))))))))}function T(){const{season:e,retrieveSeason:t}=(0,o.useSeasonContext)(),{setErrorMessage:a,setSuccessMessage:r,retrieveCurrentSeason:s,retrievePicksState:i,setLoadingMessage:m}=(0,c.Xn)(),[d,u]=(0,n.useState)(e.selection_open);return n.createElement("div",{className:"d-flex align-items-center w-100 ps-1"},n.createElement("strong",null,"Enable member picks"),!e.finalized&&e.current&&n.createElement("div",{className:"form-check form-switch ms-auto mb-0"},n.createElement("input",{className:"form-check-input",type:"checkbox",checked:d,onChange:async function(){if(0==e.competitors.length)return void a("Be sure to have competitors added before enabling member picks");m("Loading...");const n=await(0,l.Qz)();if(!n.error)return 200===n.status?(m(!1),r(`Member picks successfully ${e.selection_open?"disabled":"enabled"}.`),u(!e.selection_open),await t(),await s(),void await i()):void a("It was not possible to enable member picks");a("There was an error toggling the member picks.")}})),(e.finalized||!e.current)&&n.createElement("div",{className:"form-check form-switch ms-auto mb-0",onClick:e=>{e.stopPropagation(),a("You need to set this season as the current season to enable picks or finalize")}},n.createElement("input",{className:"form-check-input",type:"checkbox",checked:!1,disabled:!0})))}function M(){const{season:e}=(0,o.useSeasonContext)(),{setErrorMessage:t,setSuccessMessage:a,selectPicksState:r,contextLoading:i}=(0,c.Xn)(),[m,d]=(0,n.useState)(e.finalized);return n.createElement("div",{className:"d-flex align-items-center w-100 ps-1"},n.createElement("strong",null,"Finalize season"),m||!e.current&&n.createElement("div",{className:"form-check form-switch ms-auto mb-0",onClick:e=>{e.stopPropagation(),t("You need to set this season as the current season to enable picks or finalize")}},n.createElement("input",{className:"form-check-input",type:"checkbox",checked:m,disabled:!0})),!m&&e.current&&n.createElement("div",{className:"form-check form-switch ms-auto mb-0"},n.createElement("input",{className:"form-check-input",type:"checkbox",checked:m,onChange:e=>{(0,s.YK)("finalize-season-modal",e)}})),n.createElement("div",{className:"custom-modal hidden",id:"finalize-season-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Are you sure you want to finalize the season? This can't be reversed")),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{className:"btn btn-danger",onClick:n=>{!async function(){const n=await(0,l.ou)(e.year);if(!n.error)return 200==n.status?(a("Successfully finalized the season"),void d(!0)):void t("There was a problem finalizing the season");t("There was an error finalizing the season")}(),(0,s.YK)("finalize-season-modal",n)}},"Finalize"),n.createElement("button",{className:"ms-auto btn btn-primary",onClick:e=>{(0,s.YK)("finalize-season-modal",e)}},"Cancel"))))}function _(){const{season:e,retrieveSeason:t}=(0,o.useSeasonContext)(),{setErrorMessage:a,setSuccessMessage:r}=(0,c.Xn)();return n.createElement("div",{className:"d-flex align-items-center w-100 ps-1"},n.createElement("strong",null,"Set as current season"),n.createElement("div",{className:"ms-auto"},!e.current&&!e.finalized&&n.createElement("button",{className:"btn btn-outline-primary rounded-15",onClick:async function(){let n=await(0,l.rI)(e.year);if(n.error)return console.log(n.error),void a("There was an error submiting the current season");r(`Season: ${e.year} was set as the current season`),t()}},"Set as current season"),(e.current||e.finalized)&&n.createElement("button",{className:"btn btn-outline-secondary rounded-15",disabled:!0},"Already current season")))}var R=a(767);function L(){const{season:e,deleteSeason:t}=(0,o.useSeasonContext)(),{user:a,setErrorMessage:r,retrieveCurrentSeason:i}=(0,c.Xn)(),[l,m]=(0,n.useState)(""),d=(0,R.Zp)();return n.createElement(n.Fragment,null,n.createElement("div",{className:"d-flex align-items-center w-100 ps-1"},n.createElement("strong",null,"Delete season"),n.createElement("div",{className:"ms-auto"},n.createElement("button",{className:"btn btn-outline-danger rounded-15",onClick:e=>{(0,s.YK)("season-delete-modal",e,a.is_logged_in,a.is_admin),m("")}},"Delete season"))),n.createElement("div",{className:"custom-modal hidden",id:"season-delete-modal",onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Delete Season")),n.createElement("div",{className:"custom-modal-body"},n.createElement("input",{type:"text",className:"input-field w-100",placeholder:"Write the season year",onChange:e=>{!function(e){m(e.target.value)}(e)}})),n.createElement("div",{className:"custom-modal-footer d-flex flex-column"},n.createElement("button",{className:"btn btn-danger w-100 rounded-15",onClick:async function(){l==e.year?(await t(),(0,s.tI)(),d("/administration")):r("The season year is not correct")}},"Delete Season"),n.createElement("button",{className:"btn btn-light w-100 rounded-15 mt-2",onClick:s.tI},"Cancel"))))}function I(){const{retrieveSeason:e,season:t,seasonLoading:a}=(0,o.useSeasonContext)(),{contextLoading:r,user:s}=(0,c.Xn)();return(0,n.useEffect)((()=>{e()}),[]),a||r||!t?n.createElement("div",{className:"container",style:{padding:"0px"}},n.createElement("div",{className:"row"},n.createElement("div",{className:"card rounded-15 col-md me-2 mt-2 element-background-color element-border-color"},"Loading..."),n.createElement("div",{className:"card rounded-15 col-md mt-2 element-background-color element-border-color"},"Loading...")),n.createElement("div",{className:"row"},n.createElement("div",{className:"card rounded-15 col-md my-2 element-background-color element-border-color"},"Loading..."))):s.is_admin?n.createElement("div",null,n.createElement("div",{className:"container",style:{padding:"0px"}},n.createElement("div",{className:"row"},n.createElement("div",{className:"card rounded-15 col-md me-2 mb-2 element-background-color element-border-color",style:{padding:"0px"}},n.createElement(p,null)),n.createElement("div",{className:"card rounded-15 col-md mb-2 element-background-color element-border-color",style:{padding:"0px"}},n.createElement(x,null))),n.createElement("div",{className:"row"},n.createElement("div",{className:"card rounded-15 col-md element-background-color element-border-color",style:{padding:"10px"}},n.createElement(T,null),n.createElement("hr",null),n.createElement(M,null),n.createElement("hr",null),n.createElement(_,null),n.createElement("hr",null),n.createElement(L,null))))):void 0}}}]);