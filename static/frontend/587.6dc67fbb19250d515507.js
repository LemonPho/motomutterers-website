"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[587,192],{587:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var n=a(540),s=a(946),o=a(606),l=a(926),r=a(192);function c(){const e=(new Date).getFullYear(),{modalSuccessMessage:t,modalErrorMessage:a,setModalErrorMessage:c,setSuccessMessage:i,resetApplicationMessages:m,setLoadingMessage:d,loadingMessage:u}=(0,s.Xn)(),{retrieveSeasons:g}=(0,r.useSeasonCreateContext)(),[h,E]=(0,n.useState)(e),[p,v]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1);async function w(){m(),d("Loading...");let t=await(0,o.KE)(h,p,f);if(d(!1),t.error)return console.log(error),void c("There was an error creating the season");200===t.status?(i("Season created"),(0,l.tI)(),E(e),v(!1),y(!1),g()):c("Be sure the year of the season is unique")}return n.createElement("div",{className:"custom-modal hidden",id:"season-create-modal",onClick:e=>{e.stopPropagation()}},""!=a&&n.createElement("div",{className:"alert alert-danger my-2"},n.createElement("small",null,a)),""!=t&&n.createElement("div",{className:"alert alert-success my-2"},n.createElement("small",null,t)),u&&n.createElement("div",{className:"alert alert-secondary my-2"},n.createElement("small",null,u)),n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Create season")),n.createElement("div",{className:"custom-modal-body"},n.createElement("hr",null),n.createElement("div",{className:"d-flex justify-content-center w-100"},n.createElement("input",{className:"input-field",type:"number",min:"1900",max:"2099",step:"1",value:h,onChange:e=>function(e){const t=e.target.value;E(t)}(e),id:"season-year",onKeyUp:e=>enterKeySubmit(e,w)}),n.createElement("div",{className:"ms-2"},n.createElement("div",{className:"form-check"},n.createElement("input",{className:"form-check-input",id:"season-top-independent",type:"checkbox",value:p,onChange:e=>function(e){const t=e.target.checked;v(t)}(e)}),n.createElement("label",{className:"form-check-label",htmlFor:"season-top-independent"},"Top Independent")),n.createElement("div",{className:"form-check"},n.createElement("input",{className:"form-check-input",id:"season-top-rookie",type:"checkbox",value:f,onChange:e=>function(e){const t=e.target.checked;y(t)}(e)}),n.createElement("label",{className:"form-check-label",htmlFor:"season-top-rookie"},"Top Rookie"))))),n.createElement("div",{className:"custom-modal-footer justify-content-center"},n.createElement("button",{id:"submit-data",className:"btn btn-primary rounded-15",onClick:w},"Create season")))}function i(){const{errorMessage:e,successMessage:t,modalErrorMessage:a,modalSuccessMessage:i,setErrorMessage:m,setSuccessMessage:d,setModalErrorMessage:u,setModalSuccesMessage:g,resetApplicationMessages:h}=(0,s.Xn)(),{user:E,isLoggedIn:p,contextLoading:v}=(0,s.Xn)(),{seasons:f,seasonsLoading:y,retrieveSeasons:w}=(0,r.useSeasonCreateContext)(),[N,b]=(0,n.useState)();return(0,n.useEffect)((()=>{h(),w()}),[]),y||v?n.createElement("div",{className:"p-3"},"Loading..."):E.is_admin?n.createElement("div",null,n.createElement("div",{className:"card-header rounded-15-top"},n.createElement("div",{className:"d-flex align-items-center"},n.createElement("h3",{className:"m-0"},"Seasons editor"),f.length>0&&n.createElement("div",{className:"dropdown ms-auto"},n.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button",onClick:e=>(0,l.gR)("season-selector-dropdown",e,void 0)},"Current Season"),n.createElement("ul",{className:"dropdown-menu",id:"season-selector-dropdown"},f.map((e=>n.createElement("li",{className:"ms-2",key:`${e.year}`},n.createElement("a",{className:"link-button d-flex align-items-center",id:`${e.year}`,onClick:()=>{!async function(e){let t=await(0,o.rI)(e);if(t.error)return console.log(t.error),void m("There was an error submiting the current season");w()}(e.year)}},e.year,e.current&&n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"ms-auto me-1 bi bi-check",viewBox:"0 0 16 16"},n.createElement("path",{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"})))))))),n.createElement("button",{className:"ms-2 btn btn-outline-secondary ms-auto",id:"season-modal-button",onClick:e=>(0,l.YK)("season-create-modal",e,p,E.is_admin)},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"grey",className:"bi bi-plus",viewBox:"0 0 16 16"},n.createElement("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"}))))),n.createElement("div",{className:"custom-modal hidden",id:"season-delete-modal",onClick:e=>{e.stopPropagation()}},""!=a&&n.createElement("div",{className:"alert alert-danger my-2"},n.createElement("small",null,a)),""!=i&&n.createElement("div",{className:"alert alert-success my-2"},n.createElement("small",null,i)),n.createElement("div",{className:"custom-modal-header justify-content-center"},n.createElement("h5",null,"Are you sure you want to delete this season?")),n.createElement("div",{className:"custom-modal-body"},n.createElement("hr",null)),n.createElement("div",{className:"custom-modal-footer"},n.createElement("button",{id:"season-confirm-delete",className:"btn btn-danger me-auto rounded-15",onClick:e=>async function(e){h(),e.stopPropagation();let t=await(0,o.Hs)(N);t.error?u("There was an error deleting the season"):200==t.status&&((0,l.tI)(),w(),d("Season deleted"))}(e)},"Confirm"),n.createElement("button",{id:"season-cancel-delete",className:"btn btn-secondary ms-auto rounded-15",onClick:l.tI},"Cancel"))),f.map((e=>n.createElement("div",{className:"container my-2",id:`season-${e.year}`,key:`season-${e.year}`},n.createElement("div",{className:"p-2 d-flex"},n.createElement("a",{className:"link-no-decorations",href:`administration/seasons/${e.year}`},"Season ",e.year),n.createElement("div",{className:"ms-auto dropdown-div",onClick:t=>(0,l.gR)(`dropdown-season-${e.year}`,t)},n.createElement("div",null,n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16"},n.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}))),n.createElement("div",{id:`dropdown-season-${e.year}`,className:"dropdown-menu"},n.createElement("li",null,n.createElement("a",{className:"dropdown-item",href:`administration/seasons/${e.year}`},"Edit")),n.createElement("li",null,n.createElement("a",{className:"dropdown-item link-button",onClick:t=>{var a,n;a=t,n=e.id,b(n),(0,l.YK)("season-delete-modal",a,p,E.is_admin)}},"Delete")))))))),n.createElement(c,null)):n.createElement("div",null,"You don't have admin permissions")}function m(){const{user:e,contextLoading:t}=(0,s.Xn)();return t?null:e.is_admin?n.createElement("div",{className:"d-flex"},n.createElement("div",{className:"card m-2 rounded-15 flex-grow-1"},n.createElement(i,null))):n.createElement("div",null,"You don't have admin permissions")}},192:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c,useSeasonCreateContext:()=>i});var n=a(540),s=a(767),o=a(974),l=a(946);const r=(0,n.createContext)();function c(){const{setErrorMessage:e}=(0,l.Xn)(),[t,a]=(0,n.useState)(!1),[c,i]=(0,n.useState)([]);return n.createElement(r.Provider,{value:{seasons:c,seasonsLoading:t,retrieveSeasons:async function(){let t=await(0,o.zV)();if(t.error)return console.log(t.error),void e("There was an error loading the seasons");i(t.seasons),a(!1)}}},n.createElement(s.sv,null))}function i(){return(0,n.useContext)(r)}},926:(e,t,a)=>{function n(e,t,a){let n,s={pageNumbers:[],nextPage:"",previousPage:""},o=Math.ceil(e/t),l=0;if(e%t==0&&o++,n=o,e<=t)return null;for(s.previousPage=a>1?"page-item":"page-item disabled",s.nextPage=a<o?"page-item":"page-item disabled",a>5&&(o>a+5?(l=a-5,n=a+5):(l=10-(o-a),n=l+10));l<n;l++)s.pageNumbers.push(l+1);return s}function s(e,t){for(var a=e.split(","),n=a[0].match(/:(.*?);/)[1],s=atob(a[a.length-1]),o=s.length,l=new Uint8Array(o);o--;)l[o]=s.charCodeAt(o);return t=`${t}.${n.split("/")[1]}`,new File([l],t,{type:n})}function o(){return{width:window.innerWidth,height:window.innerHeight}}function l(){const e=document.getElementsByClassName("custom-modal"),t=document.getElementById("background-blur"),a=document.querySelectorAll('[data-category="input-field"]');Array.prototype.forEach.call(e,(e=>{e.classList.contains("hidden")||e.classList.toggle("hidden")})),Array.prototype.forEach.call(a,(e=>{"INPUT"===e.tagName?(e.value=null,e.checked=!1):e.innerHTML=""})),t.classList.contains("hidden")||t.classList.toggle("hidden")}function r(e,t,a,n){const s=document.getElementById(e),o=document.getElementById("background-blur");t.stopPropagation(),s.classList.contains("hidden")?void 0!==a&&!0!==a||void 0!==n&&!0!==n||(c(),l(),s.classList.toggle("hidden"),o.classList.toggle("hidden")):l()}function c(){const e=document.getElementsByClassName("dropdown-menu"),t=document.getElementsByClassName("menu-dropdown-content");Array.prototype.forEach.call(e,(e=>{e.classList.contains("show")&&e.classList.toggle("show")})),Array.prototype.forEach.call(t,(e=>{e.classList.contains("show")&&e.classList.toggle("show")}))}function i(e,t,a){t.stopPropagation();const n=document.getElementById(e);n.classList.contains("show")?c():(c(),null==e||null!=a&&1!=a||n.classList.toggle("show"))}function m(e,t){e.stopPropagation(),"Enter"==e.key&&(e.preventDefault(),t())}function d(e){const t=document.getElementById(e);t&&t.focus()}a.d(t,{Gd:()=>d,Tc:()=>c,X$:()=>n,Xz:()=>s,YK:()=>r,ac:()=>m,gR:()=>i,qT:()=>o,tI:()=>l})}}]);