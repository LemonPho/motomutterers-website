"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[98],{98:(e,n,t)=>{t.r(n),t.d(n,{default:()=>i,useAnnouncementContext:()=>m});var r=t(540),o=t(946),s=t(974),a=t(767),c=t(398);const u=(0,r.createContext)();function i(){const{setErrorMessage:e,setSuccessMessage:n,setModalErrorMessage:t,resetApplicationMessages:i}=(0,o.Xn)(),{announcementId:m}=(0,a.g)(),[l,d]=(0,r.useState)({}),[h,g]=(0,r.useState)({}),[f,v]=(0,r.useState)(!0);async function w(){if(v(!0),null===m)return void d(!1);const n=await(0,s.c$)(m);return 404==n.status?(d(!1),void v(!1)):n.error||200!=n.status?(console.log(n.error),e("There was an error loading the announcement"),void v(!1)):(d(n.announcement),g(n.comments),void v(!1))}return r.createElement(u.Provider,{value:{announcement:l,comments:h,retrieveAnnouncement:w,editAnnouncement:async function(t,r,o){const s=await(0,c.Q8)(t,r,o);if(s.error)return console.log(s.error),void e("There was an error saving the changes");400!==s.status?200!==s.status?e("There was an error saving the changes"):n("Announcement changes saved"):e("Be sure the title has a limit of 128 characters and the text 2048")},deleteAnnouncement:async function(t){const r=await(0,c.bt)(t);if(r.error||200!=r.status)return console.log(r.error),void e("There was an error deleting the announcement");n("Announcement successfully deleted")},announcementLoading:f,editComment:async function(n,t){const r=await(0,c.d1)(n,t);return r.error?(e("There was an error editing the comment"),console.log(r.error),!1):200!=r.status?(e("Comments have a max character count of 2048 characters"),!1):(w(),!0)},deleteComment:async function(n){const t=await(0,c.US)(n);if(t.error||200!=t.status)return e("There was an error deleting the comment"),void console.log(t.error);w()},createCommentReply:async function(n,t){const r=await(0,c.pg)(n,t,l.id);return r.error||200!=r.status?(e("Error submiting the comment"),console.log(r.error),!1):(w(),!0)},createComment:async function(n){i();const t=await(0,c.rw)(n,l.id);return t.error?(e("There was an error posting the comment"),console.log(t.error),!1):200!=t.status?(e("Comment is invalid"),!1):(w(),!0)}}},r.createElement(a.sv,null))}function m(){return(0,r.useContext)(u)}}}]);