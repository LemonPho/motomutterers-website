"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[98,368,807],{807:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var a=n(540);class l extends a.Component{constructor(e){super(e)}render(){return a.createElement("p",null,"Error page not found")}}const r=l},368:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(540),l=n(98),r=n(767),c=n(946),s=n(926),o=n(447);function m(){const{user:e,contextLoading:t,setErrorMessage:n}=(0,c.Xn)(),{retrieveComment:m,announcementLoading:i,editComment:d,createCommentReply:u,createComment:g,deleteComment:E,announcement:h}=(0,l.useAnnouncementContext)(),[p,v]=(0,a.useState)(null),[y,b]=(0,a.useState)(h.comments),[f,w]=(0,a.useState)(""),[x,N]=(0,a.useState)(""),[C,k]=(0,a.useState)(""),[L,$]=(0,a.useState)(""),B=(0,r.zy)();function I(e){null!==e&&document.getElementById(`comment-reply-div-${e}`).classList.toggle("hidden")}function S(e){const t=document.getElementById(`edit-comment-${e}-text`),n=document.getElementById(`comment-${e}-text`);if(null==t)return;const a=document.getElementById(`comment-${e}-save-button`),l=document.getElementById(`comment-${e}-cancel-button`);n.classList.toggle("hidden"),t.classList.toggle("hidden"),a.classList.toggle("hidden"),l.classList.toggle("hidden")}function A(e){const t=document.getElementById(`edit-reply-${e}-text`),n=document.getElementById(`reply-${e}-text`);if(null===t||null===n)return;const a=document.getElementById(`reply-${e}-save-button`),l=document.getElementById(`reply-${e}-cancel-button`);n.classList.toggle("hidden"),t.classList.toggle("hidden"),a.classList.toggle("hidden"),l.classList.toggle("hidden")}return(0,a.useEffect)((()=>{!function(){if(null===p)return;const e=document.getElementById(`comment-replies-${p}`);e.classList.contains("hidden")&&e.classList.toggle("hidden"),v(null)}()}),[p]),(0,a.useEffect)((()=>{i||function(){let e=new URLSearchParams(B.search);const t=e.get("comment"),n=e.get("response");if(null!=t&&null!==n){const e=document.getElementById(`comment-replies-${t}`),a=document.getElementById(`reply-${n}`);if(null==e||null==a)return;return e.classList.toggle("hidden"),a.scrollIntoView({behavior:"smooth"}),void a.classList.add("div-highlight")}if(null!==t){const e=document.getElementById(`comment-${t}`);if(null==e)return;e.scrollIntoView({behavior:"smooth",block:"start"}),e.classList.toggle("div-highlight")}}()}),[i]),i||t?null:a.createElement("div",{className:"card rounded-15 mt-2 element-background-color element-border-color",id:"comments-card"},a.createElement("div",{className:"card-header"},a.createElement("h5",null,"Comments")),a.createElement("div",{className:"card-body",id:"comments-view"},!0===e.is_logged_in?a.createElement("div",{className:"flex-box align-items-center"},a.createElement(o.A,{width:"3rem",height:"3rem",username:e.username}),a.createElement("textarea",{id:"comment-text",className:"input-field textarea-expand ms-2 w-100",rows:1,placeholder:"Write a comment...",onChange:e=>{(0,s.QL)(e.target)},onKeyUp:e=>{w(e.target.value)}}),a.createElement("button",{className:"btn btn-outline-secondary ms-2",onClick:async function(){""!=f&&g(f)&&(w(""),document.getElementById("comment-text").value="")}},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-send",viewBox:"0 0 16 16"},a.createElement("path",{d:"M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"})))):a.createElement("div",{className:"d-flex justify-content-center"},a.createElement("span",null,"Login in to write a comment")),a.createElement("hr",null),y?y.map((t=>null===t.parent_comment&&a.createElement("div",{id:`comment-${t.id}`,key:`comment-${t.id}`},a.createElement("div",{className:"d-flex align-items-start"},a.createElement(o.A,{width:"2.5rem",height:"2.5rem",username:t.user.username}),a.createElement("div",{className:"dynamic-container ms-2",style:{maxWidth:"calc(100% - 48px)"}},a.createElement("div",{className:"d-flex align-items-center"},a.createElement("a",{className:"link-no-decorations",href:`/users/${t.user.username}?page=1`},a.createElement("strong",null,t.user.username)),a.createElement("span",{className:"flex-item ms-2",style:{fontSize:"0.75rem"}},new Date(t.date_created).toISOString().substring(0,10)," ",new Date(t.date_created).toLocaleTimeString().substring(0,5)),t.edited&&a.createElement("small",{className:"ms-1"},"(edited)"),(e.id===t.user.id||1==e.is_admin)&&a.createElement("div",{className:"ms-auto dropdown-div d-flex align-items-start"},a.createElement("button",{id:"announcement-dropdown-button",className:"btn btn-link link-no-decorations ms-auto",style:{padding:"0"},onClick:e=>(0,s.gR)(`comment-${t.id}-dropdown`,e)},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16"},a.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}))),a.createElement("div",{id:`comment-${t.id}-dropdown`,className:"dropdown-menu"},a.createElement("li",null,a.createElement("button",{className:"dropdown-item",onClick:()=>S(t.id)},"Edit")),a.createElement("li",null,a.createElement("a",{className:"dropdown-item",onClick:()=>E(t.id)},"Delete"))))),a.createElement("div",{className:"break-line-text"},a.createElement("span",{id:`comment-${t.id}-text`,style:{overflow:"visible"},className:""},t.text),a.createElement("textarea",{id:`edit-comment-${t.id}-text`,className:"textarea-expand hidden input-field w-100",rows:1,defaultValue:t.text,onKeyUp:e=>{k(e.target.value)},onChange:e=>{(0,s.QL)(e.target)}})),e.id===t.user.id&&a.createElement("div",{className:"d-flex"},a.createElement("button",{id:`comment-${t.id}-save-button`,className:"btn btn-primary ms-auto me-2 mt-2 hidden",onClick:()=>async function(e){""!=C&&await d(C,e)&&(k(""),S(e))}(t.id)},"Save"),a.createElement("button",{id:`comment-${t.id}-cancel-button`,className:"btn btn-outline-secondary mt-2 hidden",onClick:()=>S(t.id)},"Cancel")),a.createElement("div",{className:"d-flex mb-3"},parseInt(t.amount_replies)>0&&a.createElement("button",{className:"btn btn-link link-no-decorations p-0 pe-1",style:{color:"blue"},onClick:()=>{var e;null!==(e=t.id)&&document.getElementById(`comment-replies-${e}`).classList.toggle("hidden")}},a.createElement("small",null,"Show ",t.amount_replies," replies")),!0===e.is_logged_in?a.createElement("button",{className:"btn btn-link link-no-decorations p-0",onClick:()=>I(t.id)},a.createElement("small",null,"Reply")):a.createElement("div",{className:"my-2"})))),a.createElement("div",{id:`comment-reply-div-${t.id}`,className:"hidden",style:{marginBottom:"0.5rem",marginLeft:"3.4rem"}},a.createElement("div",{className:"d-flex justify-content-center"},a.createElement("textarea",{id:`comment-reply-text-${t.id}`,role:"textbox",className:"input-field textarea-expand w-100",placeholder:"Add a reply...",rows:1,onClick:()=>(0,s.Gd)(`comment-reply-text-${t.id}`),onChange:e=>{(0,s.QL)(e.target)},onKeyUp:e=>{N(e.target.value)}}),a.createElement("button",{id:`comment-reply-button-${t.id}`,className:"btn btn-outline-secondary p-1 ms-2",onClick:()=>{!async function(e){""!=x&&u(x,e)&&(I(e),v(e),N(""),document.getElementById(`comment-reply-text-${e}`).value="")}(t.id)}},a.createElement("small",null,"Reply")))),a.createElement("div",{id:`comment-replies-${t.id}`,className:"dynamic-container hidden mb-3",style:{marginLeft:"2.7rem"}},t.replies.length>0&&t.replies.map((t=>a.createElement("div",{id:`reply-${t.id}`,key:`reply-${t.id}`,className:"dynamic-container mb-2",style:{marginLeft:"0px",maxWidth:"calc(100% - 2.7rem)"}},a.createElement("div",{className:"d-flex align-items-start"},a.createElement(o.A,{width:"1.5rem",height:"1.5rem",username:t.user.username}),a.createElement("div",{className:"dynamic-container"},a.createElement("div",{className:"d-flex align-items-center"},a.createElement("a",{className:"link-no-decorations ms-2",href:`/users/${t.user.username}?page=1`},a.createElement("small",null,a.createElement("strong",null,t.user.username))),a.createElement("span",{className:"ms-2",style:{fontSize:"0.75rem"}},new Date(t.date_created).toISOString().substring(0,10)," ",new Date(t.date_created).toLocaleTimeString().substring(0,5)),t.edited&&a.createElement("small",{className:"ms-1"},"(edited)"),e.id===t.user.id&&a.createElement("div",{className:"ms-auto dropdown-div d-flex align-items-start"},a.createElement("button",{id:"reply-dropdown-button",className:"btn btn-link link-no-decorations ms-auto",style:{padding:"0"},onClick:e=>(0,s.gR)(`reply-${t.id}-dropdown`,e)},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16"},a.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}))),a.createElement("div",{id:`reply-${t.id}-dropdown`,className:"dropdown-menu"},a.createElement("li",null,a.createElement("button",{className:"dropdown-item",onClick:()=>A(t.id)},"Edit")),a.createElement("li",null,a.createElement("a",{className:"dropdown-item",onClick:()=>E(t.id)},"Delete"))))),a.createElement("div",{className:"break-line-text my-1"},a.createElement("span",{id:`reply-${t.id}-text`,className:""},t.text),a.createElement("textarea",{rows:1,id:`edit-reply-${t.id}-text`,className:"textarea-expand input-field w-100 hidden",defaultValue:t.text,onChange:e=>(0,s.QL)(e.target),onKeyUp:e=>{$(e.target.value)}})))),e.id===t.user.id&&a.createElement("div",{className:"d-flex mt-2"},a.createElement("button",{id:`reply-${t.id}-save-button`,className:"btn btn-primary ms-auto me-2 hidden",onClick:()=>async function(e){""!=L&&await d(L,e)&&($(""),A(e))}(t.id)},"Save"),a.createElement("button",{id:`reply-${t.id}-cancel-button`,className:"btn btn-outline-secondary hidden",onClick:()=>A(t.id)},"Cancel"))))))))):a.createElement("div",{className:"d-flex justify-content-center"},a.createElement("span",null,"No comments have been posted yet"))))}var i=n(807);function d(){const{user:e,contextLoading:t}=(0,c.Xn)(),{announcement:n,editAnnouncement:r,retrieveAnnouncement:m,deleteAnnouncement:i}=(0,l.useAnnouncementContext)(),[d,u]=(0,a.useState)(!1);function g(){const e=document.getElementById("announcement-title"),t=document.getElementById("announcement-text"),n=document.getElementById("save-edit-announcement"),a=document.getElementById("cancel-edit-announcement");e.contentEditable="false"===e.contentEditable,t.contentEditable="false"===t.contentEditable,t.classList.toggle("input-field"),e.classList.toggle("input-field"),n.classList.toggle("hidden"),a.classList.toggle("hidden")}return t?null:a.createElement("div",null,d&&a.createElement("div",{className:"alert alert-secondary"},"Loading..."),a.createElement("div",{className:"card rounded-15 element-background-color element-border-color",id:"announcement-card"},a.createElement("div",{className:"card-header d-flex align-items-center p-3"},a.createElement("h3",{id:"announcement-title",className:"",contentEditable:!1},n.title),a.createElement("span",{className:"ms-2 me-2"},"â€¢"),a.createElement("a",{href:`/users/${n.user.username}?page=1`,className:"link-no-decorations"},a.createElement(o.A,{width:"2.75rem",height:"2.75rem",username:n.user.username}),a.createElement("span",{className:"ms-2"},a.createElement("strong",null,n.user.username))),e.is_admin&&a.createElement("div",{className:"ms-auto dropdown-div"},a.createElement("button",{id:"announcement-dropdown-button",className:"btn btn-link link-no-decorations ms-auto",onClick:e=>(0,s.gR)("dropdown-announcement",e)},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16"},a.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}))),a.createElement("div",{id:"dropdown-announcement",className:"dropdown-menu"},a.createElement("li",null,a.createElement("button",{className:"dropdown-item",onClick:g},"Edit")),a.createElement("li",null,a.createElement("a",{className:"dropdown-item",onClick:function(){u(!0),i(n.id),u(!1)}},"Delete"))))),a.createElement("div",{className:"break-line-text card-body"},a.createElement("div",{id:"announcement-text",className:"",contentEditable:!1},n.text)),a.createElement("div",{className:"d-flex mt-1"},a.createElement("button",{id:"save-edit-announcement",className:"btn btn-primary hidden m-2 rounded-15",onClick:function(){u(!0);const e=document.getElementById("announcement-title").innerHTML,t=document.getElementById("announcement-text").innerHTML;r(e,t,n.id),u(!1)}},"Save"),a.createElement("button",{id:"cancel-edit-announcement",className:"me-auto btn btn-secondary hidden m-2 rounded-15",onClick:function(){g(),m();const e=document.getElementById("announcement-title"),t=document.getElementById("announcement-text");e.innerHTML=n.title,t.innerHTML=n.text}},"Cancel"))))}function u(){const{announcement:e,announcementLoading:t,retrieveAnnouncement:n}=(0,l.useAnnouncementContext)();return(0,a.useEffect)((()=>{n()}),[]),t?null:e?a.createElement("div",{id:"announcement-view",className:"my-3"},a.createElement(d,null),a.createElement(m,null)):a.createElement(i.default,null)}},98:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m,useAnnouncementContext:()=>i});var a=n(540),l=n(946),r=n(974),c=n(767),s=n(398);const o=(0,a.createContext)();function m(){const{setErrorMessage:e,setSuccessMessage:t,setModalErrorMessage:n,resetApplicationMessages:m}=(0,l.Xn)(),{announcementId:i}=(0,c.g)(),[d,u]=(0,a.useState)({}),[g,E]=(0,a.useState)({}),[h,p]=(0,a.useState)(!0);async function v(){if(p(!0),null===i)return void u(!1);const t=await(0,r.c$)(i);return 404==t.status?(u(!1),void p(!1)):t.error||200!=t.status?(console.log(t.error),e("There was an error loading the announcement"),void p(!1)):(u(t.announcement),E(t.comments),void p(!1))}return a.createElement(o.Provider,{value:{announcement:d,comments:g,retrieveAnnouncement:v,editAnnouncement:async function(n,a,l){const r=await(0,s.Q8)(n,a,l);if(r.error)return console.log(r.error),void e("There was an error saving the changes");400!==r.status?200!==r.status?e("There was an error saving the changes"):t("Announcement changes saved"):e("Be sure the title has a limit of 128 characters and the text 2048")},deleteAnnouncement:async function(n){const a=await(0,s.bt)(n);if(a.error||200!=a.status)return console.log(a.error),void e("There was an error deleting the announcement");t("Announcement successfully deleted")},announcementLoading:h,editComment:async function(t,n){const a=await(0,s.d1)(t,n);return a.error?(e("There was an error editing the comment"),console.log(a.error),!1):200!=a.status?(e("Comments have a max character count of 2048 characters"),!1):(v(),!0)},deleteComment:async function(t){const n=await(0,s.US)(t);if(n.error||200!=n.status)return e("There was an error deleting the comment"),void console.log(n.error);v()},createCommentReply:async function(t,n){const a=await(0,s.pg)(t,n,d.id);return a.error||200!=a.status?(e("Error submiting the comment"),console.log(a.error),!1):(v(),!0)},createComment:async function(t){m();const n=await(0,s.rw)(t,d.id);return n.error?(e("There was an error posting the comment"),console.log(n.error),!1):200!=n.status?(e("Comment is invalid"),!1):(v(),!0)}}},a.createElement(c.sv,null))}function i(){return(0,a.useContext)(o)}}}]);