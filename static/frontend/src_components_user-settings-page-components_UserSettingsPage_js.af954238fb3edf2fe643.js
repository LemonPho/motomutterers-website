/*! For license information please see src_components_user-settings-page-components_UserSettingsPage_js.af954238fb3edf2fe643.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_components_user-settings-page-components_UserSettingsPage_js"],{"./src/components/user-settings-page-components/EmailSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ EmailSettings)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../fetch-utils/fetchPost */ "./src/components/fetch-utils/fetchPost.js");\n/* harmony import */ var _fetch_utils_fetchGet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../fetch-utils/fetchGet */ "./src/components/fetch-utils/fetchGet.js");\n/* harmony import */ var _ApplicationContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ApplicationContext */ "./src/components/ApplicationContext.js");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ "./src/components/utils.js");\n\n\n\n\n\nfunction EmailSettings() {\n  const [changeEmailLoading, setChangeEmailLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const {\n    user,\n    contextLoading,\n    setModalErrorMessage,\n    modalErrorMessage,\n    setSuccessMessage,\n    retrieveUserData,\n    resetApplicationMessages\n  } = (0,_ApplicationContext__WEBPACK_IMPORTED_MODULE_3__.useApplicationContext)();\n  async function postNewEmail() {\n    resetApplicationMessages();\n    setChangeEmailLoading(true);\n    const newEmail = document.getElementById("email-input").value;\n    const currentPassword = document.getElementById("password-email-input").value;\n    const emailResponse = await (0,_fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_1__.submitChangeEmail)(currentPassword, newEmail);\n    if (emailResponse.error) {\n      setModalErrorMessage("There was an error while submiting the new email");\n      setChangeEmailLoading(false);\n      return;\n    }\n    retrieveUserData();\n    if (emailResponse.status === 200) {\n      setSuccessMessage("Email changed, check your inbox for the verification link");\n      (0,_utils__WEBPACK_IMPORTED_MODULE_4__.closeModals)();\n      setChangeEmailLoading(false);\n      return;\n    }\n    let message = emailResponse.newEmailUnique ? "" : "Email is not unique\\n";\n    message += emailResponse.newEmailValid ? "" : "Email is not valid\\n";\n    message += emailResponse.currentPasswordCorrect ? "" : "Password is not correct\\n";\n    setModalErrorMessage(message);\n    console.log(message);\n    setChangeEmailLoading(false);\n  }\n  if (contextLoading) {\n    return null;\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "p-3 d-flex justify-content-center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "container"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("strong", {\n    style: {\n      fontSize: "20px"\n    }\n  }, "Email"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, user.email)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    id: "email-button",\n    className: "btn btn-outline-secondary rounded-15 align-self-center ml-auto",\n    onClick: e => {\n      (0,_utils__WEBPACK_IMPORTED_MODULE_4__.toggleModal)("email-modal", e);\n    }\n  }, "Change"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal hidden",\n    id: "email-modal",\n    onClick: e => {\n      e.stopPropagation();\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal-header"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("h5", null, "Change email"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    type: "button",\n    className: "btn btn-link link-no-decorations ms-auto",\n    id: "close-modal",\n    onClick: () => {\n      (0,_utils__WEBPACK_IMPORTED_MODULE_4__.closeModals)();\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", {\n    "aria-hidden": "true"\n  }, "\\xD7"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal-body"\n  }, modalErrorMessage && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "alert alert-danger",\n    style: {\n      whiteSpace: "pre-line"\n    }\n  }, modalErrorMessage), changeEmailLoading === true && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "alert alert-secondary"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "d-flex justify-content-center align-items-center"\n  }, "Loading...")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n    type: "password",\n    placeholder: "Current password",\n    className: "form-control",\n    id: "password-email-input",\n    onKeyUp: e => (0,_utils__WEBPACK_IMPORTED_MODULE_4__.enterKeySubmit)(e, postNewEmail)\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n    type: "text",\n    placeholder: "New email",\n    className: "form-control mt-2",\n    id: "email-input",\n    onKeyUp: e => (0,_utils__WEBPACK_IMPORTED_MODULE_4__.enterKeySubmit)(e, postNewEmail)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal-footer"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    id: "submit-data",\n    className: "btn btn-primary mr-auto",\n    onClick: e => {\n      e.stopPropagation();\n      postNewEmail();\n    }\n  }, "Save changes")))));\n}\n\n//# sourceURL=webpack://frontend/./src/components/user-settings-page-components/EmailSettings.js?')},"./src/components/user-settings-page-components/PasswordSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ PasswordSettings)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../fetch-utils/fetchPost */ "./src/components/fetch-utils/fetchPost.js");\n/* harmony import */ var _fetch_utils_fetchGet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../fetch-utils/fetchGet */ "./src/components/fetch-utils/fetchGet.js");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./src/components/utils.js");\n/* harmony import */ var _ApplicationContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ApplicationContext */ "./src/components/ApplicationContext.js");\n\n\n\n\n\n\nfunction PasswordSettings() {\n  const [changePasswordLoading, setChangePasswordLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const {\n    setLogout,\n    retrieveUserData,\n    contextLoading,\n    modalErrorMessage,\n    setModalErrorMessage,\n    setSuccessMessage,\n    resetApplicationMessages\n  } = (0,_ApplicationContext__WEBPACK_IMPORTED_MODULE_4__.useApplicationContext)();\n  async function postNewPassword() {\n    setChangePasswordLoading(true);\n    const newPassword = document.getElementById("password-input").value;\n    const currentPassword = document.getElementById("password-password-input").value;\n    const tokenResponse = await (0,_fetch_utils_fetchGet__WEBPACK_IMPORTED_MODULE_2__.getToken)();\n    let token;\n    if (tokenResponse.error) {\n      setModalErrorMessage("There was an error while submiting the new password");\n      console.log(error);\n      setChangePasswordLoading(false);\n      return;\n    }\n    token = tokenResponse.token;\n    const passwordResponse = await (0,_fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_1__.submitChangePassword)(token, currentPassword, newPassword);\n    if (passwordResponse.error) {\n      setModalErrorMessage("There was an error submiting the new password");\n      setChangePasswordLoading(false);\n      return;\n    }\n    if (passwordResponse.status === 400) {\n      let message = passwordResponse.newPasswordValid ? "" : "The password must be at least 8 characters and not easy to guess\\n";\n      message += passwordResponse.currentPasswordCorrect ? "" : "The current password is not correct\\n";\n      setModalErrorMessage(message);\n      setChangePasswordLoading(false);\n      return;\n    }\n    if (passwordResponse.status === 200) {\n      setChangePasswordLoading(false);\n      setSuccessMessage("The new password has been saved, log into your account again");\n      (0,_utils__WEBPACK_IMPORTED_MODULE_3__.closeModals)();\n      setLogout();\n      return;\n    }\n    setModalErrorMessage("There was an error submiting the new password");\n    setChangePasswordLoading(false);\n  }\n  if (contextLoading) {\n    return null;\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "p-3 d-flex justify-content-center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "container"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("strong", {\n    style: {\n      fontSize: "20px"\n    }\n  }, "Password"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, "\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    id: "password-button",\n    className: "btn btn-outline-secondary rounded-15 align-self-center ml-auto",\n    onClick: e => {\n      resetApplicationMessages();\n      (0,_utils__WEBPACK_IMPORTED_MODULE_3__.toggleModal)("password-modal", e);\n    }\n  }, "Change"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal hidden",\n    id: "password-modal",\n    onClick: e => {\n      e.stopPropagation();\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal-header"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("h5", null, "Change password"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    type: "button",\n    className: "ms-auto btn btn-link link-no-decorations",\n    id: "close-modal",\n    onClick: () => {\n      (0,_utils__WEBPACK_IMPORTED_MODULE_3__.closeModals)();\n      resetApplicationMessages();\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", {\n    "aria-hidden": "true"\n  }, "\\xD7"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal-body"\n  }, modalErrorMessage && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "alert alert-danger",\n    style: {\n      whiteSpace: "pre-line"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("small", null, modalErrorMessage)), changePasswordLoading === true && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "alert alert-secondary"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "d-flex justify-content-center align-items-center"\n  }, "Loading...")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n    type: "password",\n    placeholder: "Current password",\n    className: "form-control",\n    id: "password-password-input",\n    onKeyUp: e => (0,_utils__WEBPACK_IMPORTED_MODULE_3__.enterKeySubmit)(e, postNewPassword)\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n    type: "password",\n    placeholder: "New password",\n    className: "form-control mt-2",\n    id: "password-input",\n    onKeyUp: e => (0,_utils__WEBPACK_IMPORTED_MODULE_3__.enterKeySubmit)(e, postNewPassword)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal-footer"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    id: "submit-data",\n    className: "btn btn-primary mr-auto",\n    onClick: e => {\n      e.stopPropagation();\n      resetApplicationMessages();\n      postNewPassword();\n    }\n  }, "Save changes")))));\n}\n\n//# sourceURL=webpack://frontend/./src/components/user-settings-page-components/PasswordSettings.js?')},"./src/components/user-settings-page-components/ProfilePictureSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ ProfilePictureSettings)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./src/components/utils.js");\n/* harmony import */ var _fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../fetch-utils/fetchPost */ "./src/components/fetch-utils/fetchPost.js");\n/* harmony import */ var _fetch_utils_fetchGet__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../fetch-utils/fetchGet */ "./src/components/fetch-utils/fetchGet.js");\n/* harmony import */ var _ApplicationContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ApplicationContext */ "./src/components/ApplicationContext.js");\n\n\n\n\n\nfunction ProfilePictureSettings() {\n  const [errorOcurred, setErrorOcurred] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedPhoto, setSelectedPhoto] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [photoPreview, setPhotoPreview] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [changeProfilePictureLoading, setChangeProfilePictureLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const {\n    user,\n    contextLoading,\n    modalErrorMessage,\n    setModalErrorMessage,\n    setSuccessMessage,\n    retrieveUserData,\n    resetApplicationMessages\n  } = (0,_ApplicationContext__WEBPACK_IMPORTED_MODULE_4__.useApplicationContext)();\n\n  //change photo preview\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!selectedPhoto) {\n      setPhotoPreview(undefined);\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = () => {\n      const img = new Image();\n      img.onload = () => {\n        const canvas = document.createElement("canvas");\n        const ctx = canvas.getContext("2d");\n\n        //cropping image to center\n        let cropWidth, cropHeight, offsetX, offsetY;\n        if (img.width > img.height) {\n          cropWidth = img.height;\n          cropHeight = img.height;\n          offsetX = (img.width - img.height) / 2;\n          offsetY = 0;\n        } else {\n          cropWidth = img.width;\n          cropHeight = img.width;\n          offsetY = (img.height - img.width) / 2;\n          offsetX = 0;\n        }\n        canvas.width = cropWidth;\n        canvas.height = cropHeight;\n        ctx.drawImage(img, offsetX, offsetY, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);\n        const croppedImage = canvas.toDataURL(selectedPhoto.type);\n        setPhotoPreview(croppedImage);\n      };\n      img.src = reader.result;\n    };\n    reader.readAsDataURL(selectedPhoto);\n  }, [selectedPhoto]);\n  function changePhotoPreview(event) {\n    if (!event.target.files || event.target.files.length === 0) {\n      setSelectedPhoto(false);\n      return;\n    }\n    setSelectedPhoto(event.target.files[0]);\n  }\n  async function postNewProfilePicture() {\n    setChangeProfilePictureLoading(true);\n    const imageFile = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.dataURLtoFile)(photoPreview, "new-profile-picture");\n    const extensionString = imageFile.type;\n    const fileExtension = extensionString.match(/\\/([a-zA-Z]+)/)[1];\n    const formData = new FormData();\n    formData.append("profile_picture", imageFile);\n    const profilePictureResponse = await (0,_fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_2__.submitChangeProfilePicture)(formData, fileExtension);\n    if (profilePictureResponse.error) {\n      setModalErrorMessage("There was an error while submiting the new profile picture");\n      console.log(profilePictureResponse.error);\n      setChangeProfilePictureLoading(false);\n      return;\n    }\n    if (profilePictureResponse.status === 400) {\n      setModalErrorMessage("File format or another factor is invalid for a picture, be sure to use any common picture extensions");\n      setChangeProfilePictureLoading(false);\n      return;\n    }\n    if (profilePictureResponse.status === 200) {\n      setSuccessMessage("Profile picture changed");\n      (0,_utils__WEBPACK_IMPORTED_MODULE_1__.closeModals)();\n      setChangeProfilePictureLoading(false);\n      retrieveUserData();\n      setSelectedPhoto(false);\n      return;\n    }\n    setModalErrorMessage("There was an error when submiting the new profile picutre");\n    setChangeProfilePictureLoading(false);\n  }\n  if (contextLoading) {\n    return null;\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "p-3 d-flex justify-content-center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "container"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("strong", {\n    style: {\n      fontSize: "20px"\n    }\n  }, "Profile photo")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, user.profile_picture_data != "" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("img", {\n    id: "profile-picture-div",\n    style: {\n      width: "7rem",\n      height: "7rem"\n    },\n    className: "rounded-circle",\n    src: `data: image/${user.profile_picture_format}; base64, ${user.profile_picture_data}`,\n    alt: user.username\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    id: "profile-picture-button",\n    className: "btn btn-outline-secondary rounded-15 align-self-center",\n    onClick: e => {\n      resetApplicationMessages();\n      (0,_utils__WEBPACK_IMPORTED_MODULE_1__.toggleModal)("profile-picture-modal", e);\n    }\n  }, "Change"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal hidden",\n    id: "profile-picture-modal",\n    onClick: e => {\n      e.stopPropagation();\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal-header"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("h5", null, "Change profile picture"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    type: "button",\n    className: "btn btn-link link-no-decorations ms-auto",\n    id: "close-modal"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", {\n    onClick: e => {\n      resetApplicationMessages();\n      (0,_utils__WEBPACK_IMPORTED_MODULE_1__.closeModals)();\n      setPhotoPreview(undefined);\n    },\n    id: "close-modal",\n    "aria-hidden": "true"\n  }, "\\xD7"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal-body"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    style: {\n      position: "relative"\n    }\n  }, modalErrorMessage && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "alert alert-danger"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("small", null, modalErrorMessage)), changeProfilePictureLoading && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "alert alert-secondary"\n  }, "Loading..."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "d-flex justify-content-center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    style: {\n      position: "relative"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("label", null, selectedPhoto === false && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("img", {\n    className: "rounded-circle",\n    id: "edit-profile-photo",\n    style: {\n      width: "14rem",\n      height: "14rem"\n    },\n    src: `data: image/${user.profile_picture_format}; base64, ${user.profile_picture_data}`\n  }), selectedPhoto && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("img", {\n    className: "rounded-circle",\n    id: "edit-profile-photo",\n    style: {\n      width: "14rem",\n      height: "14rem"\n    },\n    src: photoPreview\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n    type: "file",\n    accept: "image/*",\n    onChange: changePhotoPreview\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "d-flex justify-content-center align-content-center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "edit-image-overlay rounded-circle",\n    style: {\n      backgroundColor: "rgba(0, 0, 0, 0.8)"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "w-100 h-100 d-flex justify-content-center align-items-center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("svg", {\n    xmlns: "http://www.w3.org/2000/svg",\n    style: {\n      width: "10rem",\n      height: "10rem"\n    },\n    width: "16",\n    height: "16",\n    fill: "white",\n    className: "bi bi-images",\n    viewBox: "0 0 16 16"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("path", {\n    d: "M4.502 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("path", {\n    d: "M14.002 13a2 2 0 0 1-2 2h-10a2 2 0 0 1-2-2V5A2 2 0 0 1 2 3a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v8a2 2 0 0 1-1.998 2zM14 2H4a1 1 0 0 0-1 1h9.002a2 2 0 0 1 2 2v7A1 1 0 0 0 15 11V3a1 1 0 0 0-1-1zM2.002 4a1 1 0 0 0-1 1v8l2.646-2.354a.5.5 0 0 1 .63-.062l2.66 1.773 3.71-3.71a.5.5 0 0 1 .577-.094l1.777 1.947V5a1 1 0 0 0-1-1h-10z"\n  })))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal-footer justify-content-center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    id: "submit-data",\n    className: "btn btn-primary",\n    onClick: e => {\n      e.stopPropagation();\n      resetApplicationMessages();\n      postNewProfilePicture();\n    }\n  }, "Save changes")))));\n}\n\n//# sourceURL=webpack://frontend/./src/components/user-settings-page-components/ProfilePictureSettings.js?')},"./src/components/user-settings-page-components/UserSettingsPage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ UserSettings)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var _ProfilePictureSettings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ProfilePictureSettings */ "./src/components/user-settings-page-components/ProfilePictureSettings.js");\n/* harmony import */ var _UsernameSettings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./UsernameSettings */ "./src/components/user-settings-page-components/UsernameSettings.js");\n/* harmony import */ var _EmailSettings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EmailSettings */ "./src/components/user-settings-page-components/EmailSettings.js");\n/* harmony import */ var _PasswordSettings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PasswordSettings */ "./src/components/user-settings-page-components/PasswordSettings.js");\n/* harmony import */ var _ApplicationContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ApplicationContext */ "./src/components/ApplicationContext.js");\n\n\n\n\n\n\n\nfunction UserSettings() {\n  const {\n    loggedIn,\n    contextLoading\n  } = (0,_ApplicationContext__WEBPACK_IMPORTED_MODULE_5__.useApplicationContext)();\n  if (contextLoading) {\n    return null;\n  }\n  if (!loggedIn) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_6__.Navigate, {\n      replace: true,\n      to: "/login"\n    }));\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "card rounded-15 my-3"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ProfilePictureSettings__WEBPACK_IMPORTED_MODULE_1__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("hr", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_UsernameSettings__WEBPACK_IMPORTED_MODULE_2__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("hr", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_EmailSettings__WEBPACK_IMPORTED_MODULE_3__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("hr", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_PasswordSettings__WEBPACK_IMPORTED_MODULE_4__["default"], null)));\n}\n\n//# sourceURL=webpack://frontend/./src/components/user-settings-page-components/UserSettingsPage.js?')},"./src/components/user-settings-page-components/UsernameSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ UsernameSettings)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../fetch-utils/fetchPost */ "./src/components/fetch-utils/fetchPost.js");\n/* harmony import */ var _fetch_utils_fetchGet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../fetch-utils/fetchGet */ "./src/components/fetch-utils/fetchGet.js");\n/* harmony import */ var _ApplicationContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ApplicationContext */ "./src/components/ApplicationContext.js");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ "./src/components/utils.js");\n\n\n\n\n\nfunction UsernameSettings() {\n  const [errorOcurred, setErrorOcurred] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [newUsernameValid, setNewUsernameValid] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [newUsernameUnique, setNewUsernameUnique] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [userCanChangeUsername, setUserCanChangeUsername] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [changeUsernameSuccess, setChangeUsernameSuccess] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [changeUsernameLoading, setChangeUsernameLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const {\n    user,\n    contextLoading,\n    modalErrorMessage,\n    setErrorMessage,\n    setModalErrorMessage,\n    setSuccessMessage,\n    resetApplicationMessages,\n    retrieveUserData\n  } = (0,_ApplicationContext__WEBPACK_IMPORTED_MODULE_3__.useApplicationContext)();\n  const [currentPasswordCorrect, setCurrentPasswordCorrect] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  async function postNewUsername() {\n    setChangeUsernameLoading(true);\n    const newUsername = document.getElementById("username-input").value;\n    const currentPassword = document.getElementById("password-username-input").value;\n    const usernameResponse = await (0,_fetch_utils_fetchPost__WEBPACK_IMPORTED_MODULE_1__.submitChangeUsername)(currentPassword, newUsername);\n    if (usernameResponse.error) {\n      setModalErrorMessage("There was an error while submiting the new username");\n      setChangeUsernameLoading(false);\n      return;\n    }\n    if (usernameResponse.status === 400) {\n      console.log(usernameResponse);\n      let message = usernameResponse.newUsernameValid ? "" : "Username is not valid, make sure to only use numbers and letters\\n";\n      message += usernameResponse.newUsernameUnique ? "" : "Username is already in use\\n";\n      message += usernameResponse.userCanChangeUsername ? "" : "You must wait 30 days in between switching usernames\\n";\n      message += usernameResponse.currentPasswordCorrect ? "" : "Password is incorrect\\n";\n      setChangeUsernameLoading(false);\n      setModalErrorMessage(message);\n      return;\n    }\n    if (usernameResponse.status === 200) {\n      setSuccessMessage("The new username has been saved");\n      setChangeUsernameLoading(false);\n      (0,_utils__WEBPACK_IMPORTED_MODULE_4__.closeModals)();\n      retrieveUserData();\n      return;\n    }\n    setModalErrorMessage("There has been an error while submiting the new username");\n    setChangeUsernameLoading(false);\n  }\n  if (contextLoading) {\n    return null;\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "p-3 d-flex justify-content-center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "container"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("strong", {\n    style: {\n      fontSize: "20px"\n    }\n  }, "Username"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, user.username)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    id: "username-button",\n    className: "btn btn-outline-secondary rounded-15 align-self-center ml-auto",\n    onClick: e => (0,_utils__WEBPACK_IMPORTED_MODULE_4__.toggleModal)("username-modal", e)\n  }, "Change"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal hidden",\n    id: "username-modal",\n    onClick: e => {\n      e.stopPropagation();\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal-header"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("h5", null, "Change username"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    type: "button",\n    className: "btn btn-link link-no-decorations ms-auto",\n    id: "close-modal",\n    onClick: e => {\n      (0,_utils__WEBPACK_IMPORTED_MODULE_4__.closeModals)();\n      resetApplicationMessages();\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", {\n    id: "close-modal",\n    "aria-hidden": "true"\n  }, "\\xD7"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal-body"\n  }, modalErrorMessage && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "alert alert-danger",\n    style: {\n      whiteSpace: "pre-line"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("small", null, modalErrorMessage)), changeUsernameLoading === true && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "alert alert-secondary"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "d-flex justify-content-center align-items-center"\n  }, "Loading...")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n    type: "password",\n    placeholder: "Current password",\n    className: "form-control",\n    id: "password-username-input",\n    onKeyUp: e => (0,_utils__WEBPACK_IMPORTED_MODULE_4__.enterKeySubmit)(e, postNewUsername)\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {\n    type: "text",\n    placeholder: "New username",\n    className: "form-control mt-2",\n    id: "username-input",\n    onKeyUp: e => (0,_utils__WEBPACK_IMPORTED_MODULE_4__.enterKeySubmit)(e, postNewUsername)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    className: "custom-modal-footer"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {\n    id: "submit-data",\n    className: "btn btn-primary mr-auto",\n    onClick: e => {\n      e.stopPropagation();\n      resetApplicationMessages();\n      postNewUsername();\n    }\n  }, "Save changes")))));\n}\n\n//# sourceURL=webpack://frontend/./src/components/user-settings-page-components/UsernameSettings.js?')}}]);